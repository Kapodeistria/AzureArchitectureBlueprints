"use strict";var FilePreviewBundle=(()=>{var Ll=Object.create;var hi=Object.defineProperty;var Dl=Object.getOwnPropertyDescriptor;var Rl=Object.getOwnPropertyNames;var Il=Object.getPrototypeOf,Ml=Object.prototype.hasOwnProperty;var ut=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),fs=(e,t)=>{for(var r in t)hi(e,r,{get:t[r],enumerable:!0})},Ol=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let h of Rl(t))!Ml.call(e,h)&&h!==r&&hi(e,h,{get:()=>t[h],enumerable:!(o=Dl(t,h))||o.enumerable});return e};var _t=(e,t,r)=>(r=e!=null?Ll(Il(e)):{},Ol(t||!e||!e.__esModule?hi(r,"default",{value:e,enumerable:!0}):r,e));var ui=ut((Od,ds)=>{ds.exports=window.React});var As=ut((Hp,Es)=>{var Cs=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,$l=/\n/g,ql=/^\s*/,Vl=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Kl=/^:\s*/,Gl=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Xl=/^[;\s]*/,Yl=/^\s+|\s+$/g,Jl=`
`,ws="/",xs="*",At="",Zl="comment",Ql="declaration";Es.exports=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var r=1,o=1;function h(d){var f=d.match($l);f&&(r+=f.length);var c=d.lastIndexOf(Jl);o=~c?d.length-c:o+d.length}function i(){var d={line:r,column:o};return function(f){return f.position=new n(d),p(),f}}function n(d){this.start=d,this.end={line:r,column:o},this.source=t.source}n.prototype.content=e;var s=[];function u(d){var f=new Error(t.source+":"+r+":"+o+": "+d);if(f.reason=d,f.filename=t.source,f.line=r,f.column=o,f.source=e,t.silent)s.push(f);else throw f}function l(d){var f=d.exec(e);if(f){var c=f[0];return h(c),e=e.slice(c.length),f}}function p(){l(ql)}function m(d){var f;for(d=d||[];f=g();)f!==!1&&d.push(f);return d}function g(){var d=i();if(!(ws!=e.charAt(0)||xs!=e.charAt(1))){for(var f=2;At!=e.charAt(f)&&(xs!=e.charAt(f)||ws!=e.charAt(f+1));)++f;if(f+=2,At===e.charAt(f-1))return u("End of comment missing");var c=e.slice(2,f-2);return o+=2,h(c),e=e.slice(f),o+=2,d({type:Zl,comment:c})}}function _(){var d=i(),f=l(Vl);if(f){if(g(),!l(Kl))return u("property missing ':'");var c=l(Gl),S=d({type:Ql,property:ks(f[0].replace(Cs,At)),value:c?ks(c[0].replace(Cs,At)):At});return l(Xl),S}}function a(){var d=[];m(d);for(var f;f=_();)f!==!1&&(d.push(f),m(d));return d}return p(),a()};function ks(e){return e?e.replace(Yl,At):At}});var Ts=ut(Qt=>{"use strict";var ec=Qt&&Qt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.default=rc;var tc=ec(As());function rc(e,t){var r=null;if(!e||typeof e!="string")return r;var o=(0,tc.default)(e),h=typeof t=="function";return o.forEach(function(i){if(i.type==="declaration"){var n=i.property,s=i.value;h?t(n,s,i):s&&(r=r||{},r[n]=s)}}),r}});var Ds=ut(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.camelCase=void 0;var ic=/^--[a-zA-Z0-9_-]+$/,nc=/-([a-z])/g,sc=/^[^-]+$/,oc=/^-(webkit|moz|ms|o|khtml)-/,ac=/^-(ms)-/,lc=function(e){return!e||sc.test(e)||ic.test(e)},cc=function(e,t){return t.toUpperCase()},Ls=function(e,t){return"".concat(t,"-")},hc=function(e,t){return t===void 0&&(t={}),lc(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(ac,Ls):e=e.replace(oc,Ls),e.replace(nc,cc))};xr.camelCase=hc});var Is=ut((Ci,Rs)=>{"use strict";var uc=Ci&&Ci.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},fc=uc(Ts()),dc=Ds();function yi(e,t){var r={};return!e||typeof e!="string"||(0,fc.default)(e,function(o,h){o&&h&&(r[(0,dc.camelCase)(o,t)]=h)}),r}yi.default=yi;Rs.exports=yi});var Ws=ut(Er=>{"use strict";var Mc=Symbol.for("react.transitional.element"),Oc=Symbol.for("react.fragment");function Us(e,t,r){var o=null;if(r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),"key"in t){r={};for(var h in t)h!=="key"&&(r[h]=t[h])}else r=t;return t=r.ref,{$$typeof:Mc,type:e,key:o,ref:t!==void 0?t:null,props:r}}Er.Fragment=Oc;Er.jsx=Us;Er.jsxs=Us});var Ar=ut((um,js)=>{"use strict";js.exports=Ws()});var oa=ut((_S,sa)=>{"use strict";var Yr=Object.prototype.hasOwnProperty,na=Object.prototype.toString,Zo=Object.defineProperty,Qo=Object.getOwnPropertyDescriptor,ea=function(t){return typeof Array.isArray=="function"?Array.isArray(t):na.call(t)==="[object Array]"},ta=function(t){if(!t||na.call(t)!=="[object Object]")return!1;var r=Yr.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&Yr.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!o)return!1;var h;for(h in t);return typeof h>"u"||Yr.call(t,h)},ra=function(t,r){Zo&&r.name==="__proto__"?Zo(t,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):t[r.name]=r.newValue},ia=function(t,r){if(r==="__proto__")if(Yr.call(t,r)){if(Qo)return Qo(t,r).value}else return;return t[r]};sa.exports=function e(){var t,r,o,h,i,n,s=arguments[0],u=1,l=arguments.length,p=!1;for(typeof s=="boolean"&&(p=s,s=arguments[1]||{},u=2),(s==null||typeof s!="object"&&typeof s!="function")&&(s={});u<l;++u)if(t=arguments[u],t!=null)for(r in t)o=ia(s,r),h=ia(t,r),s!==h&&(p&&h&&(ta(h)||(i=ea(h)))?(i?(i=!1,n=o&&ea(o)?o:[]):n=o&&ta(o)?o:{},ra(s,{name:r,newValue:e(p,n,h)})):typeof h<"u"&&ra(s,{name:r,newValue:h}));return s}});var ol=ut((ii,qn)=>{(function(e,t){if(typeof ii=="object"&&typeof qn=="object")qn.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var r=t();for(var o in r)(typeof ii=="object"?ii:e)[o]=r[o]}})(self,(()=>(()=>{"use strict";var e={4567:function(h,i,n){var s=this&&this.__decorate||function(c,S,b,y){var w,v=arguments.length,C=v<3?S:y===null?y=Object.getOwnPropertyDescriptor(S,b):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(c,S,b,y);else for(var L=c.length-1;L>=0;L--)(w=c[L])&&(C=(v<3?w(C):v>3?w(S,b,C):w(S,b))||C);return v>3&&C&&Object.defineProperty(S,b,C),C},u=this&&this.__param||function(c,S){return function(b,y){S(b,y,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;let l=n(9042),p=n(6114),m=n(9924),g=n(844),_=n(5596),a=n(4725),d=n(3656),f=i.AccessibilityManager=class extends g.Disposable{constructor(c,S){super(),this._terminal=c,this._renderService=S,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let b=0;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);if(this._topBoundaryFocusListener=b=>this._handleBoundaryFocus(b,0),this._bottomBoundaryFocusListener=b=>this._handleBoundaryFocus(b,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new m.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((b=>this._handleResize(b.rows)))),this.register(this._terminal.onRender((b=>this._refreshRows(b.start,b.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((b=>this._handleChar(b)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((b=>this._handleTab(b)))),this.register(this._terminal.onKey((b=>this._handleKey(b.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this._screenDprMonitor=new _.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener((()=>this._refreshRowsDimensions())),this.register((0,d.addDisposableDomListener)(window,"resize",(()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,g.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(c){for(let S=0;S<c;S++)this._handleChar(" ")}_handleChar(c){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==c&&(this._charsToAnnounce+=c):this._charsToAnnounce+=c,c===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)),p.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((()=>{this._accessibilityContainer.appendChild(this._liveRegion)}),0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,p.isMac&&this._liveRegion.remove()}_handleKey(c){this._clearLiveRegion(),/\p{Control}/u.test(c)||this._charsToConsume.push(c)}_refreshRows(c,S){this._liveRegionDebouncer.refresh(c,S,this._terminal.rows)}_renderRows(c,S){let b=this._terminal.buffer,y=b.lines.length.toString();for(let w=c;w<=S;w++){let v=b.translateBufferLineToString(b.ydisp+w,!0),C=(b.ydisp+w+1).toString(),L=this._rowElements[w];L&&(v.length===0?L.innerText="\xA0":L.textContent=v,L.setAttribute("aria-posinset",C),L.setAttribute("aria-setsize",y))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(c,S){let b=c.target,y=this._rowElements[S===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")===(S===0?"1":`${this._terminal.buffer.lines.length}`)||c.relatedTarget!==y)return;let w,v;if(S===0?(w=b,v=this._rowElements.pop(),this._rowContainer.removeChild(v)):(w=this._rowElements.shift(),v=b,this._rowContainer.removeChild(w)),w.removeEventListener("focus",this._topBoundaryFocusListener),v.removeEventListener("focus",this._bottomBoundaryFocusListener),S===0){let C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else{let C=this._createAccessibilityTreeNode();this._rowElements.push(C),this._rowContainer.appendChild(C)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(S===0?-1:1),this._rowElements[S===0?1:this._rowElements.length-2].focus(),c.preventDefault(),c.stopImmediatePropagation()}_handleResize(c){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let S=this._rowContainer.children.length;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);for(;this._rowElements.length>c;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let c=document.createElement("div");return c.setAttribute("role","listitem"),c.tabIndex=-1,this._refreshRowDimensions(c),c}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let c=0;c<this._terminal.rows;c++)this._refreshRowDimensions(this._rowElements[c])}}_refreshRowDimensions(c){c.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=f=s([u(1,a.IRenderService)],f)},3614:(h,i)=>{function n(p){return p.replace(/\r?\n/g,"\r")}function s(p,m){return m?"\x1B[200~"+p+"\x1B[201~":p}function u(p,m,g,_){p=s(p=n(p),g.decPrivateModes.bracketedPasteMode&&_.rawOptions.ignoreBracketedPasteMode!==!0),g.triggerDataEvent(p,!0),m.value=""}function l(p,m,g){let _=g.getBoundingClientRect(),a=p.clientX-_.left-10,d=p.clientY-_.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${a}px`,m.style.top=`${d}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=n,i.bracketTextForPaste=s,i.copyHandler=function(p,m){p.clipboardData&&p.clipboardData.setData("text/plain",m.selectionText),p.preventDefault()},i.handlePasteEvent=function(p,m,g,_){p.stopPropagation(),p.clipboardData&&u(p.clipboardData.getData("text/plain"),m,g,_)},i.paste=u,i.moveTextAreaUnderMouseCursor=l,i.rightClickHandler=function(p,m,g,_,a){l(p,m,g),a&&_.rightClickSelect(p),m.value=_.selectionText,m.select()}},7239:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;let s=n(1505);i.ColorContrastCache=class{constructor(){this._color=new s.TwoKeyMap,this._css=new s.TwoKeyMap}setCss(u,l,p){this._css.set(u,l,p)}getCss(u,l){return this._css.get(u,l)}setColor(u,l,p){this._color.set(u,l,p)}getColor(u,l){return this._color.get(u,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(n,s,u,l){n.addEventListener(s,u,l);let p=!1;return{dispose:()=>{p||(p=!0,n.removeEventListener(s,u,l))}}}},6465:function(h,i,n){var s=this&&this.__decorate||function(a,d,f,c){var S,b=arguments.length,y=b<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,f):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(a,d,f,c);else for(var w=a.length-1;w>=0;w--)(S=a[w])&&(y=(b<3?S(y):b>3?S(d,f,y):S(d,f))||y);return b>3&&y&&Object.defineProperty(d,f,y),y},u=this&&this.__param||function(a,d){return function(f,c){d(f,c,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;let l=n(3656),p=n(8460),m=n(844),g=n(2585),_=i.Linkifier2=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(a){super(),this._bufferService=a,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)((()=>{this._lastMouseEvent=void 0}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0})))}registerLinkProvider(a){return this._linkProviders.push(a),{dispose:()=>{let d=this._linkProviders.indexOf(a);d!==-1&&this._linkProviders.splice(d,1)}}}attachToDom(a,d,f){this._element=a,this._mouseService=d,this._renderService=f,this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){if(this._lastMouseEvent=a,!this._element||!this._mouseService)return;let d=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;let f=a.composedPath();for(let c=0;c<f.length;c++){let S=f[c];if(S.classList.contains("xterm"))break;if(S.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,d){var f,c;this._activeProviderReplies&&d||((f=this._activeProviderReplies)===null||f===void 0||f.forEach((b=>{b?.forEach((y=>{y.link.dispose&&y.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=a.y);let S=!1;for(let[b,y]of this._linkProviders.entries())d?!((c=this._activeProviderReplies)===null||c===void 0)&&c.get(b)&&(S=this._checkLinkProviderResult(b,a,S)):y.provideLinks(a.y,(w=>{var v,C;if(this._isMouseOut)return;let L=w?.map((I=>({link:I})));(v=this._activeProviderReplies)===null||v===void 0||v.set(b,L),S=this._checkLinkProviderResult(b,a,S),((C=this._activeProviderReplies)===null||C===void 0?void 0:C.size)===this._linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)}))}_removeIntersectingLinks(a,d){let f=new Set;for(let c=0;c<d.size;c++){let S=d.get(c);if(S)for(let b=0;b<S.length;b++){let y=S[b],w=y.link.range.start.y<a?0:y.link.range.start.x,v=y.link.range.end.y>a?this._bufferService.cols:y.link.range.end.x;for(let C=w;C<=v;C++){if(f.has(C)){S.splice(b--,1);break}f.add(C)}}}}_checkLinkProviderResult(a,d,f){var c;if(!this._activeProviderReplies)return f;let S=this._activeProviderReplies.get(a),b=!1;for(let y=0;y<a;y++)this._activeProviderReplies.has(y)&&!this._activeProviderReplies.get(y)||(b=!0);if(!b&&S){let y=S.find((w=>this._linkAtPosition(w.link,d)));y&&(f=!0,this._handleNewLink(y))}if(this._activeProviderReplies.size===this._linkProviders.length&&!f)for(let y=0;y<this._activeProviderReplies.size;y++){let w=(c=this._activeProviderReplies.get(y))===null||c===void 0?void 0:c.find((v=>this._linkAtPosition(v.link,d)));if(w){f=!0,this._handleNewLink(w);break}}return f}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._element||!this._mouseService||!this._currentLink)return;let d=this._positionFromMouseEvent(a,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,d){this._element&&this._currentLink&&this._lastMouseEvent&&(!a||!d||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(a.link,d)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>{var f,c;return(c=(f=this._currentLink)===null||f===void 0?void 0:f.state)===null||c===void 0?void 0:c.decorations.pointerCursor},set:f=>{var c,S;!((c=this._currentLink)===null||c===void 0)&&c.state&&this._currentLink.state.decorations.pointerCursor!==f&&(this._currentLink.state.decorations.pointerCursor=f,this._currentLink.state.isHovered&&((S=this._element)===null||S===void 0||S.classList.toggle("xterm-cursor-pointer",f)))}},underline:{get:()=>{var f,c;return(c=(f=this._currentLink)===null||f===void 0?void 0:f.state)===null||c===void 0?void 0:c.decorations.underline},set:f=>{var c,S,b;!((c=this._currentLink)===null||c===void 0)&&c.state&&((b=(S=this._currentLink)===null||S===void 0?void 0:S.state)===null||b===void 0?void 0:b.decorations.underline)!==f&&(this._currentLink.state.decorations.underline=f,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,f))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((f=>{if(!this._currentLink)return;let c=f.start===0?0:f.start+1+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.ydisp+1+f.end;if(this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=S&&(this._clearCurrentLink(c,S),this._lastMouseEvent&&this._element)){let b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._askForLink(b,!1)}}))))}_linkHover(a,d,f){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(f,d.text)}_fireUnderlineEvent(a,d){let f=a.range,c=this._bufferService.buffer.ydisp,S=this._createLinkUnderlineEvent(f.start.x-1,f.start.y-c-1,f.end.x,f.end.y-c-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(S)}_linkLeave(a,d,f){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(f,d.text)}_linkAtPosition(a,d){let f=a.range.start.y*this._bufferService.cols+a.range.start.x,c=a.range.end.y*this._bufferService.cols+a.range.end.x,S=d.y*this._bufferService.cols+d.x;return f<=S&&S<=c}_positionFromMouseEvent(a,d,f){let c=f.getCoords(a,d,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,d,f,c,S){return{x1:a,y1:d,x2:f,y2:c,cols:this._bufferService.cols,fg:S}}};i.Linkifier2=_=s([u(0,g.IBufferService)],_)},9042:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(h,i,n){var s=this&&this.__decorate||function(_,a,d,f){var c,S=arguments.length,b=S<3?a:f===null?f=Object.getOwnPropertyDescriptor(a,d):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(_,a,d,f);else for(var y=_.length-1;y>=0;y--)(c=_[y])&&(b=(S<3?c(b):S>3?c(a,d,b):c(a,d))||b);return S>3&&b&&Object.defineProperty(a,d,b),b},u=this&&this.__param||function(_,a){return function(d,f){a(d,f,_)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;let l=n(511),p=n(2585),m=i.OscLinkProvider=class{constructor(_,a,d){this._bufferService=_,this._optionsService=a,this._oscLinkService=d}provideLinks(_,a){var d;let f=this._bufferService.buffer.lines.get(_-1);if(!f)return void a(void 0);let c=[],S=this._optionsService.rawOptions.linkHandler,b=new l.CellData,y=f.getTrimmedLength(),w=-1,v=-1,C=!1;for(let L=0;L<y;L++)if(v!==-1||f.hasContent(L)){if(f.loadCell(L,b),b.hasExtendedAttrs()&&b.extended.urlId){if(v===-1){v=L,w=b.extended.urlId;continue}C=b.extended.urlId!==w}else v!==-1&&(C=!0);if(C||v!==-1&&L===y-1){let I=(d=this._oscLinkService.getLinkData(w))===null||d===void 0?void 0:d.uri;if(I){let x={start:{x:v+1,y:_},end:{x:L+(C||L!==y-1?0:1),y:_}},R=!1;if(!S?.allowNonHttpProtocols)try{let H=new URL(I);["http:","https:"].includes(H.protocol)||(R=!0)}catch{R=!0}R||c.push({text:I,range:x,activate:(H,B)=>S?S.activate(H,B,x):g(0,B),hover:(H,B)=>{var z;return(z=S?.hover)===null||z===void 0?void 0:z.call(S,H,B,x)},leave:(H,B)=>{var z;return(z=S?.leave)===null||z===void 0?void 0:z.call(S,H,B,x)}})}C=!1,b.hasExtendedAttrs()&&b.extended.urlId?(v=L,w=b.extended.urlId):(v=-1,w=-1)}}a(c)}};function g(_,a){if(confirm(`Do you want to navigate to ${a}?

WARNING: This link could potentially be dangerous`)){let d=window.open();if(d){try{d.opener=null}catch{}d.location.href=a}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=m=s([u(0,p.IBufferService),u(1,p.IOptionsService),u(2,p.IOscLinkService)],m)},6193:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(n,s){this._parentWindow=n,this._renderCallback=s,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(n,s,u){this._rowCount=u,n=n!==void 0?n:0,s=s!==void 0?s:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,s):s,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let n=Math.max(this._rowStart,0),s=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,s),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},5596:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;let s=n(844);class u extends s.Disposable{constructor(p){super(),this._parentWindow=p,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,s.toDisposable)((()=>{this.clearListener()})))}setListener(p){this._listener&&this.clearListener(),this._listener=p,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var p;this._outerListener&&((p=this._resolutionMediaMatchList)===null||p===void 0||p.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=u},3236:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;let s=n(3614),u=n(3656),l=n(6465),p=n(9042),m=n(3730),g=n(1680),_=n(3107),a=n(5744),d=n(2950),f=n(1296),c=n(428),S=n(4269),b=n(5114),y=n(8934),w=n(3230),v=n(9312),C=n(4725),L=n(6731),I=n(8055),x=n(8969),R=n(8460),H=n(844),B=n(6114),z=n(8437),N=n(2584),E=n(7399),D=n(5941),M=n(9074),O=n(2585),A=n(5435),$=n(4567),Y=typeof window<"u"?window.document:null;class T extends x.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(k={}){super(k),this.browser=B,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new H.MutableDisposable),this._onCursorMove=this.register(new R.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new R.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new R.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new R.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new R.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new R.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new R.EventEmitter),this._onBlur=this.register(new R.EventEmitter),this._onA11yCharEmitter=this.register(new R.EventEmitter),this._onA11yTabEmitter=this.register(new R.EventEmitter),this._onWillOpen=this.register(new R.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(l.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(M.DecorationService),this._instantiationService.setService(O.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((F,j)=>this.refresh(F,j)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((F=>this._reportWindowsOptions(F)))),this.register(this._inputHandler.onColor((F=>this._handleColorEvent(F)))),this.register((0,R.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,R.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,R.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((F=>this._afterResize(F.cols,F.rows)))),this.register((0,H.toDisposable)((()=>{var F,j;this._customKeyEventHandler=void 0,(j=(F=this.element)===null||F===void 0?void 0:F.parentNode)===null||j===void 0||j.removeChild(this.element)})))}_handleColorEvent(k){if(this._themeService)for(let F of k){let j,U="";switch(F.index){case 256:j="foreground",U="10";break;case 257:j="background",U="11";break;case 258:j="cursor",U="12";break;default:j="ansi",U="4;"+F.index}switch(F.type){case 0:let ne=I.color.toColorRGB(j==="ansi"?this._themeService.colors.ansi[F.index]:this._themeService.colors[j]);this.coreService.triggerDataEvent(`${N.C0.ESC}]${U};${(0,D.toRgbString)(ne)}${N.C1_ESCAPED.ST}`);break;case 1:if(j==="ansi")this._themeService.modifyColors((G=>G.ansi[F.index]=I.rgba.toColor(...F.color)));else{let G=j;this._themeService.modifyColors((ce=>ce[G]=I.rgba.toColor(...F.color)))}break;case 2:this._themeService.restoreColor(F.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(k){k?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance($.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(k){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[I"),this.updateCursorStyle(k),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var k;return(k=this.textarea)===null||k===void 0?void 0:k.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let k=this.buffer.ybase+this.buffer.y,F=this.buffer.lines.get(k);if(!F)return;let j=Math.min(this.buffer.x,this.cols-1),U=this._renderService.dimensions.css.cell.height,ne=F.getWidth(j),G=this._renderService.dimensions.css.cell.width*ne,ce=this.buffer.y*this._renderService.dimensions.css.cell.height,fe=j*this._renderService.dimensions.css.cell.width;this.textarea.style.left=fe+"px",this.textarea.style.top=ce+"px",this.textarea.style.width=G+"px",this.textarea.style.height=U+"px",this.textarea.style.lineHeight=U+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",(F=>{this.hasSelection()&&(0,s.copyHandler)(F,this._selectionService)})));let k=F=>(0,s.handlePasteEvent)(F,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",k)),this.register((0,u.addDisposableDomListener)(this.element,"paste",k)),B.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",(F=>{F.button===2&&(0,s.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",(F=>{(0,s.rightClickHandler)(F,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),B.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",(F=>{F.button===1&&(0,s.moveTextAreaUnderMouseCursor)(F,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",(k=>this._keyUp(k)),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",(k=>this._keyDown(k)),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",(k=>this._keyPress(k)),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",(k=>this._compositionHelper.compositionupdate(k)))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,u.addDisposableDomListener)(this.textarea,"input",(k=>this._inputEvent(k)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(k){var F;if(!k)throw new Error("Terminal requires a parent element.");k.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=k.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),k.appendChild(this.element);let j=Y.createDocumentFragment();this._viewportElement=Y.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),j.appendChild(this._viewportElement),this._viewportScrollArea=Y.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Y.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Y.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),j.appendChild(this.screenElement),this.textarea=Y.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),B.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(b.CoreBrowserService,this.textarea,(F=this._document.defaultView)!==null&&F!==void 0?F:window),this._instantiationService.setService(C.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",(U=>this._handleTextAreaFocus(U)))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(C.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(L.ThemeService),this._instantiationService.setService(C.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(S.CharacterJoinerService),this._instantiationService.setService(C.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(w.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(C.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((U=>this._onRender.fire(U)))),this.onResize((U=>this._renderService.resize(U.cols,U.rows))),this._compositionView=Y.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(j);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(y.MouseService),this._instantiationService.setService(C.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(g.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((U=>this.scrollLines(U.amount,U.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(C.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((U=>this.scrollLines(U.amount,U.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((U=>this._renderService.handleSelectionChanged(U.start,U.end,U.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((U=>{this.textarea.value=U,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((U=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(_.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",(U=>this._selectionService.handleMouseDown(U)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance($.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(U=>this._handleScreenReaderModeOptionChange(U)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(U=>{!this._overviewRulerRenderer&&U&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(f.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let k=this,F=this.element;function j(G){let ce=k._mouseService.getMouseReportCoords(G,k.screenElement);if(!ce)return!1;let fe,me;switch(G.overrideType||G.type){case"mousemove":me=32,G.buttons===void 0?(fe=3,G.button!==void 0&&(fe=G.button<3?G.button:3)):fe=1&G.buttons?0:4&G.buttons?1:2&G.buttons?2:3;break;case"mouseup":me=0,fe=G.button<3?G.button:3;break;case"mousedown":me=1,fe=G.button<3?G.button:3;break;case"wheel":if(k.viewport.getLinesScrolled(G)===0)return!1;me=G.deltaY<0?0:1,fe=4;break;default:return!1}return!(me===void 0||fe===void 0||fe>4)&&k.coreMouseService.triggerMouseEvent({col:ce.col,row:ce.row,x:ce.x,y:ce.y,button:fe,action:me,ctrl:G.ctrlKey,alt:G.altKey,shift:G.shiftKey})}let U={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ne={mouseup:G=>(j(G),G.buttons||(this._document.removeEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.removeEventListener("mousemove",U.mousedrag)),this.cancel(G)),wheel:G=>(j(G),this.cancel(G,!0)),mousedrag:G=>{G.buttons&&j(G)},mousemove:G=>{G.buttons||j(G)}};this.register(this.coreMouseService.onProtocolChange((G=>{G?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(G)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&G?U.mousemove||(F.addEventListener("mousemove",ne.mousemove),U.mousemove=ne.mousemove):(F.removeEventListener("mousemove",U.mousemove),U.mousemove=null),16&G?U.wheel||(F.addEventListener("wheel",ne.wheel,{passive:!1}),U.wheel=ne.wheel):(F.removeEventListener("wheel",U.wheel),U.wheel=null),2&G?U.mouseup||(F.addEventListener("mouseup",ne.mouseup),U.mouseup=ne.mouseup):(this._document.removeEventListener("mouseup",U.mouseup),F.removeEventListener("mouseup",U.mouseup),U.mouseup=null),4&G?U.mousedrag||(U.mousedrag=ne.mousedrag):(this._document.removeEventListener("mousemove",U.mousedrag),U.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(F,"mousedown",(G=>{if(G.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(G))return j(G),U.mouseup&&this._document.addEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.addEventListener("mousemove",U.mousedrag),this.cancel(G)}))),this.register((0,u.addDisposableDomListener)(F,"wheel",(G=>{if(!U.wheel){if(!this.buffer.hasScrollback){let ce=this.viewport.getLinesScrolled(G);if(ce===0)return;let fe=N.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(G.deltaY<0?"A":"B"),me="";for(let Ae=0;Ae<Math.abs(ce);Ae++)me+=fe;return this.coreService.triggerDataEvent(me,!0),this.cancel(G,!0)}return this.viewport.handleWheel(G)?this.cancel(G):void 0}}),{passive:!1})),this.register((0,u.addDisposableDomListener)(F,"touchstart",(G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(G),this.cancel(G)}),{passive:!0})),this.register((0,u.addDisposableDomListener)(F,"touchmove",(G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(G)?void 0:this.cancel(G)}),{passive:!1}))}refresh(k,F){var j;(j=this._renderService)===null||j===void 0||j.refreshRows(k,F)}updateCursorStyle(k){var F;!((F=this._selectionService)===null||F===void 0)&&F.shouldColumnSelect(k)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(k,F,j=0){var U;j===1?(super.scrollLines(k,F,j),this.refresh(0,this.rows-1)):(U=this.viewport)===null||U===void 0||U.scrollLines(k)}paste(k){(0,s.paste)(k,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(k){this._customKeyEventHandler=k}registerLinkProvider(k){return this.linkifier2.registerLinkProvider(k)}registerCharacterJoiner(k){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let F=this._characterJoinerService.register(k);return this.refresh(0,this.rows-1),F}deregisterCharacterJoiner(k){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(k)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(k){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+k)}registerDecoration(k){return this._decorationService.registerDecoration(k)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(k,F,j){this._selectionService.setSelection(k,F,j)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var k;(k=this._selectionService)===null||k===void 0||k.clearSelection()}selectAll(){var k;(k=this._selectionService)===null||k===void 0||k.selectAll()}selectLines(k,F){var j;(j=this._selectionService)===null||j===void 0||j.selectLines(k,F)}_keyDown(k){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1)return!1;let F=this.browser.isMac&&this.options.macOptionIsMeta&&k.altKey;if(!F&&!this._compositionHelper.keydown(k))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;F||k.key!=="Dead"&&k.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let j=(0,E.evaluateKeyboardEvent)(k,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(k),j.type===3||j.type===2){let U=this.rows-1;return this.scrollLines(j.type===2?-U:U),this.cancel(k,!0)}return j.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,k)||(j.cancel&&this.cancel(k,!0),!j.key||!!(k.key&&!k.ctrlKey&&!k.altKey&&!k.metaKey&&k.key.length===1&&k.key.charCodeAt(0)>=65&&k.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(j.key!==N.C0.ETX&&j.key!==N.C0.CR||(this.textarea.value=""),this._onKey.fire({key:j.key,domEvent:k}),this._showCursor(),this.coreService.triggerDataEvent(j.key,!0),!this.optionsService.rawOptions.screenReaderMode||k.altKey||k.ctrlKey?this.cancel(k,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(k,F){let j=k.isMac&&!this.options.macOptionIsMeta&&F.altKey&&!F.ctrlKey&&!F.metaKey||k.isWindows&&F.altKey&&F.ctrlKey&&!F.metaKey||k.isWindows&&F.getModifierState("AltGraph");return F.type==="keypress"?j:j&&(!F.keyCode||F.keyCode>47)}_keyUp(k){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1||((function(F){return F.keyCode===16||F.keyCode===17||F.keyCode===18})(k)||this.focus(),this.updateCursorStyle(k),this._keyPressHandled=!1)}_keyPress(k){let F;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(k)===!1)return!1;if(this.cancel(k),k.charCode)F=k.charCode;else if(k.which===null||k.which===void 0)F=k.keyCode;else{if(k.which===0||k.charCode===0)return!1;F=k.which}return!(!F||(k.altKey||k.ctrlKey||k.metaKey)&&!this._isThirdLevelShift(this.browser,k)||(F=String.fromCharCode(F),this._onKey.fire({key:F,domEvent:k}),this._showCursor(),this.coreService.triggerDataEvent(F,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(k){if(k.data&&k.inputType==="insertText"&&(!k.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let F=k.data;return this.coreService.triggerDataEvent(F,!0),this.cancel(k),!0}return!1}resize(k,F){k!==this.cols||F!==this.rows?super.resize(k,F):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(k,F){var j,U;(j=this._charSizeService)===null||j===void 0||j.measure(),(U=this.viewport)===null||U===void 0||U.syncScrollArea(!0)}clear(){var k;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let F=1;F<this.rows;F++)this.buffer.lines.push(this.buffer.getBlankLine(z.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(k=this.viewport)===null||k===void 0||k.reset(),this.refresh(0,this.rows-1)}}reset(){var k,F;this.options.rows=this.rows,this.options.cols=this.cols;let j=this._customKeyEventHandler;this._setup(),super.reset(),(k=this._selectionService)===null||k===void 0||k.reset(),this._decorationService.reset(),(F=this.viewport)===null||F===void 0||F.reset(),this._customKeyEventHandler=j,this.refresh(0,this.rows-1)}clearTextureAtlas(){var k;(k=this._renderService)===null||k===void 0||k.clearTextureAtlas()}_reportFocus(){var k;!((k=this.element)===null||k===void 0)&&k.classList.contains("focus")?this.coreService.triggerDataEvent(N.C0.ESC+"[I"):this.coreService.triggerDataEvent(N.C0.ESC+"[O")}_reportWindowsOptions(k){if(this._renderService)switch(k){case A.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let F=this._renderService.dimensions.css.canvas.width.toFixed(0),j=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[4;${j};${F}t`);break;case A.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let U=this._renderService.dimensions.css.cell.width.toFixed(0),ne=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[6;${ne};${U}t`)}}cancel(k,F){if(this.options.cancelEvents||F)return k.preventDefault(),k.stopPropagation(),!1}}i.Terminal=T},9924:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(n,s=1e3){this._renderCallback=n,this._debounceThresholdMS=s,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,s,u){this._rowCount=u,n=n!==void 0?n:0,s=s!==void 0?s:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,s):s;let l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){let p=l-this._lastRefreshMs,m=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let n=Math.max(this._rowStart,0),s=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,s)}}},1680:function(h,i,n){var s=this&&this.__decorate||function(d,f,c,S){var b,y=arguments.length,w=y<3?f:S===null?S=Object.getOwnPropertyDescriptor(f,c):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(d,f,c,S);else for(var v=d.length-1;v>=0;v--)(b=d[v])&&(w=(y<3?b(w):y>3?b(f,c,w):b(f,c))||w);return y>3&&w&&Object.defineProperty(f,c,w),w},u=this&&this.__param||function(d,f){return function(c,S){f(c,S,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;let l=n(3656),p=n(4725),m=n(8460),g=n(844),_=n(2585),a=i.Viewport=class extends g.Disposable{constructor(d,f,c,S,b,y,w,v){super(),this._viewportElement=d,this._scrollArea=f,this._bufferService=c,this._optionsService=S,this._charSizeService=b,this._renderService=y,this._coreBrowserService=w,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((C=>this._activeBuffer=C.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((C=>this._renderDimensions=C))),this._handleThemeChange(v.colors),this.register(v.onChangeColors((C=>this._handleThemeChange(C)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(d){this._viewportElement.style.backgroundColor=d.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(d){if(d)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let f=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==f&&(this._lastRecordedBufferHeight=f,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let d=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==d&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=d),this._refreshAnimationFrame=null}syncScrollArea(d=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(d);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(d)}_handleScroll(d){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let f=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:f,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let d=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(d*(this._smoothScrollState.target-this._smoothScrollState.origin)),d<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(d,f){let c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(f<0&&this._viewportElement.scrollTop!==0||f>0&&c<this._lastRecordedBufferHeight)||(d.cancelable&&d.preventDefault(),!1)}handleWheel(d){let f=this._getPixelsScrolled(d);return f!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+f:this._smoothScrollState.target+=f,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=f,this._bubbleScroll(d,f))}scrollLines(d){if(d!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let f=d*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+f,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!1})}_getPixelsScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let f=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_LINE?f*=this._currentRowHeight:d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._currentRowHeight*this._bufferService.rows),f}getBufferElements(d,f){var c;let S,b="",y=[],w=f??this._bufferService.buffer.lines.length,v=this._bufferService.buffer.lines;for(let C=d;C<w;C++){let L=v.get(C);if(!L)continue;let I=(c=v.get(C+1))===null||c===void 0?void 0:c.isWrapped;if(b+=L.translateToString(!I),!I||C===v.length-1){let x=document.createElement("div");x.textContent=b,y.push(x),b.length>0&&(S=x),b=""}}return{bufferElements:y,cursorElement:S}}getLinesScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let f=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(f/=this._currentRowHeight+0,this._wheelPartialScroll+=f,f=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._bufferService.rows),f}_applyScrollModifier(d,f){let c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&f.altKey||c==="ctrl"&&f.ctrlKey||c==="shift"&&f.shiftKey?d*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:d*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(d){this._lastTouchY=d.touches[0].pageY}handleTouchMove(d){let f=this._lastTouchY-d.touches[0].pageY;return this._lastTouchY=d.touches[0].pageY,f!==0&&(this._viewportElement.scrollTop+=f,this._bubbleScroll(d,f))}};i.Viewport=a=s([u(2,_.IBufferService),u(3,_.IOptionsService),u(4,p.ICharSizeService),u(5,p.IRenderService),u(6,p.ICoreBrowserService),u(7,p.IThemeService)],a)},3107:function(h,i,n){var s=this&&this.__decorate||function(a,d,f,c){var S,b=arguments.length,y=b<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,f):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(a,d,f,c);else for(var w=a.length-1;w>=0;w--)(S=a[w])&&(y=(b<3?S(y):b>3?S(d,f,y):S(d,f))||y);return b>3&&y&&Object.defineProperty(d,f,y),y},u=this&&this.__param||function(a,d){return function(f,c){d(f,c,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;let l=n(3656),p=n(4725),m=n(844),g=n(2585),_=i.BufferDecorationRenderer=class extends m.Disposable{constructor(a,d,f,c){super(),this._screenElement=a,this._bufferService=d,this._decorationService=f,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register((0,l.addDisposableDomListener)(window,"resize",(()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((S=>this._removeDecoration(S)))),this.register((0,m.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(let a of this._decorationService.decorations)this._renderDecoration(a);this._dimensionsChanged=!1}_renderDecoration(a){this._refreshStyle(a),this._dimensionsChanged&&this._refreshXPosition(a)}_createElement(a){var d,f;let c=document.createElement("div");c.classList.add("xterm-decoration"),c.classList.toggle("xterm-decoration-top-layer",((d=a?.options)===null||d===void 0?void 0:d.layer)==="top"),c.style.width=`${Math.round((a.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,c.style.height=(a.options.height||1)*this._renderService.dimensions.css.cell.height+"px",c.style.top=(a.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",c.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let S=(f=a.options.x)!==null&&f!==void 0?f:0;return S&&S>this._bufferService.cols&&(c.style.display="none"),this._refreshXPosition(a,c),c}_refreshStyle(a){let d=a.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)a.element&&(a.element.style.display="none",a.onRenderEmitter.fire(a.element));else{let f=this._decorationElements.get(a);f||(f=this._createElement(a),a.element=f,this._decorationElements.set(a,f),this._container.appendChild(f),a.onDispose((()=>{this._decorationElements.delete(a),f.remove()}))),f.style.top=d*this._renderService.dimensions.css.cell.height+"px",f.style.display=this._altBufferIsActive?"none":"block",a.onRenderEmitter.fire(f)}}_refreshXPosition(a,d=a.element){var f;if(!d)return;let c=(f=a.options.x)!==null&&f!==void 0?f:0;(a.options.anchor||"left")==="right"?d.style.right=c?c*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=c?c*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(a){var d;(d=this._decorationElements.get(a))===null||d===void 0||d.remove(),this._decorationElements.delete(a),a.dispose()}};i.BufferDecorationRenderer=_=s([u(1,g.IBufferService),u(2,g.IDecorationService),u(3,p.IRenderService)],_)},5871:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(let s of this._zones)if(s.color===n.options.overviewRulerOptions.color&&s.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(s,n.marker.line))return;if(this._lineAdjacentToZone(s,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(s,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,s){return s>=n.startBufferLine&&s<=n.endBufferLine}_lineAdjacentToZone(n,s,u){return s>=n.startBufferLine-this._linePadding[u||"full"]&&s<=n.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(n,s){n.startBufferLine=Math.min(n.startBufferLine,s),n.endBufferLine=Math.max(n.endBufferLine,s)}}},5744:function(h,i,n){var s=this&&this.__decorate||function(S,b,y,w){var v,C=arguments.length,L=C<3?b:w===null?w=Object.getOwnPropertyDescriptor(b,y):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(S,b,y,w);else for(var I=S.length-1;I>=0;I--)(v=S[I])&&(L=(C<3?v(L):C>3?v(b,y,L):v(b,y))||L);return C>3&&L&&Object.defineProperty(b,y,L),L},u=this&&this.__param||function(S,b){return function(y,w){b(y,w,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;let l=n(5871),p=n(3656),m=n(4725),g=n(844),_=n(2585),a={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},f={full:0,left:0,center:0,right:0},c=i.OverviewRulerRenderer=class extends g.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(S,b,y,w,v,C,L){var I;super(),this._viewportElement=S,this._screenElement=b,this._bufferService=y,this._decorationService=w,this._renderService=v,this._optionsService=C,this._coreBrowseService=L,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(I=this._viewportElement.parentElement)===null||I===void 0||I.insertBefore(this._canvas,this._viewportElement);let x=this._canvas.getContext("2d");if(!x)throw new Error("Ctx cannot be null");this._ctx=x,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,g.toDisposable)((()=>{var R;(R=this._canvas)===null||R===void 0||R.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register((0,p.addDisposableDomListener)(this._coreBrowseService.window,"resize",(()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){let S=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=S,d.center=b,d.right=S,this._refreshDrawHeightConstants(),f.full=0,f.left=0,f.center=d.left,f.right=d.left+d.center}_refreshDrawHeightConstants(){a.full=Math.round(2*this._coreBrowseService.dpr);let S=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(S,12),6)*this._coreBrowseService.dpr);a.left=b,a.center=b,a.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;let S=this._colorZoneStore.zones;for(let b of S)b.position!=="full"&&this._renderColorZone(b);for(let b of S)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(S){this._ctx.fillStyle=S.color,this._ctx.fillRect(f[S.position||"full"],Math.round((this._canvas.height-1)*(S.startBufferLine/this._bufferService.buffers.active.lines.length)-a[S.position||"full"]/2),d[S.position||"full"],Math.round((this._canvas.height-1)*((S.endBufferLine-S.startBufferLine)/this._bufferService.buffers.active.lines.length)+a[S.position||"full"]))}_queueRefresh(S,b){this._shouldUpdateDimensions=S||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};i.OverviewRulerRenderer=c=s([u(2,_.IBufferService),u(3,_.IDecorationService),u(4,m.IRenderService),u(5,_.IOptionsService),u(6,m.ICoreBrowserService)],c)},2950:function(h,i,n){var s=this&&this.__decorate||function(_,a,d,f){var c,S=arguments.length,b=S<3?a:f===null?f=Object.getOwnPropertyDescriptor(a,d):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(_,a,d,f);else for(var y=_.length-1;y>=0;y--)(c=_[y])&&(b=(S<3?c(b):S>3?c(a,d,b):c(a,d))||b);return S>3&&b&&Object.defineProperty(a,d,b),b},u=this&&this.__param||function(_,a){return function(d,f){a(d,f,_)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;let l=n(4725),p=n(2585),m=n(2584),g=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(_,a,d,f,c,S){this._textarea=_,this._compositionView=a,this._bufferService=d,this._optionsService=f,this._coreService=c,this._renderService=S,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(_){this._compositionView.textContent=_.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(_){if(this._isComposing||this._isSendingComposition){if(_.keyCode===229||_.keyCode===16||_.keyCode===17||_.keyCode===18)return!1;this._finalizeComposition(!1)}return _.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(_){if(this._compositionView.classList.remove("active"),this._isComposing=!1,_){let a={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let d;this._isSendingComposition=!1,a.start+=this._dataAlreadySent.length,d=this._isComposing?this._textarea.value.substring(a.start,a.end):this._textarea.value.substring(a.start),d.length>0&&this._coreService.triggerDataEvent(d,!0)}}),0)}else{this._isSendingComposition=!1;let a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}}_handleAnyTextareaChanges(){let _=this._textarea.value;setTimeout((()=>{if(!this._isComposing){let a=this._textarea.value,d=a.replace(_,"");this._dataAlreadySent=d,a.length>_.length?this._coreService.triggerDataEvent(d,!0):a.length<_.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):a.length===_.length&&a!==_&&this._coreService.triggerDataEvent(a,!0)}}),0)}updateCompositionElements(_){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let a=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.css.cell.height,f=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=a*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=f+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let S=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=f+"px",this._textarea.style.width=Math.max(S.width,1)+"px",this._textarea.style.height=Math.max(S.height,1)+"px",this._textarea.style.lineHeight=S.height+"px"}_||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};i.CompositionHelper=g=s([u(2,p.IBufferService),u(3,p.IOptionsService),u(4,p.ICoreService),u(5,l.IRenderService)],g)},9806:(h,i)=>{function n(s,u,l){let p=l.getBoundingClientRect(),m=s.getComputedStyle(l),g=parseInt(m.getPropertyValue("padding-left")),_=parseInt(m.getPropertyValue("padding-top"));return[u.clientX-p.left-g,u.clientY-p.top-_]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=n,i.getCoords=function(s,u,l,p,m,g,_,a,d){if(!g)return;let f=n(s,u,l);return f?(f[0]=Math.ceil((f[0]+(d?_/2:0))/_),f[1]=Math.ceil(f[1]/a),f[0]=Math.min(Math.max(f[0],1),p+(d?1:0)),f[1]=Math.min(Math.max(f[1],1),m),f):void 0}},9504:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;let s=n(2584);function u(a,d,f,c){let S=a-l(a,f),b=d-l(d,f),y=Math.abs(S-b)-(function(w,v,C){let L=0,I=w-l(w,C),x=v-l(v,C);for(let R=0;R<Math.abs(I-x);R++){let H=p(w,v)==="A"?-1:1,B=C.buffer.lines.get(I+H*R);B?.isWrapped&&L++}return L})(a,d,f);return _(y,g(p(a,d),c))}function l(a,d){let f=0,c=d.buffer.lines.get(a),S=c?.isWrapped;for(;S&&a>=0&&a<d.rows;)f++,c=d.buffer.lines.get(--a),S=c?.isWrapped;return f}function p(a,d){return a>d?"A":"B"}function m(a,d,f,c,S,b){let y=a,w=d,v="";for(;y!==f||w!==c;)y+=S?1:-1,S&&y>b.cols-1?(v+=b.buffer.translateBufferLineToString(w,!1,a,y),y=0,a=0,w++):!S&&y<0&&(v+=b.buffer.translateBufferLineToString(w,!1,0,a+1),y=b.cols-1,a=y,w--);return v+b.buffer.translateBufferLineToString(w,!1,a,y)}function g(a,d){let f=d?"O":"[";return s.C0.ESC+f+a}function _(a,d){a=Math.floor(a);let f="";for(let c=0;c<a;c++)f+=d;return f}i.moveToCellSequence=function(a,d,f,c){let S=f.buffer.x,b=f.buffer.y;if(!f.buffer.hasScrollback)return(function(v,C,L,I,x,R){return u(C,I,x,R).length===0?"":_(m(v,C,v,C-l(C,x),!1,x).length,g("D",R))})(S,b,0,d,f,c)+u(b,d,f,c)+(function(v,C,L,I,x,R){let H;H=u(C,I,x,R).length>0?I-l(I,x):C;let B=I,z=(function(N,E,D,M,O,A){let $;return $=u(D,M,O,A).length>0?M-l(M,O):E,N<D&&$<=M||N>=D&&$<M?"C":"D"})(v,C,L,I,x,R);return _(m(v,H,L,B,z==="C",x).length,g(z,R))})(S,b,a,d,f,c);let y;if(b===d)return y=S>a?"D":"C",_(Math.abs(S-a),g(y,c));y=b>d?"D":"C";let w=Math.abs(b-d);return _((function(v,C){return C.cols-v})(b>d?a:S,f)+(w-1)*f.cols+1+((b>d?S:a)-1),g(y,c))}},1296:function(h,i,n){var s=this&&this.__decorate||function(x,R,H,B){var z,N=arguments.length,E=N<3?R:B===null?B=Object.getOwnPropertyDescriptor(R,H):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(x,R,H,B);else for(var D=x.length-1;D>=0;D--)(z=x[D])&&(E=(N<3?z(E):N>3?z(R,H,E):z(R,H))||E);return N>3&&E&&Object.defineProperty(R,H,E),E},u=this&&this.__param||function(x,R){return function(H,B){R(H,B,x)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;let l=n(3787),p=n(2550),m=n(2223),g=n(6171),_=n(4725),a=n(8055),d=n(8460),f=n(844),c=n(2585),S="xterm-dom-renderer-owner-",b="xterm-rows",y="xterm-fg-",w="xterm-bg-",v="xterm-focus",C="xterm-selection",L=1,I=i.DomRenderer=class extends f.Disposable{constructor(x,R,H,B,z,N,E,D,M,O){super(),this._element=x,this._screenElement=R,this._viewportElement=H,this._linkifier2=B,this._charSizeService=N,this._optionsService=E,this._bufferService=D,this._coreBrowserService=M,this._themeService=O,this._terminalClass=L++,this._rowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(b),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(C),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,g.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((A=>this._injectCss(A)))),this._injectCss(this._themeService.colors),this._rowFactory=z.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(S+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((A=>this._handleLinkHover(A)))),this.register(this._linkifier2.onHideLinkUnderline((A=>this._handleLinkLeave(A)))),this.register((0,f.toDisposable)((()=>{this._element.classList.remove(S+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new p.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let x=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*x,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*x),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/x),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/x),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let H of this._rowElements)H.style.width=`${this.dimensions.css.canvas.width}px`,H.style.height=`${this.dimensions.css.cell.height}px`,H.style.lineHeight=`${this.dimensions.css.cell.height}px`,H.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let R=`${this._terminalSelector} .${b} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=R,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(x){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let R=`${this._terminalSelector} .${b} { color: ${x.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;R+=`${this._terminalSelector} .${b} .xterm-dim { color: ${a.color.multiplyOpacity(x.foreground,.5).css};}`,R+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,R+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",R+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${x.cursor.css};  color: ${x.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${x.cursor.css}; }}`,R+=`${this._terminalSelector} .${b}.${v} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${b}.${v} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block { background-color: ${x.cursor.css}; color: ${x.cursorAccent.css};}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${x.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${x.cursor.css} inset;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${x.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,R+=`${this._terminalSelector} .${C} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${C} div { position: absolute; background-color: ${x.selectionBackgroundOpaque.css};}${this._terminalSelector} .${C} div { position: absolute; background-color: ${x.selectionInactiveBackgroundOpaque.css};}`;for(let[H,B]of x.ansi.entries())R+=`${this._terminalSelector} .${y}${H} { color: ${B.css}; }${this._terminalSelector} .${y}${H}.xterm-dim { color: ${a.color.multiplyOpacity(B,.5).css}; }${this._terminalSelector} .${w}${H} { background-color: ${B.css}; }`;R+=`${this._terminalSelector} .${y}${m.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(x.background).css}; }${this._terminalSelector} .${y}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(x.background),.5).css}; }${this._terminalSelector} .${w}${m.INVERTED_DEFAULT_COLOR} { background-color: ${x.foreground.css}; }`,this._themeStyleElement.textContent=R}_setDefaultSpacing(){let x=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${x}px`,this._rowFactory.defaultSpacing=x}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(x,R){for(let H=this._rowElements.length;H<=R;H++){let B=document.createElement("div");this._rowContainer.appendChild(B),this._rowElements.push(B)}for(;this._rowElements.length>R;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(x,R){this._refreshRowElements(x,R),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(v)}handleFocus(){this._rowContainer.classList.add(v),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(x,R,H){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(x,R,H),this.renderRows(0,this._bufferService.rows-1),!x||!R)return;let B=x[1]-this._bufferService.buffer.ydisp,z=R[1]-this._bufferService.buffer.ydisp,N=Math.max(B,0),E=Math.min(z,this._bufferService.rows-1);if(N>=this._bufferService.rows||E<0)return;let D=document.createDocumentFragment();if(H){let M=x[0]>R[0];D.appendChild(this._createSelectionElement(N,M?R[0]:x[0],M?x[0]:R[0],E-N+1))}else{let M=B===N?x[0]:0,O=N===z?R[0]:this._bufferService.cols;D.appendChild(this._createSelectionElement(N,M,O));let A=E-N-1;if(D.appendChild(this._createSelectionElement(N+1,0,this._bufferService.cols,A)),N!==E){let $=z===E?R[0]:this._bufferService.cols;D.appendChild(this._createSelectionElement(E,0,$))}}this._selectionContainer.appendChild(D)}_createSelectionElement(x,R,H,B=1){let z=document.createElement("div");return z.style.height=B*this.dimensions.css.cell.height+"px",z.style.top=x*this.dimensions.css.cell.height+"px",z.style.left=R*this.dimensions.css.cell.width+"px",z.style.width=this.dimensions.css.cell.width*(H-R)+"px",z}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let x of this._rowElements)x.replaceChildren()}renderRows(x,R){let H=this._bufferService.buffer,B=H.ybase+H.y,z=Math.min(H.x,this._bufferService.cols-1),N=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,D=this._optionsService.rawOptions.cursorInactiveStyle;for(let M=x;M<=R;M++){let O=M+H.ydisp,A=this._rowElements[M],$=H.lines.get(O);if(!A||!$)break;A.replaceChildren(...this._rowFactory.createRow($,O,O===B,E,D,z,N,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${S}${this._terminalClass}`}_handleLinkHover(x){this._setCellUnderline(x.x1,x.x2,x.y1,x.y2,x.cols,!0)}_handleLinkLeave(x){this._setCellUnderline(x.x1,x.x2,x.y1,x.y2,x.cols,!1)}_setCellUnderline(x,R,H,B,z,N){H<0&&(x=0),B<0&&(R=0);let E=this._bufferService.rows-1;H=Math.max(Math.min(H,E),0),B=Math.max(Math.min(B,E),0),z=Math.min(z,this._bufferService.cols);let D=this._bufferService.buffer,M=D.ybase+D.y,O=Math.min(D.x,z-1),A=this._optionsService.rawOptions.cursorBlink,$=this._optionsService.rawOptions.cursorStyle,Y=this._optionsService.rawOptions.cursorInactiveStyle;for(let T=H;T<=B;++T){let le=T+D.ydisp,k=this._rowElements[T],F=D.lines.get(le);if(!k||!F)break;k.replaceChildren(...this._rowFactory.createRow(F,le,le===M,$,Y,O,A,this.dimensions.css.cell.width,this._widthCache,N?T===H?x:0:-1,N?(T===B?R:z)-1:-1))}}};i.DomRenderer=I=s([u(4,c.IInstantiationService),u(5,_.ICharSizeService),u(6,c.IOptionsService),u(7,c.IBufferService),u(8,_.ICoreBrowserService),u(9,_.IThemeService)],I)},3787:function(h,i,n){var s=this&&this.__decorate||function(y,w,v,C){var L,I=arguments.length,x=I<3?w:C===null?C=Object.getOwnPropertyDescriptor(w,v):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(y,w,v,C);else for(var R=y.length-1;R>=0;R--)(L=y[R])&&(x=(I<3?L(x):I>3?L(w,v,x):L(w,v))||x);return I>3&&x&&Object.defineProperty(w,v,x),x},u=this&&this.__param||function(y,w){return function(v,C){w(v,C,y)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;let l=n(2223),p=n(643),m=n(511),g=n(2585),_=n(8055),a=n(4725),d=n(4269),f=n(6171),c=n(3734),S=i.DomRendererRowFactory=class{constructor(y,w,v,C,L,I,x){this._document=y,this._characterJoinerService=w,this._optionsService=v,this._coreBrowserService=C,this._coreService=L,this._decorationService=I,this._themeService=x,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(y,w,v){this._selectionStart=y,this._selectionEnd=w,this._columnSelectMode=v}createRow(y,w,v,C,L,I,x,R,H,B,z){let N=[],E=this._characterJoinerService.getJoinedCharacters(w),D=this._themeService.colors,M,O=y.getNoBgTrimmedLength();v&&O<I+1&&(O=I+1);let A=0,$="",Y=0,T=0,le=0,k=!1,F=0,j=!1,U=0,ne=[],G=B!==-1&&z!==-1;for(let ce=0;ce<O;ce++){y.loadCell(ce,this._workCell);let fe=this._workCell.getWidth();if(fe===0)continue;let me=!1,Ae=ce,se=this._workCell;if(E.length>0&&ce===E[0][0]){me=!0;let ee=E.shift();se=new d.JoinedCellData(this._workCell,y.translateToString(!0,ee[0],ee[1]),ee[1]-ee[0]),Ae=ee[1]-1,fe=se.getWidth()}let je=this._isCellInSelection(ce,w),Ue=v&&ce===I,tt=G&&ce>=B&&ce<=z,Je=!1;this._decorationService.forEachDecorationAtCell(ce,w,void 0,(ee=>{Je=!0}));let rt=se.getChars()||p.WHITESPACE_CELL_CHAR;if(rt===" "&&(se.isUnderline()||se.isOverline())&&(rt="\xA0"),U=fe*R-H.get(rt,se.isBold(),se.isItalic()),M){if(A&&(je&&j||!je&&!j&&se.bg===Y)&&(je&&j&&D.selectionForeground||se.fg===T)&&se.extended.ext===le&&tt===k&&U===F&&!Ue&&!me&&!Je){$+=rt,A++;continue}A&&(M.textContent=$),M=this._document.createElement("span"),A=0,$=""}else M=this._document.createElement("span");if(Y=se.bg,T=se.fg,le=se.extended.ext,k=tt,F=U,j=je,me&&I>=ce&&I<=Ae&&(I=ce),!this._coreService.isCursorHidden&&Ue){if(ne.push("xterm-cursor"),this._coreBrowserService.isFocused)x&&ne.push("xterm-cursor-blink"),ne.push(C==="bar"?"xterm-cursor-bar":C==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(L)switch(L){case"outline":ne.push("xterm-cursor-outline");break;case"block":ne.push("xterm-cursor-block");break;case"bar":ne.push("xterm-cursor-bar");break;case"underline":ne.push("xterm-cursor-underline")}}if(se.isBold()&&ne.push("xterm-bold"),se.isItalic()&&ne.push("xterm-italic"),se.isDim()&&ne.push("xterm-dim"),$=se.isInvisible()?p.WHITESPACE_CELL_CHAR:se.getChars()||p.WHITESPACE_CELL_CHAR,se.isUnderline()&&(ne.push(`xterm-underline-${se.extended.underlineStyle}`),$===" "&&($="\xA0"),!se.isUnderlineColorDefault()))if(se.isUnderlineColorRGB())M.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(se.getUnderlineColor()).join(",")})`;else{let ee=se.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&se.isBold()&&ee<8&&(ee+=8),M.style.textDecorationColor=D.ansi[ee].css}se.isOverline()&&(ne.push("xterm-overline"),$===" "&&($="\xA0")),se.isStrikethrough()&&ne.push("xterm-strikethrough"),tt&&(M.style.textDecoration="underline");let xe=se.getFgColor(),lt=se.getFgColorMode(),Te=se.getBgColor(),We=se.getBgColorMode(),$e=!!se.isInverse();if($e){let ee=xe;xe=Te,Te=ee;let Le=lt;lt=We,We=Le}let W,K,Q,oe=!1;switch(this._decorationService.forEachDecorationAtCell(ce,w,void 0,(ee=>{ee.options.layer!=="top"&&oe||(ee.backgroundColorRGB&&(We=50331648,Te=ee.backgroundColorRGB.rgba>>8&16777215,W=ee.backgroundColorRGB),ee.foregroundColorRGB&&(lt=50331648,xe=ee.foregroundColorRGB.rgba>>8&16777215,K=ee.foregroundColorRGB),oe=ee.options.layer==="top")})),!oe&&je&&(W=this._coreBrowserService.isFocused?D.selectionBackgroundOpaque:D.selectionInactiveBackgroundOpaque,Te=W.rgba>>8&16777215,We=50331648,oe=!0,D.selectionForeground&&(lt=50331648,xe=D.selectionForeground.rgba>>8&16777215,K=D.selectionForeground)),oe&&ne.push("xterm-decoration-top"),We){case 16777216:case 33554432:Q=D.ansi[Te],ne.push(`xterm-bg-${Te}`);break;case 50331648:Q=_.rgba.toColor(Te>>16,Te>>8&255,255&Te),this._addStyle(M,`background-color:#${b((Te>>>0).toString(16),"0",6)}`);break;default:$e?(Q=D.foreground,ne.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):Q=D.background}switch(W||se.isDim()&&(W=_.color.multiplyOpacity(Q,.5)),lt){case 16777216:case 33554432:se.isBold()&&xe<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(xe+=8),this._applyMinimumContrast(M,Q,D.ansi[xe],se,W,void 0)||ne.push(`xterm-fg-${xe}`);break;case 50331648:let ee=_.rgba.toColor(xe>>16&255,xe>>8&255,255&xe);this._applyMinimumContrast(M,Q,ee,se,W,K)||this._addStyle(M,`color:#${b(xe.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(M,Q,D.foreground,se,W,void 0)||$e&&ne.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}ne.length&&(M.className=ne.join(" "),ne.length=0),Ue||me||Je?M.textContent=$:A++,U!==this.defaultSpacing&&(M.style.letterSpacing=`${U}px`),N.push(M),ce=Ae}return M&&A&&(M.textContent=$),N}_applyMinimumContrast(y,w,v,C,L,I){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,f.excludeFromContrastRatioDemands)(C.getCode()))return!1;let x=this._getContrastCache(C),R;if(L||I||(R=x.getColor(w.rgba,v.rgba)),R===void 0){let H=this._optionsService.rawOptions.minimumContrastRatio/(C.isDim()?2:1);R=_.color.ensureContrastRatio(L||w,I||v,H),x.setColor((L||w).rgba,(I||v).rgba,R??null)}return!!R&&(this._addStyle(y,`color:${R.css}`),!0)}_getContrastCache(y){return y.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(y,w){y.setAttribute("style",`${y.getAttribute("style")||""}${w};`)}_isCellInSelection(y,w){let v=this._selectionStart,C=this._selectionEnd;return!(!v||!C)&&(this._columnSelectMode?v[0]<=C[0]?y>=v[0]&&w>=v[1]&&y<C[0]&&w<=C[1]:y<v[0]&&w>=v[1]&&y>=C[0]&&w<=C[1]:w>v[1]&&w<C[1]||v[1]===C[1]&&w===v[1]&&y>=v[0]&&y<C[0]||v[1]<C[1]&&w===C[1]&&y<C[0]||v[1]<C[1]&&w===v[1]&&y>=v[0])}};function b(y,w,v){for(;y.length<v;)y=w+y;return y}i.DomRendererRowFactory=S=s([u(1,a.ICharacterJoinerService),u(2,g.IOptionsService),u(3,a.ICoreBrowserService),u(4,g.ICoreService),u(5,g.IDecorationService),u(6,a.IThemeService)],S)},2550:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(n){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let s=n.createElement("span"),u=n.createElement("span");u.style.fontWeight="bold";let l=n.createElement("span");l.style.fontStyle="italic";let p=n.createElement("span");p.style.fontWeight="bold",p.style.fontStyle="italic",this._measureElements=[s,u,l,p],this._container.appendChild(s),this._container.appendChild(u),this._container.appendChild(l),this._container.appendChild(p),n.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,s,u,l){n===this._font&&s===this._fontSize&&u===this._weight&&l===this._weightBold||(this._font=n,this._fontSize=s,this._weight=u,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(n,s,u){let l=0;if(!s&&!u&&n.length===1&&(l=n.charCodeAt(0))<256)return this._flat[l]!==-9999?this._flat[l]:this._flat[l]=this._measure(n,0);let p=n;s&&(p+="B"),u&&(p+="I");let m=this._holey.get(p);if(m===void 0){let g=0;s&&(g|=1),u&&(g|=2),m=this._measure(n,g),this._holey.set(p,m)}return m}_measure(n,s){let u=this._measureElements[s];return u.textContent=n.repeat(32),u.offsetWidth/32}}},2223:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;let s=n(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=s.isFirefox||s.isLegacyEdge?"bottom":"ideographic"},6171:(h,i)=>{function n(s){return 57508<=s&&s<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(s){if(!s)throw new Error("value must not be falsy");return s},i.isPowerlineGlyph=n,i.isRestrictedPowerlineGlyph=function(s){return 57520<=s&&s<=57527},i.excludeFromContrastRatioDemands=function(s){return n(s)||(function(u){return 9472<=u&&u<=9631})(s)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let n=this.selectionStart,s=this.selectionEnd;return!(!n||!s)&&(n[1]>s[1]||n[1]===s[1]&&n[0]>s[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(h,i,n){var s=this&&this.__decorate||function(a,d,f,c){var S,b=arguments.length,y=b<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,f):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(a,d,f,c);else for(var w=a.length-1;w>=0;w--)(S=a[w])&&(y=(b<3?S(y):b>3?S(d,f,y):S(d,f))||y);return b>3&&y&&Object.defineProperty(d,f,y),y},u=this&&this.__param||function(a,d){return function(f,c){d(f,c,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;let l=n(2585),p=n(8460),m=n(844),g=i.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(a,d,f){super(),this._optionsService=f,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new _(a,d,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){let a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())}};i.CharSizeService=g=s([u(2,l.IOptionsService)],g);class _{constructor(d,f,c){this._document=d,this._parentElement=f,this._optionsService=c,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let d={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return d.width!==0&&d.height!==0&&(this._result.width=d.width/32,this._result.height=Math.ceil(d.height)),this._result}}},4269:function(h,i,n){var s=this&&this.__decorate||function(d,f,c,S){var b,y=arguments.length,w=y<3?f:S===null?S=Object.getOwnPropertyDescriptor(f,c):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(d,f,c,S);else for(var v=d.length-1;v>=0;v--)(b=d[v])&&(w=(y<3?b(w):y>3?b(f,c,w):b(f,c))||w);return y>3&&w&&Object.defineProperty(f,c,w),w},u=this&&this.__param||function(d,f){return function(c,S){f(c,S,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;let l=n(3734),p=n(643),m=n(511),g=n(2585);class _ extends l.AttributeData{constructor(f,c,S){super(),this.content=0,this.combinedData="",this.fg=f.fg,this.bg=f.bg,this.combinedData=c,this._width=S}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(f){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=_;let a=i.CharacterJoinerService=class sl{constructor(f){this._bufferService=f,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(f){let c={id:this._nextCharacterJoinerId++,handler:f};return this._characterJoiners.push(c),c.id}deregister(f){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===f)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(f){if(this._characterJoiners.length===0)return[];let c=this._bufferService.buffer.lines.get(f);if(!c||c.length===0)return[];let S=[],b=c.translateToString(!0),y=0,w=0,v=0,C=c.getFg(0),L=c.getBg(0);for(let I=0;I<c.getTrimmedLength();I++)if(c.loadCell(I,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==C||this._workCell.bg!==L){if(I-y>1){let x=this._getJoinedRanges(b,v,w,c,y);for(let R=0;R<x.length;R++)S.push(x[R])}y=I,v=w,C=this._workCell.fg,L=this._workCell.bg}w+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-y>1){let I=this._getJoinedRanges(b,v,w,c,y);for(let x=0;x<I.length;x++)S.push(I[x])}return S}_getJoinedRanges(f,c,S,b,y){let w=f.substring(c,S),v=[];try{v=this._characterJoiners[0].handler(w)}catch(C){console.error(C)}for(let C=1;C<this._characterJoiners.length;C++)try{let L=this._characterJoiners[C].handler(w);for(let I=0;I<L.length;I++)sl._mergeRanges(v,L[I])}catch(L){console.error(L)}return this._stringRangesToCellRanges(v,b,y),v}_stringRangesToCellRanges(f,c,S){let b=0,y=!1,w=0,v=f[b];if(v){for(let C=S;C<this._bufferService.cols;C++){let L=c.getWidth(C),I=c.getString(C).length||p.WHITESPACE_CELL_CHAR.length;if(L!==0){if(!y&&v[0]<=w&&(v[0]=C,y=!0),v[1]<=w){if(v[1]=C,v=f[++b],!v)break;v[0]<=w?(v[0]=C,y=!0):y=!1}w+=I}}v&&(v[1]=this._bufferService.cols)}}static _mergeRanges(f,c){let S=!1;for(let b=0;b<f.length;b++){let y=f[b];if(S){if(c[1]<=y[0])return f[b-1][1]=c[1],f;if(c[1]<=y[1])return f[b-1][1]=Math.max(c[1],y[1]),f.splice(b,1),f;f.splice(b,1),b--}else{if(c[1]<=y[0])return f.splice(b,0,c),f;if(c[1]<=y[1])return y[0]=Math.min(c[0],y[0]),f;c[0]<y[1]&&(y[0]=Math.min(c[0],y[0]),S=!0)}}return S?f[f.length-1][1]=c[1]:f.push(c),f}};i.CharacterJoinerService=a=s([u(0,g.IBufferService)],a)},5114:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(n,s){this._textarea=n,this.window=s,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}},8934:function(h,i,n){var s=this&&this.__decorate||function(g,_,a,d){var f,c=arguments.length,S=c<3?_:d===null?d=Object.getOwnPropertyDescriptor(_,a):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(g,_,a,d);else for(var b=g.length-1;b>=0;b--)(f=g[b])&&(S=(c<3?f(S):c>3?f(_,a,S):f(_,a))||S);return c>3&&S&&Object.defineProperty(_,a,S),S},u=this&&this.__param||function(g,_){return function(a,d){_(a,d,g)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;let l=n(4725),p=n(9806),m=i.MouseService=class{constructor(g,_){this._renderService=g,this._charSizeService=_}getCoords(g,_,a,d,f){return(0,p.getCoords)(window,g,_,a,d,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,f)}getMouseReportCoords(g,_){let a=(0,p.getCoordsRelativeToElement)(window,g,_);if(this._charSizeService.hasValidSize)return a[0]=Math.min(Math.max(a[0],0),this._renderService.dimensions.css.canvas.width-1),a[1]=Math.min(Math.max(a[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(a[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(a[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(a[0]),y:Math.floor(a[1])}}};i.MouseService=m=s([u(0,l.IRenderService),u(1,l.ICharSizeService)],m)},3230:function(h,i,n){var s=this&&this.__decorate||function(S,b,y,w){var v,C=arguments.length,L=C<3?b:w===null?w=Object.getOwnPropertyDescriptor(b,y):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(S,b,y,w);else for(var I=S.length-1;I>=0;I--)(v=S[I])&&(L=(C<3?v(L):C>3?v(b,y,L):v(b,y))||L);return C>3&&L&&Object.defineProperty(b,y,L),L},u=this&&this.__param||function(S,b){return function(y,w){b(y,w,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;let l=n(3656),p=n(6193),m=n(5596),g=n(4725),_=n(8460),a=n(844),d=n(7226),f=n(2585),c=i.RenderService=class extends a.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(S,b,y,w,v,C,L,I){if(super(),this._rowCount=S,this._charSizeService=w,this._renderer=this.register(new a.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new _.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new _.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new _.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new _.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new p.RenderDebouncer(L.window,((x,R)=>this._renderRows(x,R))),this.register(this._renderDebouncer),this._screenDprMonitor=new m.ScreenDprMonitor(L.window),this._screenDprMonitor.setListener((()=>this.handleDevicePixelRatioChange())),this.register(this._screenDprMonitor),this.register(C.onResize((()=>this._fullRefresh()))),this.register(C.buffers.onBufferActivate((()=>{var x;return(x=this._renderer.value)===null||x===void 0?void 0:x.clear()}))),this.register(y.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(v.onDecorationRegistered((()=>this._fullRefresh()))),this.register(v.onDecorationRemoved((()=>this._fullRefresh()))),this.register(y.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],(()=>{this.clear(),this.handleResize(C.cols,C.rows),this._fullRefresh()}))),this.register(y.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(C.buffer.y,C.buffer.y,!0)))),this.register((0,l.addDisposableDomListener)(L.window,"resize",(()=>this.handleDevicePixelRatioChange()))),this.register(I.onChangeColors((()=>this._fullRefresh()))),"IntersectionObserver"in L.window){let x=new L.window.IntersectionObserver((R=>this._handleIntersectionChange(R[R.length-1])),{threshold:0});x.observe(b),this.register({dispose:()=>x.disconnect()})}}_handleIntersectionChange(S){this._isPaused=S.isIntersecting===void 0?S.intersectionRatio===0:!S.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(S,b,y=!1){this._isPaused?this._needsFullRefresh=!0:(y||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(S,b,this._rowCount))}_renderRows(S,b){this._renderer.value&&(S=Math.min(S,this._rowCount-1),b=Math.min(b,this._rowCount-1),this._renderer.value.renderRows(S,b),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:S,end:b}),this._onRender.fire({start:S,end:b}),this._isNextRenderRedrawOnly=!0)}resize(S,b){this._rowCount=b,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(S){this._renderer.value=S,this._renderer.value.onRequestRedraw((b=>this.refreshRows(b.start,b.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(S){return this._renderDebouncer.addRefreshCallback(S)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var S,b;this._renderer.value&&((b=(S=this._renderer.value).clearTextureAtlas)===null||b===void 0||b.call(S),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(S,b){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value.handleResize(S,b))):this._renderer.value.handleResize(S,b),this._fullRefresh())}handleCharSizeChanged(){var S;(S=this._renderer.value)===null||S===void 0||S.handleCharSizeChanged()}handleBlur(){var S;(S=this._renderer.value)===null||S===void 0||S.handleBlur()}handleFocus(){var S;(S=this._renderer.value)===null||S===void 0||S.handleFocus()}handleSelectionChanged(S,b,y){var w;this._selectionState.start=S,this._selectionState.end=b,this._selectionState.columnSelectMode=y,(w=this._renderer.value)===null||w===void 0||w.handleSelectionChanged(S,b,y)}handleCursorMove(){var S;(S=this._renderer.value)===null||S===void 0||S.handleCursorMove()}clear(){var S;(S=this._renderer.value)===null||S===void 0||S.clear()}};i.RenderService=c=s([u(2,f.IOptionsService),u(3,g.ICharSizeService),u(4,f.IDecorationService),u(5,f.IBufferService),u(6,g.ICoreBrowserService),u(7,g.IThemeService)],c)},9312:function(h,i,n){var s=this&&this.__decorate||function(v,C,L,I){var x,R=arguments.length,H=R<3?C:I===null?I=Object.getOwnPropertyDescriptor(C,L):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(v,C,L,I);else for(var B=v.length-1;B>=0;B--)(x=v[B])&&(H=(R<3?x(H):R>3?x(C,L,H):x(C,L))||H);return R>3&&H&&Object.defineProperty(C,L,H),H},u=this&&this.__param||function(v,C){return function(L,I){C(L,I,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;let l=n(9806),p=n(9504),m=n(456),g=n(4725),_=n(8460),a=n(844),d=n(6114),f=n(4841),c=n(511),S=n(2585),b="\xA0",y=new RegExp(b,"g"),w=i.SelectionService=class extends a.Disposable{constructor(v,C,L,I,x,R,H,B,z){super(),this._element=v,this._screenElement=C,this._linkifier=L,this._bufferService=I,this._coreService=x,this._mouseService=R,this._optionsService=H,this._renderService=B,this._coreBrowserService=z,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new _.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new _.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new _.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=N=>this._handleMouseMove(N),this._mouseUpListener=N=>this._handleMouseUp(N),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((N=>this._handleTrim(N))),this.register(this._bufferService.buffers.onBufferActivate((N=>this._handleBufferActivate(N)))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,a.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let v=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!v||!C||v[0]===C[0]&&v[1]===C[1])}get selectionText(){let v=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;if(!v||!C)return"";let L=this._bufferService.buffer,I=[];if(this._activeSelectionMode===3){if(v[0]===C[0])return"";let x=v[0]<C[0]?v[0]:C[0],R=v[0]<C[0]?C[0]:v[0];for(let H=v[1];H<=C[1];H++){let B=L.translateBufferLineToString(H,!0,x,R);I.push(B)}}else{let x=v[1]===C[1]?C[0]:void 0;I.push(L.translateBufferLineToString(v[1],!0,v[0],x));for(let R=v[1]+1;R<=C[1]-1;R++){let H=L.lines.get(R),B=L.translateBufferLineToString(R,!0);H?.isWrapped?I[I.length-1]+=B:I.push(B)}if(v[1]!==C[1]){let R=L.lines.get(C[1]),H=L.translateBufferLineToString(C[1],!0,0,C[0]);R&&R.isWrapped?I[I.length-1]+=H:I.push(H)}}return I.map((x=>x.replace(y," "))).join(d.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(v){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),d.isLinux&&v&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(v){let C=this._getMouseBufferCoords(v),L=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!!(L&&I&&C)&&this._areCoordsInSelection(C,L,I)}isCellInSelection(v,C){let L=this._model.finalSelectionStart,I=this._model.finalSelectionEnd;return!(!L||!I)&&this._areCoordsInSelection([v,C],L,I)}_areCoordsInSelection(v,C,L){return v[1]>C[1]&&v[1]<L[1]||C[1]===L[1]&&v[1]===C[1]&&v[0]>=C[0]&&v[0]<L[0]||C[1]<L[1]&&v[1]===L[1]&&v[0]<L[0]||C[1]<L[1]&&v[1]===C[1]&&v[0]>=C[0]}_selectWordAtCursor(v,C){var L,I;let x=(I=(L=this._linkifier.currentLink)===null||L===void 0?void 0:L.link)===null||I===void 0?void 0:I.range;if(x)return this._model.selectionStart=[x.start.x-1,x.start.y-1],this._model.selectionStartLength=(0,f.getRangeLength)(x,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let R=this._getMouseBufferCoords(v);return!!R&&(this._selectWordAt(R,C),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(v,C){this._model.clearSelection(),v=Math.max(v,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,v],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()}_handleTrim(v){this._model.handleTrim(v)&&this.refresh()}_getMouseBufferCoords(v){let C=this._mouseService.getCoords(v,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C}_getMouseEventScrollAmount(v){let C=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,v,this._screenElement)[1],L=this._renderService.dimensions.css.canvas.height;return C>=0&&C<=L?0:(C>L&&(C-=L),C=Math.min(Math.max(C,-50),50),C/=50,C/Math.abs(C)+Math.round(14*C))}shouldForceSelection(v){return d.isMac?v.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:v.shiftKey}handleMouseDown(v){if(this._mouseDownTimeStamp=v.timeStamp,(v.button!==2||!this.hasSelection)&&v.button===0){if(!this._enabled){if(!this.shouldForceSelection(v))return;v.stopPropagation()}v.preventDefault(),this._dragScrollAmount=0,this._enabled&&v.shiftKey?this._handleIncrementalClick(v):v.detail===1?this._handleSingleClick(v):v.detail===2?this._handleDoubleClick(v):v.detail===3&&this._handleTripleClick(v),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(v){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(v))}_handleSingleClick(v){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(v)?3:0,this._model.selectionStart=this._getMouseBufferCoords(v),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(v){this._selectWordAtCursor(v,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(v){let C=this._getMouseBufferCoords(v);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))}shouldColumnSelect(v){return v.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(v){if(v.stopImmediatePropagation(),!this._model.selectionStart)return;let C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(v),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(v),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let L=this._bufferService.buffer;if(this._model.selectionEnd[1]<L.lines.length){let I=L.lines.get(this._model.selectionEnd[1]);I&&I.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let v=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(v.ydisp+this._bufferService.rows,v.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=v.ydisp),this.refresh()}}_handleMouseUp(v){let C=v.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&v.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let L=this._mouseService.getCoords(v,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(L&&L[0]!==void 0&&L[1]!==void 0){let I=(0,p.moveToCellSequence)(L[0]-1,L[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(I,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let v=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,L=!(!v||!C||v[0]===C[0]&&v[1]===C[1]);L?v&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&v[0]===this._oldSelectionStart[0]&&v[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(v,C,L)):this._oldHasSelection&&this._fireOnSelectionChange(v,C,L)}_fireOnSelectionChange(v,C,L){this._oldSelectionStart=v,this._oldSelectionEnd=C,this._oldHasSelection=L,this._onSelectionChange.fire()}_handleBufferActivate(v){this.clearSelection(),this._trimListener.dispose(),this._trimListener=v.activeBuffer.lines.onTrim((C=>this._handleTrim(C)))}_convertViewportColToCharacterIndex(v,C){let L=C;for(let I=0;C>=I;I++){let x=v.loadCell(I,this._workCell).getChars().length;this._workCell.getWidth()===0?L--:x>1&&C!==I&&(L+=x-1)}return L}setSelection(v,C,L){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[v,C],this._model.selectionStartLength=L,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(v){this._isClickInSelection(v)||(this._selectWordAtCursor(v,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(v,C,L=!0,I=!0){if(v[0]>=this._bufferService.cols)return;let x=this._bufferService.buffer,R=x.lines.get(v[1]);if(!R)return;let H=x.translateBufferLineToString(v[1],!1),B=this._convertViewportColToCharacterIndex(R,v[0]),z=B,N=v[0]-B,E=0,D=0,M=0,O=0;if(H.charAt(B)===" "){for(;B>0&&H.charAt(B-1)===" ";)B--;for(;z<H.length&&H.charAt(z+1)===" ";)z++}else{let Y=v[0],T=v[0];R.getWidth(Y)===0&&(E++,Y--),R.getWidth(T)===2&&(D++,T++);let le=R.getString(T).length;for(le>1&&(O+=le-1,z+=le-1);Y>0&&B>0&&!this._isCharWordSeparator(R.loadCell(Y-1,this._workCell));){R.loadCell(Y-1,this._workCell);let k=this._workCell.getChars().length;this._workCell.getWidth()===0?(E++,Y--):k>1&&(M+=k-1,B-=k-1),B--,Y--}for(;T<R.length&&z+1<H.length&&!this._isCharWordSeparator(R.loadCell(T+1,this._workCell));){R.loadCell(T+1,this._workCell);let k=this._workCell.getChars().length;this._workCell.getWidth()===2?(D++,T++):k>1&&(O+=k-1,z+=k-1),z++,T++}}z++;let A=B+N-E+M,$=Math.min(this._bufferService.cols,z-B+E+D-M-O);if(C||H.slice(B,z).trim()!==""){if(L&&A===0&&R.getCodePoint(0)!==32){let Y=x.lines.get(v[1]-1);if(Y&&R.isWrapped&&Y.getCodePoint(this._bufferService.cols-1)!==32){let T=this._getWordAt([this._bufferService.cols-1,v[1]-1],!1,!0,!1);if(T){let le=this._bufferService.cols-T.start;A-=le,$+=le}}}if(I&&A+$===this._bufferService.cols&&R.getCodePoint(this._bufferService.cols-1)!==32){let Y=x.lines.get(v[1]+1);if(Y?.isWrapped&&Y.getCodePoint(0)!==32){let T=this._getWordAt([0,v[1]+1],!1,!1,!0);T&&($+=T.length)}}return{start:A,length:$}}}_selectWordAt(v,C){let L=this._getWordAt(v,C);if(L){for(;L.start<0;)L.start+=this._bufferService.cols,v[1]--;this._model.selectionStart=[L.start,v[1]],this._model.selectionStartLength=L.length}}_selectToWordAt(v){let C=this._getWordAt(v,!0);if(C){let L=v[1];for(;C.start<0;)C.start+=this._bufferService.cols,L--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,L++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,L]}}_isCharWordSeparator(v){return v.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(v.getChars())>=0}_selectLineAt(v){let C=this._bufferService.buffer.getWrappedRangeForLine(v),L={start:{x:0,y:C.first},end:{x:this._bufferService.cols-1,y:C.last}};this._model.selectionStart=[0,C.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,f.getRangeLength)(L,this._bufferService.cols)}};i.SelectionService=w=s([u(3,S.IBufferService),u(4,S.ICoreService),u(5,g.IMouseService),u(6,S.IOptionsService),u(7,g.IRenderService),u(8,g.ICoreBrowserService)],w)},4725:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;let s=n(8343);i.ICharSizeService=(0,s.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,s.createDecorator)("CoreBrowserService"),i.IMouseService=(0,s.createDecorator)("MouseService"),i.IRenderService=(0,s.createDecorator)("RenderService"),i.ISelectionService=(0,s.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,s.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,s.createDecorator)("ThemeService")},6731:function(h,i,n){var s=this&&this.__decorate||function(w,v,C,L){var I,x=arguments.length,R=x<3?v:L===null?L=Object.getOwnPropertyDescriptor(v,C):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(w,v,C,L);else for(var H=w.length-1;H>=0;H--)(I=w[H])&&(R=(x<3?I(R):x>3?I(v,C,R):I(v,C))||R);return x>3&&R&&Object.defineProperty(v,C,R),R},u=this&&this.__param||function(w,v){return function(C,L){v(C,L,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;let l=n(7239),p=n(8055),m=n(8460),g=n(844),_=n(2585),a=p.css.toColor("#ffffff"),d=p.css.toColor("#000000"),f=p.css.toColor("#ffffff"),c=p.css.toColor("#000000"),S={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let w=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],v=[0,95,135,175,215,255];for(let C=0;C<216;C++){let L=v[C/36%6|0],I=v[C/6%6|0],x=v[C%6];w.push({css:p.channels.toCss(L,I,x),rgba:p.channels.toRgba(L,I,x)})}for(let C=0;C<24;C++){let L=8+10*C;w.push({css:p.channels.toCss(L,L,L),rgba:p.channels.toRgba(L,L,L)})}return w})());let b=i.ThemeService=class extends g.Disposable{get colors(){return this._colors}constructor(w){super(),this._optionsService=w,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:a,background:d,cursor:f,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:S,selectionBackgroundOpaque:p.color.blend(d,S),selectionInactiveBackgroundTransparent:S,selectionInactiveBackgroundOpaque:p.color.blend(d,S),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(w={}){let v=this._colors;if(v.foreground=y(w.foreground,a),v.background=y(w.background,d),v.cursor=y(w.cursor,f),v.cursorAccent=y(w.cursorAccent,c),v.selectionBackgroundTransparent=y(w.selectionBackground,S),v.selectionBackgroundOpaque=p.color.blend(v.background,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundTransparent=y(w.selectionInactiveBackground,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundOpaque=p.color.blend(v.background,v.selectionInactiveBackgroundTransparent),v.selectionForeground=w.selectionForeground?y(w.selectionForeground,p.NULL_COLOR):void 0,v.selectionForeground===p.NULL_COLOR&&(v.selectionForeground=void 0),p.color.isOpaque(v.selectionBackgroundTransparent)&&(v.selectionBackgroundTransparent=p.color.opacity(v.selectionBackgroundTransparent,.3)),p.color.isOpaque(v.selectionInactiveBackgroundTransparent)&&(v.selectionInactiveBackgroundTransparent=p.color.opacity(v.selectionInactiveBackgroundTransparent,.3)),v.ansi=i.DEFAULT_ANSI_COLORS.slice(),v.ansi[0]=y(w.black,i.DEFAULT_ANSI_COLORS[0]),v.ansi[1]=y(w.red,i.DEFAULT_ANSI_COLORS[1]),v.ansi[2]=y(w.green,i.DEFAULT_ANSI_COLORS[2]),v.ansi[3]=y(w.yellow,i.DEFAULT_ANSI_COLORS[3]),v.ansi[4]=y(w.blue,i.DEFAULT_ANSI_COLORS[4]),v.ansi[5]=y(w.magenta,i.DEFAULT_ANSI_COLORS[5]),v.ansi[6]=y(w.cyan,i.DEFAULT_ANSI_COLORS[6]),v.ansi[7]=y(w.white,i.DEFAULT_ANSI_COLORS[7]),v.ansi[8]=y(w.brightBlack,i.DEFAULT_ANSI_COLORS[8]),v.ansi[9]=y(w.brightRed,i.DEFAULT_ANSI_COLORS[9]),v.ansi[10]=y(w.brightGreen,i.DEFAULT_ANSI_COLORS[10]),v.ansi[11]=y(w.brightYellow,i.DEFAULT_ANSI_COLORS[11]),v.ansi[12]=y(w.brightBlue,i.DEFAULT_ANSI_COLORS[12]),v.ansi[13]=y(w.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),v.ansi[14]=y(w.brightCyan,i.DEFAULT_ANSI_COLORS[14]),v.ansi[15]=y(w.brightWhite,i.DEFAULT_ANSI_COLORS[15]),w.extendedAnsi){let C=Math.min(v.ansi.length-16,w.extendedAnsi.length);for(let L=0;L<C;L++)v.ansi[L+16]=y(w.extendedAnsi[L],i.DEFAULT_ANSI_COLORS[L+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(w){this._restoreColor(w),this._onChangeColors.fire(this.colors)}_restoreColor(w){if(w!==void 0)switch(w){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[w]=this._restoreColors.ansi[w]}else for(let v=0;v<this._restoreColors.ansi.length;++v)this._colors.ansi[v]=this._restoreColors.ansi[v]}modifyColors(w){w(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function y(w,v){if(w!==void 0)try{return p.css.toColor(w)}catch{}return v}i.ThemeService=b=s([u(0,_.IOptionsService)],b)},6349:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;let s=n(8460),u=n(844);class l extends u.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new s.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new s.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new s.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;let g=new Array(m);for(let _=0;_<Math.min(m,this.length);_++)g[_]=this._array[this._getCyclicIndex(_)];this._array=g,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let g=this._length;g<m;g++)this._array[g]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,g){this._array[this._getCyclicIndex(m)]=g}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,g,..._){if(g){for(let a=m;a<this._length-g;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+g)];this._length-=g,this.onDeleteEmitter.fire({index:m,amount:g})}for(let a=this._length-1;a>=m;a--)this._array[this._getCyclicIndex(a+_.length)]=this._array[this._getCyclicIndex(a)];for(let a=0;a<_.length;a++)this._array[this._getCyclicIndex(m+a)]=_[a];if(_.length&&this.onInsertEmitter.fire({index:m,amount:_.length}),this._length+_.length>this._maxLength){let a=this._length+_.length-this._maxLength;this._startIndex+=a,this._length=this._maxLength,this.onTrimEmitter.fire(a)}else this._length+=_.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,g,_){if(!(g<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+_<0)throw new Error("Cannot shift elements in list beyond index 0");if(_>0){for(let d=g-1;d>=0;d--)this.set(m+d+_,this.get(m+d));let a=m+g+_-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let a=0;a<g;a++)this.set(m+a+_,this.get(m+a))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}i.CircularList=l},1439:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function n(s,u=5){if(typeof s!="object")return s;let l=Array.isArray(s)?[]:{};for(let p in s)l[p]=u<=1?s[p]:s[p]&&n(s[p],u-1);return l}},8055:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let s=n(6114),u=0,l=0,p=0,m=0;var g,_,a,d,f;function c(b){let y=b.toString(16);return y.length<2?"0"+y:y}function S(b,y){return b<y?(y+.05)/(b+.05):(b+.05)/(y+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},(function(b){b.toCss=function(y,w,v,C){return C!==void 0?`#${c(y)}${c(w)}${c(v)}${c(C)}`:`#${c(y)}${c(w)}${c(v)}`},b.toRgba=function(y,w,v,C=255){return(y<<24|w<<16|v<<8|C)>>>0}})(g||(i.channels=g={})),(function(b){function y(w,v){return m=Math.round(255*v),[u,l,p]=f.toChannels(w.rgba),{css:g.toCss(u,l,p,m),rgba:g.toRgba(u,l,p,m)}}b.blend=function(w,v){if(m=(255&v.rgba)/255,m===1)return{css:v.css,rgba:v.rgba};let C=v.rgba>>24&255,L=v.rgba>>16&255,I=v.rgba>>8&255,x=w.rgba>>24&255,R=w.rgba>>16&255,H=w.rgba>>8&255;return u=x+Math.round((C-x)*m),l=R+Math.round((L-R)*m),p=H+Math.round((I-H)*m),{css:g.toCss(u,l,p),rgba:g.toRgba(u,l,p)}},b.isOpaque=function(w){return(255&w.rgba)==255},b.ensureContrastRatio=function(w,v,C){let L=f.ensureContrastRatio(w.rgba,v.rgba,C);if(L)return f.toColor(L>>24&255,L>>16&255,L>>8&255)},b.opaque=function(w){let v=(255|w.rgba)>>>0;return[u,l,p]=f.toChannels(v),{css:g.toCss(u,l,p),rgba:v}},b.opacity=y,b.multiplyOpacity=function(w,v){return m=255&w.rgba,y(w,m*v/255)},b.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}})(_||(i.color=_={})),(function(b){let y,w;if(!s.isNode){let v=document.createElement("canvas");v.width=1,v.height=1;let C=v.getContext("2d",{willReadFrequently:!0});C&&(y=C,y.globalCompositeOperation="copy",w=y.createLinearGradient(0,0,1,1))}b.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return u=parseInt(v.slice(1,2).repeat(2),16),l=parseInt(v.slice(2,3).repeat(2),16),p=parseInt(v.slice(3,4).repeat(2),16),f.toColor(u,l,p);case 5:return u=parseInt(v.slice(1,2).repeat(2),16),l=parseInt(v.slice(2,3).repeat(2),16),p=parseInt(v.slice(3,4).repeat(2),16),m=parseInt(v.slice(4,5).repeat(2),16),f.toColor(u,l,p,m);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}let C=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(C)return u=parseInt(C[1]),l=parseInt(C[2]),p=parseInt(C[3]),m=Math.round(255*(C[5]===void 0?1:parseFloat(C[5]))),f.toColor(u,l,p,m);if(!y||!w)throw new Error("css.toColor: Unsupported css format");if(y.fillStyle=w,y.fillStyle=v,typeof y.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(y.fillRect(0,0,1,1),[u,l,p,m]=y.getImageData(0,0,1,1).data,m!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:g.toRgba(u,l,p,m),css:v}}})(a||(i.css=a={})),(function(b){function y(w,v,C){let L=w/255,I=v/255,x=C/255;return .2126*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.7152*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))+.0722*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))}b.relativeLuminance=function(w){return y(w>>16&255,w>>8&255,255&w)},b.relativeLuminance2=y})(d||(i.rgb=d={})),(function(b){function y(v,C,L){let I=v>>24&255,x=v>>16&255,R=v>>8&255,H=C>>24&255,B=C>>16&255,z=C>>8&255,N=S(d.relativeLuminance2(H,B,z),d.relativeLuminance2(I,x,R));for(;N<L&&(H>0||B>0||z>0);)H-=Math.max(0,Math.ceil(.1*H)),B-=Math.max(0,Math.ceil(.1*B)),z-=Math.max(0,Math.ceil(.1*z)),N=S(d.relativeLuminance2(H,B,z),d.relativeLuminance2(I,x,R));return(H<<24|B<<16|z<<8|255)>>>0}function w(v,C,L){let I=v>>24&255,x=v>>16&255,R=v>>8&255,H=C>>24&255,B=C>>16&255,z=C>>8&255,N=S(d.relativeLuminance2(H,B,z),d.relativeLuminance2(I,x,R));for(;N<L&&(H<255||B<255||z<255);)H=Math.min(255,H+Math.ceil(.1*(255-H))),B=Math.min(255,B+Math.ceil(.1*(255-B))),z=Math.min(255,z+Math.ceil(.1*(255-z))),N=S(d.relativeLuminance2(H,B,z),d.relativeLuminance2(I,x,R));return(H<<24|B<<16|z<<8|255)>>>0}b.ensureContrastRatio=function(v,C,L){let I=d.relativeLuminance(v>>8),x=d.relativeLuminance(C>>8);if(S(I,x)<L){if(x<I){let B=y(v,C,L),z=S(I,d.relativeLuminance(B>>8));if(z<L){let N=w(v,C,L);return z>S(I,d.relativeLuminance(N>>8))?B:N}return B}let R=w(v,C,L),H=S(I,d.relativeLuminance(R>>8));if(H<L){let B=y(v,C,L);return H>S(I,d.relativeLuminance(B>>8))?R:B}return R}},b.reduceLuminance=y,b.increaseLuminance=w,b.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},b.toColor=function(v,C,L,I){return{css:g.toCss(v,C,L,I),rgba:g.toRgba(v,C,L,I)}}})(f||(i.rgba=f={})),i.toPaddedHex=c,i.contrastRatio=S},8969:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;let s=n(844),u=n(2585),l=n(4348),p=n(7866),m=n(744),g=n(7302),_=n(6975),a=n(8460),d=n(1753),f=n(1480),c=n(7994),S=n(9282),b=n(5435),y=n(5981),w=n(2660),v=!1;class C extends s.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new a.EventEmitter),this._onScroll.event((I=>{var x;(x=this._onScrollApi)===null||x===void 0||x.fire(I.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(I){for(let x in I)this.optionsService.options[x]=I[x]}constructor(I){super(),this._windowsWrappingHeuristics=this.register(new s.MutableDisposable),this._onBinary=this.register(new a.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new a.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new a.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new g.OptionsService(I)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(_.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(f.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(w.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new b.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,a.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,a.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,a.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,a.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((x=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((x=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new y.WriteBuffer(((x,R)=>this._inputHandler.parse(x,R)))),this.register((0,a.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(I,x){this._writeBuffer.write(I,x)}writeSync(I,x){this._logService.logLevel<=u.LogLevelEnum.WARN&&!v&&(this._logService.warn("writeSync is unreliable and will be removed soon."),v=!0),this._writeBuffer.writeSync(I,x)}resize(I,x){isNaN(I)||isNaN(x)||(I=Math.max(I,m.MINIMUM_COLS),x=Math.max(x,m.MINIMUM_ROWS),this._bufferService.resize(I,x))}scroll(I,x=!1){this._bufferService.scroll(I,x)}scrollLines(I,x,R){this._bufferService.scrollLines(I,x,R)}scrollPages(I){this.scrollLines(I*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(I){let x=I-this._bufferService.buffer.ydisp;x!==0&&this.scrollLines(x)}registerEscHandler(I,x){return this._inputHandler.registerEscHandler(I,x)}registerDcsHandler(I,x){return this._inputHandler.registerDcsHandler(I,x)}registerCsiHandler(I,x){return this._inputHandler.registerCsiHandler(I,x)}registerOscHandler(I,x){return this._inputHandler.registerOscHandler(I,x)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let I=!1,x=this.optionsService.rawOptions.windowsPty;x&&x.buildNumber!==void 0&&x.buildNumber!==void 0?I=x.backend==="conpty"&&x.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(I=!0),I?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let I=[];I.push(this.onLineFeed(S.updateWindowsModeWrappedState.bind(null,this._bufferService))),I.push(this.registerCsiHandler({final:"H"},(()=>((0,S.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,s.toDisposable)((()=>{for(let x of I)x.dispose()}))}}}i.CoreTerminal=C},8460:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let s=0;s<this._listeners.length;s++)if(this._listeners[s]===n)return void this._listeners.splice(s,1)}}})),this._event}fire(n,s){let u=[];for(let l=0;l<this._listeners.length;l++)u.push(this._listeners[l]);for(let l=0;l<u.length;l++)u[l].call(void 0,n,s)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(n,s){return n((u=>s.fire(u)))}},5435:function(h,i,n){var s=this&&this.__decorate||function(N,E,D,M){var O,A=arguments.length,$=A<3?E:M===null?M=Object.getOwnPropertyDescriptor(E,D):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")$=Reflect.decorate(N,E,D,M);else for(var Y=N.length-1;Y>=0;Y--)(O=N[Y])&&($=(A<3?O($):A>3?O(E,D,$):O(E,D))||$);return A>3&&$&&Object.defineProperty(E,D,$),$},u=this&&this.__param||function(N,E){return function(D,M){E(D,M,N)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;let l=n(2584),p=n(7116),m=n(2015),g=n(844),_=n(482),a=n(8437),d=n(8460),f=n(643),c=n(511),S=n(3734),b=n(2585),y=n(6242),w=n(6351),v=n(5941),C={"(":0,")":1,"*":2,"+":3,"-":1,".":2},L=131072;function I(N,E){if(N>24)return E.setWinLines||!1;switch(N){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var x;(function(N){N[N.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",N[N.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(x||(i.WindowsOptionsReportType=x={}));let R=0;class H extends g.Disposable{getAttrData(){return this._curAttrData}constructor(E,D,M,O,A,$,Y,T,le=new m.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=D,this._coreService=M,this._logService=O,this._optionsService=A,this._oscLinkService=$,this._coreMouseService=Y,this._unicodeService=T,this._parser=le,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new _.StringToUtf32,this._utf8Decoder=new _.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new B(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((k=>this._activeBuffer=k.activeBuffer))),this._parser.setCsiHandlerFallback(((k,F)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(k),params:F.toArray()})})),this._parser.setEscHandlerFallback((k=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(k)})})),this._parser.setExecuteHandlerFallback((k=>{this._logService.debug("Unknown EXECUTE code: ",{code:k})})),this._parser.setOscHandlerFallback(((k,F,j)=>{this._logService.debug("Unknown OSC code: ",{identifier:k,action:F,data:j})})),this._parser.setDcsHandlerFallback(((k,F,j)=>{F==="HOOK"&&(j=j.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(k),action:F,payload:j})})),this._parser.setPrintHandler(((k,F,j)=>this.print(k,F,j))),this._parser.registerCsiHandler({final:"@"},(k=>this.insertChars(k))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(k=>this.scrollLeft(k))),this._parser.registerCsiHandler({final:"A"},(k=>this.cursorUp(k))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(k=>this.scrollRight(k))),this._parser.registerCsiHandler({final:"B"},(k=>this.cursorDown(k))),this._parser.registerCsiHandler({final:"C"},(k=>this.cursorForward(k))),this._parser.registerCsiHandler({final:"D"},(k=>this.cursorBackward(k))),this._parser.registerCsiHandler({final:"E"},(k=>this.cursorNextLine(k))),this._parser.registerCsiHandler({final:"F"},(k=>this.cursorPrecedingLine(k))),this._parser.registerCsiHandler({final:"G"},(k=>this.cursorCharAbsolute(k))),this._parser.registerCsiHandler({final:"H"},(k=>this.cursorPosition(k))),this._parser.registerCsiHandler({final:"I"},(k=>this.cursorForwardTab(k))),this._parser.registerCsiHandler({final:"J"},(k=>this.eraseInDisplay(k,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(k=>this.eraseInDisplay(k,!0))),this._parser.registerCsiHandler({final:"K"},(k=>this.eraseInLine(k,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(k=>this.eraseInLine(k,!0))),this._parser.registerCsiHandler({final:"L"},(k=>this.insertLines(k))),this._parser.registerCsiHandler({final:"M"},(k=>this.deleteLines(k))),this._parser.registerCsiHandler({final:"P"},(k=>this.deleteChars(k))),this._parser.registerCsiHandler({final:"S"},(k=>this.scrollUp(k))),this._parser.registerCsiHandler({final:"T"},(k=>this.scrollDown(k))),this._parser.registerCsiHandler({final:"X"},(k=>this.eraseChars(k))),this._parser.registerCsiHandler({final:"Z"},(k=>this.cursorBackwardTab(k))),this._parser.registerCsiHandler({final:"`"},(k=>this.charPosAbsolute(k))),this._parser.registerCsiHandler({final:"a"},(k=>this.hPositionRelative(k))),this._parser.registerCsiHandler({final:"b"},(k=>this.repeatPrecedingCharacter(k))),this._parser.registerCsiHandler({final:"c"},(k=>this.sendDeviceAttributesPrimary(k))),this._parser.registerCsiHandler({prefix:">",final:"c"},(k=>this.sendDeviceAttributesSecondary(k))),this._parser.registerCsiHandler({final:"d"},(k=>this.linePosAbsolute(k))),this._parser.registerCsiHandler({final:"e"},(k=>this.vPositionRelative(k))),this._parser.registerCsiHandler({final:"f"},(k=>this.hVPosition(k))),this._parser.registerCsiHandler({final:"g"},(k=>this.tabClear(k))),this._parser.registerCsiHandler({final:"h"},(k=>this.setMode(k))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(k=>this.setModePrivate(k))),this._parser.registerCsiHandler({final:"l"},(k=>this.resetMode(k))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(k=>this.resetModePrivate(k))),this._parser.registerCsiHandler({final:"m"},(k=>this.charAttributes(k))),this._parser.registerCsiHandler({final:"n"},(k=>this.deviceStatus(k))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(k=>this.deviceStatusPrivate(k))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(k=>this.softReset(k))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(k=>this.setCursorStyle(k))),this._parser.registerCsiHandler({final:"r"},(k=>this.setScrollRegion(k))),this._parser.registerCsiHandler({final:"s"},(k=>this.saveCursor(k))),this._parser.registerCsiHandler({final:"t"},(k=>this.windowOptions(k))),this._parser.registerCsiHandler({final:"u"},(k=>this.restoreCursor(k))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(k=>this.insertColumns(k))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(k=>this.deleteColumns(k))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(k=>this.selectProtected(k))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(k=>this.requestMode(k,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(k=>this.requestMode(k,!1))),this._parser.setExecuteHandler(l.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(l.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(l.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(l.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(l.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(l.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(l.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(l.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(l.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(l.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(l.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(l.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new y.OscHandler((k=>(this.setTitle(k),this.setIconName(k),!0)))),this._parser.registerOscHandler(1,new y.OscHandler((k=>this.setIconName(k)))),this._parser.registerOscHandler(2,new y.OscHandler((k=>this.setTitle(k)))),this._parser.registerOscHandler(4,new y.OscHandler((k=>this.setOrReportIndexedColor(k)))),this._parser.registerOscHandler(8,new y.OscHandler((k=>this.setHyperlink(k)))),this._parser.registerOscHandler(10,new y.OscHandler((k=>this.setOrReportFgColor(k)))),this._parser.registerOscHandler(11,new y.OscHandler((k=>this.setOrReportBgColor(k)))),this._parser.registerOscHandler(12,new y.OscHandler((k=>this.setOrReportCursorColor(k)))),this._parser.registerOscHandler(104,new y.OscHandler((k=>this.restoreIndexedColor(k)))),this._parser.registerOscHandler(110,new y.OscHandler((k=>this.restoreFgColor(k)))),this._parser.registerOscHandler(111,new y.OscHandler((k=>this.restoreBgColor(k)))),this._parser.registerOscHandler(112,new y.OscHandler((k=>this.restoreCursorColor(k)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(let k in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:k},(()=>this.selectCharset("("+k))),this._parser.registerEscHandler({intermediates:")",final:k},(()=>this.selectCharset(")"+k))),this._parser.registerEscHandler({intermediates:"*",final:k},(()=>this.selectCharset("*"+k))),this._parser.registerEscHandler({intermediates:"+",final:k},(()=>this.selectCharset("+"+k))),this._parser.registerEscHandler({intermediates:"-",final:k},(()=>this.selectCharset("-"+k))),this._parser.registerEscHandler({intermediates:".",final:k},(()=>this.selectCharset("."+k))),this._parser.registerEscHandler({intermediates:"/",final:k},(()=>this.selectCharset("/"+k)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((k=>(this._logService.error("Parsing error: ",k),k))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new w.DcsHandler(((k,F)=>this.requestStatusString(k,F))))}_preserveStack(E,D,M,O){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=D,this._parseStack.decodedLength=M,this._parseStack.position=O}_logSlowResolvingAsync(E){this._logService.logLevel<=b.LogLevelEnum.WARN&&Promise.race([E,new Promise(((D,M)=>setTimeout((()=>M("#SLOW_TIMEOUT")),5e3)))]).catch((D=>{if(D!=="#SLOW_TIMEOUT")throw D;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,D){let M,O=this._activeBuffer.x,A=this._activeBuffer.y,$=0,Y=this._parseStack.paused;if(Y){if(M=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,D))return this._logSlowResolvingAsync(M),M;O=this._parseStack.cursorStartX,A=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>L&&($=this._parseStack.position+L)}if(this._logService.logLevel<=b.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,(T=>String.fromCharCode(T))).join("")}"`),typeof E=="string"?E.split("").map((T=>T.charCodeAt(0))):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<L&&(this._parseBuffer=new Uint32Array(Math.min(E.length,L))),Y||this._dirtyRowTracker.clearRange(),E.length>L)for(let T=$;T<E.length;T+=L){let le=T+L<E.length?T+L:E.length,k=typeof E=="string"?this._stringDecoder.decode(E.substring(T,le),this._parseBuffer):this._utf8Decoder.decode(E.subarray(T,le),this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,k))return this._preserveStack(O,A,k,T),this._logSlowResolvingAsync(M),M}else if(!Y){let T=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(M=this._parser.parse(this._parseBuffer,T))return this._preserveStack(O,A,T,0),this._logSlowResolvingAsync(M),M}this._activeBuffer.x===O&&this._activeBuffer.y===A||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(E,D,M){let O,A,$=this._charsetService.charset,Y=this._optionsService.rawOptions.screenReaderMode,T=this._bufferService.cols,le=this._coreService.decPrivateModes.wraparound,k=this._coreService.modes.insertMode,F=this._curAttrData,j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&M-D>0&&j.getWidth(this._activeBuffer.x-1)===2&&j.setCellFromCodePoint(this._activeBuffer.x-1,0,1,F.fg,F.bg,F.extended);for(let U=D;U<M;++U){if(O=E[U],A=this._unicodeService.wcwidth(O),O<127&&$){let ne=$[String.fromCharCode(O)];ne&&(O=ne.charCodeAt(0))}if(Y&&this._onA11yChar.fire((0,_.stringFromCodePoint)(O)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),A||!this._activeBuffer.x){if(this._activeBuffer.x+A-1>=T){if(le){for(;this._activeBuffer.x<T;)j.setCellFromCodePoint(this._activeBuffer.x++,0,1,F.fg,F.bg,F.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),j=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=T-1,A===2)continue}if(k&&(j.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(F),F),j.getWidth(T-1)===2&&j.setCellFromCodePoint(T-1,f.NULL_CELL_CODE,f.NULL_CELL_WIDTH,F.fg,F.bg,F.extended)),j.setCellFromCodePoint(this._activeBuffer.x++,O,A,F.fg,F.bg,F.extended),A>0)for(;--A;)j.setCellFromCodePoint(this._activeBuffer.x++,0,0,F.fg,F.bg,F.extended)}else j.getWidth(this._activeBuffer.x-1)?j.addCodepointToCell(this._activeBuffer.x-1,O):j.addCodepointToCell(this._activeBuffer.x-2,O)}M-D>0&&(j.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<T&&M-D>0&&j.getWidth(this._activeBuffer.x)===0&&!j.hasContent(this._activeBuffer.x)&&j.setCellFromCodePoint(this._activeBuffer.x,0,1,F.fg,F.bg,F.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,D){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,D):this._parser.registerCsiHandler(E,(M=>!I(M.params[0],this._optionsService.rawOptions.windowOptions)||D(M)))}registerDcsHandler(E,D){return this._parser.registerDcsHandler(E,new w.DcsHandler(D))}registerEscHandler(E,D){return this._parser.registerEscHandler(E,D)}registerOscHandler(E,D){return this._parser.registerOscHandler(E,new y.OscHandler(D))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0)&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);D.hasWidth(this._activeBuffer.x)&&!D.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,D){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+D):(this._activeBuffer.x=E,this._activeBuffer.y=D),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,D){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+D)}cursorUp(E){let D=this._activeBuffer.y-this._activeBuffer.scrollTop;return D>=0?this._moveCursor(0,-Math.min(D,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){let D=this._activeBuffer.scrollBottom-this._activeBuffer.y;return D>=0?this._moveCursor(0,Math.min(D,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){let D=E.params[0];return D===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:D===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=E.params[0]||1;for(;D--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=E.params[0]||1;for(;D--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){let D=E.params[0];return D===1&&(this._curAttrData.bg|=536870912),D!==2&&D!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,D,M,O=!1,A=!1){let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);$.replaceCells(D,M,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),A),O&&($.isWrapped=!1)}_resetBufferLine(E,D=!1){let M=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);M&&(M.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),D),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),M.isWrapped=!1)}eraseInDisplay(E,D=!1){let M;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,D);M<this._bufferService.rows;M++)this._resetBufferLine(M,D);this._dirtyRowTracker.markDirty(M);break;case 1:for(M=this._activeBuffer.y,this._dirtyRowTracker.markDirty(M),this._eraseInBufferLine(M,0,this._activeBuffer.x+1,!0,D),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(M+1).isWrapped=!1);M--;)this._resetBufferLine(M,D);this._dirtyRowTracker.markDirty(0);break;case 2:for(M=this._bufferService.rows,this._dirtyRowTracker.markDirty(M-1);M--;)this._resetBufferLine(M,D);this._dirtyRowTracker.markDirty(0);break;case 3:let O=this._activeBuffer.lines.length-this._bufferService.rows;O>0&&(this._activeBuffer.lines.trimStart(O),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-O,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-O,0),this._onScroll.fire(0))}return!0}eraseInLine(E,D=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,D);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,D);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,D)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let D=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=this._activeBuffer.ybase+this._activeBuffer.y,O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,A=this._bufferService.rows-1+this._activeBuffer.ybase-O+1;for(;D--;)this._activeBuffer.lines.splice(A-1,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let D=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let M=this._activeBuffer.ybase+this._activeBuffer.y,O;for(O=this._bufferService.rows-1-this._activeBuffer.scrollBottom,O=this._bufferService.rows-1+this._activeBuffer.ybase-O;D--;)this._activeBuffer.lines.splice(M,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();let D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();let D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let D=E.params[0]||1;for(;D--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let D=E.params[0]||1;for(;D--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let D=E.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){let O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O.deleteCells(0,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let D=E.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){let O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O.insertCells(0,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let D=E.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){let O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O.insertCells(this._activeBuffer.x,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let D=E.params[0]||1;for(let M=this._activeBuffer.scrollTop;M<=this._activeBuffer.scrollBottom;++M){let O=this._activeBuffer.lines.get(this._activeBuffer.ybase+M);O.deleteCells(this._activeBuffer.x,D,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),O.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();let D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){if(!this._parser.precedingCodepoint)return!0;let D=E.params[0]||1,M=new Uint32Array(D);for(let O=0;O<D;++O)M[O]=this._parser.precedingCodepoint;return this.print(M,0,M.length),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let D=0;D<E.length;D++)switch(E.params[D]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let D=0;D<E.length;D++)switch(E.params[D]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let D=0;D<E.length;D++)switch(E.params[D]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let D=0;D<E.length;D++)switch(E.params[D]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[D]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,D){let M=this._coreService.decPrivateModes,{activeProtocol:O,activeEncoding:A}=this._coreMouseService,$=this._coreService,{buffers:Y,cols:T}=this._bufferService,{active:le,alt:k}=Y,F=this._optionsService.rawOptions,j=ce=>ce?1:2,U=E.params[0];return ne=U,G=D?U===2?4:U===4?j($.modes.insertMode):U===12?3:U===20?j(F.convertEol):0:U===1?j(M.applicationCursorKeys):U===3?F.windowOptions.setWinLines?T===80?2:T===132?1:0:0:U===6?j(M.origin):U===7?j(M.wraparound):U===8?3:U===9?j(O==="X10"):U===12?j(F.cursorBlink):U===25?j(!$.isCursorHidden):U===45?j(M.reverseWraparound):U===66?j(M.applicationKeypad):U===67?4:U===1e3?j(O==="VT200"):U===1002?j(O==="DRAG"):U===1003?j(O==="ANY"):U===1004?j(M.sendFocus):U===1005?4:U===1006?j(A==="SGR"):U===1015?4:U===1016?j(A==="SGR_PIXELS"):U===1048?1:U===47||U===1047||U===1049?j(le===k):U===2004?j(M.bracketedPasteMode):0,$.triggerDataEvent(`${l.C0.ESC}[${D?"":"?"}${ne};${G}$y`),!0;var ne,G}_updateAttrColor(E,D,M,O,A){return D===2?(E|=50331648,E&=-16777216,E|=S.AttributeData.fromColorRGB([M,O,A])):D===5&&(E&=-50331904,E|=33554432|255&M),E}_extractColor(E,D,M){let O=[0,0,-1,0,0,0],A=0,$=0;do{if(O[$+A]=E.params[D+$],E.hasSubParams(D+$)){let Y=E.getSubParams(D+$),T=0;do O[1]===5&&(A=1),O[$+T+1+A]=Y[T];while(++T<Y.length&&T+$+1+A<O.length);break}if(O[1]===5&&$+A>=2||O[1]===2&&$+A>=5)break;O[1]&&(A=1)}while(++$+D<E.length&&$+A<O.length);for(let Y=2;Y<O.length;++Y)O[Y]===-1&&(O[Y]=0);switch(O[0]){case 38:M.fg=this._updateAttrColor(M.fg,O[1],O[3],O[4],O[5]);break;case 48:M.bg=this._updateAttrColor(M.bg,O[1],O[3],O[4],O[5]);break;case 58:M.extended=M.extended.clone(),M.extended.underlineColor=this._updateAttrColor(M.extended.underlineColor,O[1],O[3],O[4],O[5])}return $}_processUnderline(E,D){D.extended=D.extended.clone(),(!~E||E>5)&&(E=1),D.extended.underlineStyle=E,D.fg|=268435456,E===0&&(D.fg&=-268435457),D.updateExtended()}_processSGR0(E){E.fg=a.DEFAULT_ATTR_DATA.fg,E.bg=a.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;let D=E.length,M,O=this._curAttrData;for(let A=0;A<D;A++)M=E.params[A],M>=30&&M<=37?(O.fg&=-50331904,O.fg|=16777216|M-30):M>=40&&M<=47?(O.bg&=-50331904,O.bg|=16777216|M-40):M>=90&&M<=97?(O.fg&=-50331904,O.fg|=16777224|M-90):M>=100&&M<=107?(O.bg&=-50331904,O.bg|=16777224|M-100):M===0?this._processSGR0(O):M===1?O.fg|=134217728:M===3?O.bg|=67108864:M===4?(O.fg|=268435456,this._processUnderline(E.hasSubParams(A)?E.getSubParams(A)[0]:1,O)):M===5?O.fg|=536870912:M===7?O.fg|=67108864:M===8?O.fg|=1073741824:M===9?O.fg|=2147483648:M===2?O.bg|=134217728:M===21?this._processUnderline(2,O):M===22?(O.fg&=-134217729,O.bg&=-134217729):M===23?O.bg&=-67108865:M===24?(O.fg&=-268435457,this._processUnderline(0,O)):M===25?O.fg&=-536870913:M===27?O.fg&=-67108865:M===28?O.fg&=-1073741825:M===29?O.fg&=2147483647:M===39?(O.fg&=-67108864,O.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):M===49?(O.bg&=-67108864,O.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):M===38||M===48||M===58?A+=this._extractColor(E,A,O):M===53?O.bg|=1073741824:M===55?O.bg&=-1073741825:M===59?(O.extended=O.extended.clone(),O.extended.underlineColor=-1,O.updateExtended()):M===100?(O.fg&=-67108864,O.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,O.bg&=-67108864,O.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",M);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:let D=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${D};${M}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){let D=this._activeBuffer.y+1,M=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${D};${M}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){let D=E.params[0]||1;switch(D){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let M=D%2==1;return this._optionsService.options.cursorBlink=M,!0}setScrollRegion(E){let D=E.params[0]||1,M;return(E.length<2||(M=E.params[1])>this._bufferService.rows||M===0)&&(M=this._bufferService.rows),M>D&&(this._activeBuffer.scrollTop=D-1,this._activeBuffer.scrollBottom=M-1,this._setCursor(0,0)),!0}windowOptions(E){if(!I(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;let D=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:D!==2&&this._onRequestWindowsOptionsReport.fire(x.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(x.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:D!==0&&D!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),D!==0&&D!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:D!==0&&D!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),D!==0&&D!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){let D=[],M=E.split(";");for(;M.length>1;){let O=M.shift(),A=M.shift();if(/^\d+$/.exec(O)){let $=parseInt(O);if(z($))if(A==="?")D.push({type:0,index:$});else{let Y=(0,v.parseColor)(A);Y&&D.push({type:1,index:$,color:Y})}}}return D.length&&this._onColor.fire(D),!0}setHyperlink(E){let D=E.split(";");return!(D.length<2)&&(D[1]?this._createHyperlink(D[0],D[1]):!D[0]&&this._finishHyperlink())}_createHyperlink(E,D){this._getCurrentLinkId()&&this._finishHyperlink();let M=E.split(":"),O,A=M.findIndex(($=>$.startsWith("id=")));return A!==-1&&(O=M[A].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:O,uri:D}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,D){let M=E.split(";");for(let O=0;O<M.length&&!(D>=this._specialColors.length);++O,++D)if(M[O]==="?")this._onColor.fire([{type:0,index:this._specialColors[D]}]);else{let A=(0,v.parseColor)(M[O]);A&&this._onColor.fire([{type:1,index:this._specialColors[D],color:A}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;let D=[],M=E.split(";");for(let O=0;O<M.length;++O)if(/^\d+$/.exec(M[O])){let A=parseInt(M[O]);z(A)&&D.push({type:2,index:A})}return D.length&&this._onColor.fire(D),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(C[E[0]],p.CHARSETS[E[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){let E=new c.CellData;E.content=4194373,E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let D=0;D<this._bufferService.rows;++D){let M=this._activeBuffer.ybase+this._activeBuffer.y+D,O=this._activeBuffer.lines.get(M);O&&(O.fill(E),O.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,D){let M=this._bufferService.buffer,O=this._optionsService.rawOptions;return(A=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${A}${l.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${M.scrollTop+1};${M.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[O.cursorStyle]-(O.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,D){this._dirtyRowTracker.markRangeDirty(E,D)}}i.InputHandler=H;let B=class{constructor(N){this._bufferService=N,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(N){N<this.start?this.start=N:N>this.end&&(this.end=N)}markRangeDirty(N,E){N>E&&(R=N,N=E,E=R),N<this.start&&(this.start=N),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function z(N){return 0<=N&&N<256}B=s([u(0,b.IBufferService)],B)},844:(h,i)=>{function n(s){for(let u of s)u.dispose();s.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let s of this._disposables)s.dispose();this._disposables.length=0}register(s){return this._disposables.push(s),s}unregister(s){let u=this._disposables.indexOf(s);u!==-1&&this._disposables.splice(u,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(s){var u;this._isDisposed||s===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=s)}clear(){this.value=void 0}dispose(){var s;this._isDisposed=!0,(s=this._value)===null||s===void 0||s.dispose(),this._value=void 0}},i.toDisposable=function(s){return{dispose:s}},i.disposeArray=n,i.getDisposeArrayDisposable=function(s){return{dispose:()=>n(s)}}},1505:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(u,l,p){this._data[u]||(this._data[u]={}),this._data[u][l]=p}get(u,l){return this._data[u]?this._data[u][l]:void 0}clear(){this._data={}}}i.TwoKeyMap=n,i.FourKeyMap=class{constructor(){this._data=new n}set(s,u,l,p,m){this._data.get(s,u)||this._data.set(s,u,new n),this._data.get(s,u).set(l,p,m)}get(s,u,l,p){var m;return(m=this._data.get(s,u))===null||m===void 0?void 0:m.get(l,p)}clear(){this._data.clear()}}},6114:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";let n=i.isNode?"node":navigator.userAgent,s=i.isNode?"node":navigator.platform;i.isFirefox=n.includes("Firefox"),i.isLegacyEdge=n.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(n),i.getSafariVersion=function(){if(!i.isSafari)return 0;let u=n.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(s),i.isIpad=s==="iPad",i.isIphone=s==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(s),i.isLinux=s.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(n)},6106:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let n=0;i.SortedList=class{constructor(s){this._getKey=s,this._array=[]}clear(){this._array.length=0}insert(s){this._array.length!==0?(n=this._search(this._getKey(s)),this._array.splice(n,0,s)):this._array.push(s)}delete(s){if(this._array.length===0)return!1;let u=this._getKey(s);if(u===void 0||(n=this._search(u),n===-1)||this._getKey(this._array[n])!==u)return!1;do if(this._array[n]===s)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===u);return!1}*getKeyIterator(s){if(this._array.length!==0&&(n=this._search(s),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===s))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===s)}forEachByKey(s,u){if(this._array.length!==0&&(n=this._search(s),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===s))do u(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===s)}values(){return[...this._array].values()}_search(s){let u=0,l=this._array.length-1;for(;l>=u;){let p=u+l>>1,m=this._getKey(this._array[p]);if(m>s)l=p-1;else{if(!(m<s)){for(;p>0&&this._getKey(this._array[p-1])===s;)p--;return p}u=p+1}}return u}}},7226:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;let s=n(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let g=0,_=0,a=m.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(g=Date.now(),this._tasks[this._i]()||this._i++,g=Math.max(1,Date.now()-g),_=Math.max(g,_),d=m.timeRemaining(),1.5*_>d)return a-g<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-g))}ms`),void this._start();a=d}this.clear()}}class l extends u{_requestCallback(m){return setTimeout((()=>m(this._createDeadline(16))))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){let g=Date.now()+m;return{timeRemaining:()=>Math.max(0,g-Date.now())}}}i.PriorityTaskQueue=l,i.IdleTaskQueue=!s.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:l,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;let s=n(643);i.updateWindowsModeWrappedState=function(u){let l=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),p=l?.get(u.cols-1),m=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);m&&p&&(m.isWrapped=p[s.CHAR_DATA_CODE_INDEX]!==s.NULL_CELL_CODE&&p[s.CHAR_DATA_CODE_INDEX]!==s.WHITESPACE_CELL_CODE)}},3734:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new s}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){let l=new n;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=n;class s{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}constructor(l=0,p=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=p}clone(){return new s(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=s},9092:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;let s=n(6349),u=n(7226),l=n(3734),p=n(8437),m=n(4634),g=n(511),_=n(643),a=n(4863),d=n(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(f,c,S){this._hasScrollback=f,this._optionsService=c,this._bufferService=S,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=g.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),this._whitespaceCell=g.CellData.fromCharData([0,_.WHITESPACE_CELL_CHAR,_.WHITESPACE_CELL_WIDTH,_.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(f){return f?(this._nullCell.fg=f.fg,this._nullCell.bg=f.bg,this._nullCell.extended=f.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(f){return f?(this._whitespaceCell.fg=f.fg,this._whitespaceCell.bg=f.bg,this._whitespaceCell.extended=f.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(f,c){return new p.BufferLine(this._bufferService.cols,this.getNullCell(f),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let f=this.ybase+this.y-this.ydisp;return f>=0&&f<this._rows}_getCorrectBufferLength(f){if(!this._hasScrollback)return f;let c=f+this._optionsService.rawOptions.scrollback;return c>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:c}fillViewportRows(f){if(this.lines.length===0){f===void 0&&(f=p.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(f))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(f,c){let S=this.getNullCell(p.DEFAULT_ATTR_DATA),b=0,y=this._getCorrectBufferLength(c);if(y>this.lines.maxLength&&(this.lines.maxLength=y),this.lines.length>0){if(this._cols<f)for(let v=0;v<this.lines.length;v++)b+=+this.lines.get(v).resize(f,S);let w=0;if(this._rows<c)for(let v=this._rows;v<c;v++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(f,S)):this.ybase>0&&this.lines.length<=this.ybase+this.y+w+1?(this.ybase--,w++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(f,S)));else for(let v=this._rows;v>c;v--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(y<this.lines.maxLength){let v=this.lines.length-y;v>0&&(this.lines.trimStart(v),this.ybase=Math.max(this.ybase-v,0),this.ydisp=Math.max(this.ydisp-v,0),this.savedY=Math.max(this.savedY-v,0)),this.lines.maxLength=y}this.x=Math.min(this.x,f-1),this.y=Math.min(this.y,c-1),w&&(this.y+=w),this.savedX=Math.min(this.savedX,f-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(f,c),this._cols>f))for(let w=0;w<this.lines.length;w++)b+=+this.lines.get(w).resize(f,S);this._cols=f,this._rows=c,this._memoryCleanupQueue.clear(),b>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let f=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,f=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return f}get _isReflowEnabled(){let f=this._optionsService.rawOptions.windowsPty;return f&&f.buildNumber?this._hasScrollback&&f.backend==="conpty"&&f.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(f,c){this._cols!==f&&(f>this._cols?this._reflowLarger(f,c):this._reflowSmaller(f,c))}_reflowLarger(f,c){let S=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,f,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(S.length>0){let b=(0,m.reflowLargerCreateNewLayout)(this.lines,S);(0,m.reflowLargerApplyNewLayout)(this.lines,b.layout),this._reflowLargerAdjustViewport(f,c,b.countRemoved)}}_reflowLargerAdjustViewport(f,c,S){let b=this.getNullCell(p.DEFAULT_ATTR_DATA),y=S;for(;y-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new p.BufferLine(f,b))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-S,0)}_reflowSmaller(f,c){let S=this.getNullCell(p.DEFAULT_ATTR_DATA),b=[],y=0;for(let w=this.lines.length-1;w>=0;w--){let v=this.lines.get(w);if(!v||!v.isWrapped&&v.getTrimmedLength()<=f)continue;let C=[v];for(;v.isWrapped&&w>0;)v=this.lines.get(--w),C.unshift(v);let L=this.ybase+this.y;if(L>=w&&L<w+C.length)continue;let I=C[C.length-1].getTrimmedLength(),x=(0,m.reflowSmallerGetNewLineLengths)(C,this._cols,f),R=x.length-C.length,H;H=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+R):Math.max(0,this.lines.length-this.lines.maxLength+R);let B=[];for(let O=0;O<R;O++){let A=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);B.push(A)}B.length>0&&(b.push({start:w+C.length+y,newLines:B}),y+=B.length),C.push(...B);let z=x.length-1,N=x[z];N===0&&(z--,N=x[z]);let E=C.length-R-1,D=I;for(;E>=0;){let O=Math.min(D,N);if(C[z]===void 0)break;if(C[z].copyCellsFrom(C[E],D-O,N-O,O,!0),N-=O,N===0&&(z--,N=x[z]),D-=O,D===0){E--;let A=Math.max(E,0);D=(0,m.getWrappedLineTrimmedLength)(C,A,this._cols)}}for(let O=0;O<C.length;O++)x[O]<f&&C[O].setCell(x[O],S);let M=R-H;for(;M-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+y)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+R,this.ybase+c-1)}if(b.length>0){let w=[],v=[];for(let z=0;z<this.lines.length;z++)v.push(this.lines.get(z));let C=this.lines.length,L=C-1,I=0,x=b[I];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+y);let R=0;for(let z=Math.min(this.lines.maxLength-1,C+y-1);z>=0;z--)if(x&&x.start>L+R){for(let N=x.newLines.length-1;N>=0;N--)this.lines.set(z--,x.newLines[N]);z++,w.push({index:L+1,amount:x.newLines.length}),R+=x.newLines.length,x=b[++I]}else this.lines.set(z,v[L--]);let H=0;for(let z=w.length-1;z>=0;z--)w[z].index+=H,this.lines.onInsertEmitter.fire(w[z]),H+=w[z].amount;let B=Math.max(0,C+y-this.lines.maxLength);B>0&&this.lines.onTrimEmitter.fire(B)}}translateBufferLineToString(f,c,S=0,b){let y=this.lines.get(f);return y?y.translateToString(c,S,b):""}getWrappedRangeForLine(f){let c=f,S=f;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;S+1<this.lines.length&&this.lines.get(S+1).isWrapped;)S++;return{first:c,last:S}}setupTabStops(f){for(f!=null?this.tabs[f]||(f=this.prevStop(f)):(this.tabs={},f=0);f<this._cols;f+=this._optionsService.rawOptions.tabStopWidth)this.tabs[f]=!0}prevStop(f){for(f==null&&(f=this.x);!this.tabs[--f]&&f>0;);return f>=this._cols?this._cols-1:f<0?0:f}nextStop(f){for(f==null&&(f=this.x);!this.tabs[++f]&&f<this._cols;);return f>=this._cols?this._cols-1:f<0?0:f}clearMarkers(f){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===f&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let f=0;f<this.markers.length;f++)this.markers[f].dispose(),this.markers.splice(f--,1);this._isClearing=!1}addMarker(f){let c=new a.Marker(f);return this.markers.push(c),c.register(this.lines.onTrim((S=>{c.line-=S,c.line<0&&c.dispose()}))),c.register(this.lines.onInsert((S=>{c.line>=S.index&&(c.line+=S.amount)}))),c.register(this.lines.onDelete((S=>{c.line>=S.index&&c.line<S.index+S.amount&&c.dispose(),c.line>S.index&&(c.line-=S.amount)}))),c.register(c.onDispose((()=>this._removeMarker(c)))),c}_removeMarker(f){this._isClearing||this.markers.splice(this.markers.indexOf(f),1)}}},8437:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;let s=n(3734),u=n(511),l=n(643),p=n(482);i.DEFAULT_ATTR_DATA=Object.freeze(new s.AttributeData);let m=0;class g{constructor(a,d,f=!1){this.isWrapped=f,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*a);let c=d||u.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let S=0;S<a;++S)this.setCell(S,c);this.length=a}get(a){let d=this._data[3*a+0],f=2097151&d;return[this._data[3*a+1],2097152&d?this._combined[a]:f?(0,p.stringFromCodePoint)(f):"",d>>22,2097152&d?this._combined[a].charCodeAt(this._combined[a].length-1):f]}set(a,d){this._data[3*a+1]=d[l.CHAR_DATA_ATTR_INDEX],d[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[a]=d[1],this._data[3*a+0]=2097152|a|d[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*a+0]=d[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(a){return this._data[3*a+0]>>22}hasWidth(a){return 12582912&this._data[3*a+0]}getFg(a){return this._data[3*a+1]}getBg(a){return this._data[3*a+2]}hasContent(a){return 4194303&this._data[3*a+0]}getCodePoint(a){let d=this._data[3*a+0];return 2097152&d?this._combined[a].charCodeAt(this._combined[a].length-1):2097151&d}isCombined(a){return 2097152&this._data[3*a+0]}getString(a){let d=this._data[3*a+0];return 2097152&d?this._combined[a]:2097151&d?(0,p.stringFromCodePoint)(2097151&d):""}isProtected(a){return 536870912&this._data[3*a+2]}loadCell(a,d){return m=3*a,d.content=this._data[m+0],d.fg=this._data[m+1],d.bg=this._data[m+2],2097152&d.content&&(d.combinedData=this._combined[a]),268435456&d.bg&&(d.extended=this._extendedAttrs[a]),d}setCell(a,d){2097152&d.content&&(this._combined[a]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[a]=d.extended),this._data[3*a+0]=d.content,this._data[3*a+1]=d.fg,this._data[3*a+2]=d.bg}setCellFromCodePoint(a,d,f,c,S,b){268435456&S&&(this._extendedAttrs[a]=b),this._data[3*a+0]=d|f<<22,this._data[3*a+1]=c,this._data[3*a+2]=S}addCodepointToCell(a,d){let f=this._data[3*a+0];2097152&f?this._combined[a]+=(0,p.stringFromCodePoint)(d):(2097151&f?(this._combined[a]=(0,p.stringFromCodePoint)(2097151&f)+(0,p.stringFromCodePoint)(d),f&=-2097152,f|=2097152):f=d|4194304,this._data[3*a+0]=f)}insertCells(a,d,f,c){if((a%=this.length)&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new s.ExtendedAttrs),d<this.length-a){let S=new u.CellData;for(let b=this.length-a-d-1;b>=0;--b)this.setCell(a+d+b,this.loadCell(a+b,S));for(let b=0;b<d;++b)this.setCell(a+b,f)}else for(let S=a;S<this.length;++S)this.setCell(S,f);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new s.ExtendedAttrs)}deleteCells(a,d,f,c){if(a%=this.length,d<this.length-a){let S=new u.CellData;for(let b=0;b<this.length-a-d;++b)this.setCell(a+b,this.loadCell(a+d+b,S));for(let b=this.length-d;b<this.length;++b)this.setCell(b,f)}else for(let S=a;S<this.length;++S)this.setCell(S,f);a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new s.ExtendedAttrs),this.getWidth(a)!==0||this.hasContent(a)||this.setCellFromCodePoint(a,0,1,c?.fg||0,c?.bg||0,c?.extended||new s.ExtendedAttrs)}replaceCells(a,d,f,c,S=!1){if(S)for(a&&this.getWidth(a-1)===2&&!this.isProtected(a-1)&&this.setCellFromCodePoint(a-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new s.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&!this.isProtected(d)&&this.setCellFromCodePoint(d,0,1,c?.fg||0,c?.bg||0,c?.extended||new s.ExtendedAttrs);a<d&&a<this.length;)this.isProtected(a)||this.setCell(a,f),a++;else for(a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,c?.fg||0,c?.bg||0,c?.extended||new s.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d,0,1,c?.fg||0,c?.bg||0,c?.extended||new s.ExtendedAttrs);a<d&&a<this.length;)this.setCell(a++,f)}resize(a,d){if(a===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let f=3*a;if(a>this.length){if(this._data.buffer.byteLength>=4*f)this._data=new Uint32Array(this._data.buffer,0,f);else{let c=new Uint32Array(f);c.set(this._data),this._data=c}for(let c=this.length;c<a;++c)this.setCell(c,d)}else{this._data=this._data.subarray(0,f);let c=Object.keys(this._combined);for(let b=0;b<c.length;b++){let y=parseInt(c[b],10);y>=a&&delete this._combined[y]}let S=Object.keys(this._extendedAttrs);for(let b=0;b<S.length;b++){let y=parseInt(S[b],10);y>=a&&delete this._extendedAttrs[y]}}return this.length=a,4*f*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let a=new Uint32Array(this._data.length);return a.set(this._data),this._data=a,1}return 0}fill(a,d=!1){if(d)for(let f=0;f<this.length;++f)this.isProtected(f)||this.setCell(f,a);else{this._combined={},this._extendedAttrs={};for(let f=0;f<this.length;++f)this.setCell(f,a)}}copyFrom(a){this.length!==a.length?this._data=new Uint32Array(a._data):this._data.set(a._data),this.length=a.length,this._combined={};for(let d in a._combined)this._combined[d]=a._combined[d];this._extendedAttrs={};for(let d in a._extendedAttrs)this._extendedAttrs[d]=a._extendedAttrs[d];this.isWrapped=a.isWrapped}clone(){let a=new g(0);a._data=new Uint32Array(this._data),a.length=this.length;for(let d in this._combined)a._combined[d]=this._combined[d];for(let d in this._extendedAttrs)a._extendedAttrs[d]=this._extendedAttrs[d];return a.isWrapped=this.isWrapped,a}getTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0])return a+(this._data[3*a+0]>>22);return 0}getNoBgTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0]||50331648&this._data[3*a+2])return a+(this._data[3*a+0]>>22);return 0}copyCellsFrom(a,d,f,c,S){let b=a._data;if(S)for(let w=c-1;w>=0;w--){for(let v=0;v<3;v++)this._data[3*(f+w)+v]=b[3*(d+w)+v];268435456&b[3*(d+w)+2]&&(this._extendedAttrs[f+w]=a._extendedAttrs[d+w])}else for(let w=0;w<c;w++){for(let v=0;v<3;v++)this._data[3*(f+w)+v]=b[3*(d+w)+v];268435456&b[3*(d+w)+2]&&(this._extendedAttrs[f+w]=a._extendedAttrs[d+w])}let y=Object.keys(a._combined);for(let w=0;w<y.length;w++){let v=parseInt(y[w],10);v>=d&&(this._combined[v-d+f]=a._combined[v])}}translateToString(a=!1,d=0,f=this.length){a&&(f=Math.min(f,this.getTrimmedLength()));let c="";for(;d<f;){let S=this._data[3*d+0],b=2097151&S;c+=2097152&S?this._combined[d]:b?(0,p.stringFromCodePoint)(b):l.WHITESPACE_CELL_CHAR,d+=S>>22||1}return c}}i.BufferLine=g},4841:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(n,s){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return s*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(h,i)=>{function n(s,u,l){if(u===s.length-1)return s[u].getTrimmedLength();let p=!s[u].hasContent(l-1)&&s[u].getWidth(l-1)===1,m=s[u+1].getWidth(0)===2;return p&&m?l-1:l}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(s,u,l,p,m){let g=[];for(let _=0;_<s.length-1;_++){let a=_,d=s.get(++a);if(!d.isWrapped)continue;let f=[s.get(_)];for(;a<s.length&&d.isWrapped;)f.push(d),d=s.get(++a);if(p>=_&&p<a){_+=f.length-1;continue}let c=0,S=n(f,c,u),b=1,y=0;for(;b<f.length;){let v=n(f,b,u),C=v-y,L=l-S,I=Math.min(C,L);f[c].copyCellsFrom(f[b],y,S,I,!1),S+=I,S===l&&(c++,S=0),y+=I,y===v&&(b++,y=0),S===0&&c!==0&&f[c-1].getWidth(l-1)===2&&(f[c].copyCellsFrom(f[c-1],l-1,S++,1,!1),f[c-1].setCell(l-1,m))}f[c].replaceCells(S,l,m);let w=0;for(let v=f.length-1;v>0&&(v>c||f[v].getTrimmedLength()===0);v--)w++;w>0&&(g.push(_+f.length-w),g.push(w)),_+=f.length-1}return g},i.reflowLargerCreateNewLayout=function(s,u){let l=[],p=0,m=u[p],g=0;for(let _=0;_<s.length;_++)if(m===_){let a=u[++p];s.onDeleteEmitter.fire({index:_-g,amount:a}),_+=a-1,g+=a,m=u[++p]}else l.push(_);return{layout:l,countRemoved:g}},i.reflowLargerApplyNewLayout=function(s,u){let l=[];for(let p=0;p<u.length;p++)l.push(s.get(u[p]));for(let p=0;p<l.length;p++)s.set(p,l[p]);s.length=u.length},i.reflowSmallerGetNewLineLengths=function(s,u,l){let p=[],m=s.map(((d,f)=>n(s,f,u))).reduce(((d,f)=>d+f)),g=0,_=0,a=0;for(;a<m;){if(m-a<l){p.push(m-a);break}g+=l;let d=n(s,_,u);g>d&&(g-=d,_++);let f=s[_].getWidth(g-1)===2;f&&g--;let c=f?l-1:l;p.push(c),a+=c}return p},i.getWrappedLineTrimmedLength=n},5295:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;let s=n(8460),u=n(844),l=n(9092);class p extends u.Disposable{constructor(g,_){super(),this._optionsService=g,this._bufferService=_,this._onBufferActivate=this.register(new s.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(g){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(g),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(g,_){this._normal.resize(g,_),this._alt.resize(g,_),this.setupTabStops(g)}setupTabStops(g){this._normal.setupTabStops(g),this._alt.setupTabStops(g)}}i.BufferSet=p},511:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;let s=n(482),u=n(643),l=n(3734);class p extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(g){let _=new p;return _.setFromCharData(g),_}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,s.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(g){this.fg=g[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let _=!1;if(g[u.CHAR_DATA_CHAR_INDEX].length>2)_=!0;else if(g[u.CHAR_DATA_CHAR_INDEX].length===2){let a=g[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){let d=g[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(a-55296)+d-56320+65536|g[u.CHAR_DATA_WIDTH_INDEX]<<22:_=!0}else _=!0}else this.content=g[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[u.CHAR_DATA_WIDTH_INDEX]<<22;_&&(this.combinedData=g[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|g[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=p},643:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;let s=n(8460),u=n(844);class l{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new s.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}i.Marker=l,l._nextId=1},7116:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},i.CHARSETS.A={"#":"\xA3"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},i.CHARSETS.C=i.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},i.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},i.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},i.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},i.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},i.CHARSETS.E=i.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},i.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},i.CHARSETS.H=i.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},i.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(h,i)=>{var n,s,u;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,(function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL="\x7F"})(n||(i.C0=n={})),(function(l){l.PAD="\x80",l.HOP="\x81",l.BPH="\x82",l.NBH="\x83",l.IND="\x84",l.NEL="\x85",l.SSA="\x86",l.ESA="\x87",l.HTS="\x88",l.HTJ="\x89",l.VTS="\x8A",l.PLD="\x8B",l.PLU="\x8C",l.RI="\x8D",l.SS2="\x8E",l.SS3="\x8F",l.DCS="\x90",l.PU1="\x91",l.PU2="\x92",l.STS="\x93",l.CCH="\x94",l.MW="\x95",l.SPA="\x96",l.EPA="\x97",l.SOS="\x98",l.SGCI="\x99",l.SCI="\x9A",l.CSI="\x9B",l.ST="\x9C",l.OSC="\x9D",l.PM="\x9E",l.APC="\x9F"})(s||(i.C1=s={})),(function(l){l.ST=`${n.ESC}\\`})(u||(i.C1_ESCAPED=u={}))},7399:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;let s=n(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(l,p,m,g){let _={type:0,cancel:!1,key:void 0},a=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?_.key=p?s.C0.ESC+"OA":s.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?_.key=p?s.C0.ESC+"OD":s.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?_.key=p?s.C0.ESC+"OC":s.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(_.key=p?s.C0.ESC+"OB":s.C0.ESC+"[B");break;case 8:if(l.altKey){_.key=s.C0.ESC+s.C0.DEL;break}_.key=s.C0.DEL;break;case 9:if(l.shiftKey){_.key=s.C0.ESC+"[Z";break}_.key=s.C0.HT,_.cancel=!0;break;case 13:_.key=l.altKey?s.C0.ESC+s.C0.CR:s.C0.CR,_.cancel=!0;break;case 27:_.key=s.C0.ESC,l.altKey&&(_.key=s.C0.ESC+s.C0.ESC),_.cancel=!0;break;case 37:if(l.metaKey)break;a?(_.key=s.C0.ESC+"[1;"+(a+1)+"D",_.key===s.C0.ESC+"[1;3D"&&(_.key=s.C0.ESC+(m?"b":"[1;5D"))):_.key=p?s.C0.ESC+"OD":s.C0.ESC+"[D";break;case 39:if(l.metaKey)break;a?(_.key=s.C0.ESC+"[1;"+(a+1)+"C",_.key===s.C0.ESC+"[1;3C"&&(_.key=s.C0.ESC+(m?"f":"[1;5C"))):_.key=p?s.C0.ESC+"OC":s.C0.ESC+"[C";break;case 38:if(l.metaKey)break;a?(_.key=s.C0.ESC+"[1;"+(a+1)+"A",m||_.key!==s.C0.ESC+"[1;3A"||(_.key=s.C0.ESC+"[1;5A")):_.key=p?s.C0.ESC+"OA":s.C0.ESC+"[A";break;case 40:if(l.metaKey)break;a?(_.key=s.C0.ESC+"[1;"+(a+1)+"B",m||_.key!==s.C0.ESC+"[1;3B"||(_.key=s.C0.ESC+"[1;5B")):_.key=p?s.C0.ESC+"OB":s.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(_.key=s.C0.ESC+"[2~");break;case 46:_.key=a?s.C0.ESC+"[3;"+(a+1)+"~":s.C0.ESC+"[3~";break;case 36:_.key=a?s.C0.ESC+"[1;"+(a+1)+"H":p?s.C0.ESC+"OH":s.C0.ESC+"[H";break;case 35:_.key=a?s.C0.ESC+"[1;"+(a+1)+"F":p?s.C0.ESC+"OF":s.C0.ESC+"[F";break;case 33:l.shiftKey?_.type=2:l.ctrlKey?_.key=s.C0.ESC+"[5;"+(a+1)+"~":_.key=s.C0.ESC+"[5~";break;case 34:l.shiftKey?_.type=3:l.ctrlKey?_.key=s.C0.ESC+"[6;"+(a+1)+"~":_.key=s.C0.ESC+"[6~";break;case 112:_.key=a?s.C0.ESC+"[1;"+(a+1)+"P":s.C0.ESC+"OP";break;case 113:_.key=a?s.C0.ESC+"[1;"+(a+1)+"Q":s.C0.ESC+"OQ";break;case 114:_.key=a?s.C0.ESC+"[1;"+(a+1)+"R":s.C0.ESC+"OR";break;case 115:_.key=a?s.C0.ESC+"[1;"+(a+1)+"S":s.C0.ESC+"OS";break;case 116:_.key=a?s.C0.ESC+"[15;"+(a+1)+"~":s.C0.ESC+"[15~";break;case 117:_.key=a?s.C0.ESC+"[17;"+(a+1)+"~":s.C0.ESC+"[17~";break;case 118:_.key=a?s.C0.ESC+"[18;"+(a+1)+"~":s.C0.ESC+"[18~";break;case 119:_.key=a?s.C0.ESC+"[19;"+(a+1)+"~":s.C0.ESC+"[19~";break;case 120:_.key=a?s.C0.ESC+"[20;"+(a+1)+"~":s.C0.ESC+"[20~";break;case 121:_.key=a?s.C0.ESC+"[21;"+(a+1)+"~":s.C0.ESC+"[21~";break;case 122:_.key=a?s.C0.ESC+"[23;"+(a+1)+"~":s.C0.ESC+"[23~";break;case 123:_.key=a?s.C0.ESC+"[24;"+(a+1)+"~":s.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(m&&!g||!l.altKey||l.metaKey)!m||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?_.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(_.key=s.C0.US),l.key==="@"&&(_.key=s.C0.NUL)):l.keyCode===65&&(_.type=1);else{let d=u[l.keyCode],f=d?.[l.shiftKey?1:0];if(f)_.key=s.C0.ESC+f;else if(l.keyCode>=65&&l.keyCode<=90){let c=l.ctrlKey?l.keyCode-64:l.keyCode+32,S=String.fromCharCode(c);l.shiftKey&&(S=S.toUpperCase()),_.key=s.C0.ESC+S}else if(l.keyCode===32)_.key=s.C0.ESC+(l.ctrlKey?s.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let c=l.code.slice(3,4);l.shiftKey||(c=c.toLowerCase()),_.key=s.C0.ESC+c,_.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?_.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?_.key=s.C0.NUL:l.keyCode>=51&&l.keyCode<=55?_.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?_.key=s.C0.DEL:l.keyCode===219?_.key=s.C0.ESC:l.keyCode===220?_.key=s.C0.FS:l.keyCode===221&&(_.key=s.C0.GS)}return _}},482:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},i.utf32ToString=function(n,s=0,u=n.length){let l="";for(let p=s;p<u;++p){let m=n[p];m>65535?(m-=65536,l+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):l+=String.fromCharCode(m)}return l},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,s){let u=n.length;if(!u)return 0;let l=0,p=0;if(this._interim){let m=n.charCodeAt(p++);56320<=m&&m<=57343?s[l++]=1024*(this._interim-55296)+m-56320+65536:(s[l++]=this._interim,s[l++]=m),this._interim=0}for(let m=p;m<u;++m){let g=n.charCodeAt(m);if(55296<=g&&g<=56319){if(++m>=u)return this._interim=g,l;let _=n.charCodeAt(m);56320<=_&&_<=57343?s[l++]=1024*(g-55296)+_-56320+65536:(s[l++]=g,s[l++]=_)}else g!==65279&&(s[l++]=g)}return l}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,s){let u=n.length;if(!u)return 0;let l,p,m,g,_=0,a=0,d=0;if(this.interim[0]){let S=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let y,w=0;for(;(y=63&this.interim[++w])&&w<4;)b<<=6,b|=y;let v=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,C=v-w;for(;d<C;){if(d>=u)return 0;if(y=n[d++],(192&y)!=128){d--,S=!0;break}this.interim[w++]=y,b<<=6,b|=63&y}S||(v===2?b<128?d--:s[_++]=b:v===3?b<2048||b>=55296&&b<=57343||b===65279||(s[_++]=b):b<65536||b>1114111||(s[_++]=b)),this.interim.fill(0)}let f=u-4,c=d;for(;c<u;){for(;!(!(c<f)||128&(l=n[c])||128&(p=n[c+1])||128&(m=n[c+2])||128&(g=n[c+3]));)s[_++]=l,s[_++]=p,s[_++]=m,s[_++]=g,c+=4;if(l=n[c++],l<128)s[_++]=l;else if((224&l)==192){if(c>=u)return this.interim[0]=l,_;if(p=n[c++],(192&p)!=128){c--;continue}if(a=(31&l)<<6|63&p,a<128){c--;continue}s[_++]=a}else if((240&l)==224){if(c>=u)return this.interim[0]=l,_;if(p=n[c++],(192&p)!=128){c--;continue}if(c>=u)return this.interim[0]=l,this.interim[1]=p,_;if(m=n[c++],(192&m)!=128){c--;continue}if(a=(15&l)<<12|(63&p)<<6|63&m,a<2048||a>=55296&&a<=57343||a===65279)continue;s[_++]=a}else if((248&l)==240){if(c>=u)return this.interim[0]=l,_;if(p=n[c++],(192&p)!=128){c--;continue}if(c>=u)return this.interim[0]=l,this.interim[1]=p,_;if(m=n[c++],(192&m)!=128){c--;continue}if(c>=u)return this.interim[0]=l,this.interim[1]=p,this.interim[2]=m,_;if(g=n[c++],(192&g)!=128){c--;continue}if(a=(7&l)<<18|(63&p)<<12|(63&m)<<6|63&g,a<65536||a>1114111)continue;s[_++]=a}}return _}}},225:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;let n=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],s=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],u;i.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let l=0;l<n.length;++l)u.fill(0,n[l][0],n[l][1]+1)}}wcwidth(l){return l<32?0:l<127?1:l<65536?u[l]:(function(p,m){let g,_=0,a=m.length-1;if(p<m[0][0]||p>m[a][1])return!1;for(;a>=_;)if(g=_+a>>1,p>m[g][1])_=g+1;else{if(!(p<m[g][0]))return!0;a=g-1}return!1})(l,s)?0:l>=131072&&l<=196605||l>=196608&&l<=262141?2:1}}},5981:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;let s=n(8460),u=n(844);class l extends u.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new s.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,g){if(g!==void 0&&this._syncCalls>g)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let _;for(this._isSyncWriting=!0;_=this._writeBuffer.shift();){this._action(_);let a=this._callbacks.shift();a&&a()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,g){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(g),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(g)}_innerWrite(m=0,g=!0){let _=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let a=this._writeBuffer[this._bufferOffset],d=this._action(a,g);if(d){let c=S=>Date.now()-_>=12?setTimeout((()=>this._innerWrite(0,S))):this._innerWrite(_,S);return void d.catch((S=>(queueMicrotask((()=>{throw S})),Promise.resolve(!1)))).then(c)}let f=this._callbacks[this._bufferOffset];if(f&&f(),this._bufferOffset++,this._pendingData-=a.length,Date.now()-_>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=l},5941:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;let n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,s=/^[\da-f]+$/;function u(l,p){let m=l.toString(16),g=m.length<2?"0"+m:m;switch(p){case 4:return m[0];case 8:return g;case 12:return(g+g).slice(0,3);default:return g+g}}i.parseColor=function(l){if(!l)return;let p=l.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);let m=n.exec(p);if(m){let g=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/g*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/g*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/g*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),s.exec(p)&&[3,6,9,12].includes(p.length))){let m=p.length/3,g=[0,0,0];for(let _=0;_<3;++_){let a=parseInt(p.slice(m*_,m*_+m),16);g[_]=m===1?a<<4:m===2?a:m===3?a>>4:a>>8}return g}},i.toRgbString=function(l,p=16){let[m,g,_]=l;return`rgb:${u(m,p)}/${u(g,p)}/${u(_,p)}`}},5770:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;let s=n(482),u=n(8742),l=n(5770),p=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(g,_){this._handlers[g]===void 0&&(this._handlers[g]=[]);let a=this._handlers[g];return a.push(_),{dispose:()=>{let d=a.indexOf(_);d!==-1&&a.splice(d,1)}}}clearHandler(g){this._handlers[g]&&delete this._handlers[g]}setHandlerFallback(g){this._handlerFb=g}reset(){if(this._active.length)for(let g=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;g>=0;--g)this._active[g].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(g,_){if(this.reset(),this._ident=g,this._active=this._handlers[g]||p,this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].hook(_);else this._handlerFb(this._ident,"HOOK",_)}put(g,_,a){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(g,_,a);else this._handlerFb(this._ident,"PUT",(0,s.utf32ToString)(g,_,a))}unhook(g,_=!0){if(this._active.length){let a=!1,d=this._active.length-1,f=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,a=_,f=this._stack.fallThrough,this._stack.paused=!1),!f&&a===!1){for(;d>=0&&(a=this._active[d].unhook(g),a!==!0);d--)if(a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,a;d--}for(;d>=0;d--)if(a=this._active[d].unhook(!1),a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,a}else this._handlerFb(this._ident,"UNHOOK",g);this._active=p,this._ident=0}};let m=new u.Params;m.addParam(0),i.DcsHandler=class{constructor(g){this._handler=g,this._data="",this._params=m,this._hitLimit=!1}hook(g){this._params=g.length>1||g.params[0]?g.clone():m,this._data="",this._hitLimit=!1}put(g,_,a){this._hitLimit||(this._data+=(0,s.utf32ToString)(g,_,a),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(g){let _=!1;if(this._hitLimit)_=!1;else if(g&&(_=this._handler(this._data,this._params),_ instanceof Promise))return _.then((a=>(this._params=m,this._data="",this._hitLimit=!1,a)));return this._params=m,this._data="",this._hitLimit=!1,_}}},2015:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;let s=n(844),u=n(8742),l=n(6242),p=n(6351);class m{constructor(d){this.table=new Uint8Array(d)}setDefault(d,f){this.table.fill(d<<4|f)}add(d,f,c,S){this.table[f<<8|d]=c<<4|S}addMany(d,f,c,S){for(let b=0;b<d.length;b++)this.table[f<<8|d[b]]=c<<4|S}}i.TransitionTable=m;let g=160;i.VT500_TRANSITION_TABLE=(function(){let a=new m(4095),d=Array.apply(null,Array(256)).map(((w,v)=>v)),f=(w,v)=>d.slice(w,v),c=f(32,127),S=f(0,24);S.push(25),S.push.apply(S,f(28,32));let b=f(0,14),y;for(y in a.setDefault(1,0),a.addMany(c,0,2,0),b)a.addMany([24,26,153,154],y,3,0),a.addMany(f(128,144),y,3,0),a.addMany(f(144,152),y,3,0),a.add(156,y,0,0),a.add(27,y,11,1),a.add(157,y,4,8),a.addMany([152,158,159],y,0,7),a.add(155,y,11,3),a.add(144,y,11,9);return a.addMany(S,0,3,0),a.addMany(S,1,3,1),a.add(127,1,0,1),a.addMany(S,8,0,8),a.addMany(S,3,3,3),a.add(127,3,0,3),a.addMany(S,4,3,4),a.add(127,4,0,4),a.addMany(S,6,3,6),a.addMany(S,5,3,5),a.add(127,5,0,5),a.addMany(S,2,3,2),a.add(127,2,0,2),a.add(93,1,4,8),a.addMany(c,8,5,8),a.add(127,8,5,8),a.addMany([156,27,24,26,7],8,6,0),a.addMany(f(28,32),8,0,8),a.addMany([88,94,95],1,0,7),a.addMany(c,7,0,7),a.addMany(S,7,0,7),a.add(156,7,0,0),a.add(127,7,0,7),a.add(91,1,11,3),a.addMany(f(64,127),3,7,0),a.addMany(f(48,60),3,8,4),a.addMany([60,61,62,63],3,9,4),a.addMany(f(48,60),4,8,4),a.addMany(f(64,127),4,7,0),a.addMany([60,61,62,63],4,0,6),a.addMany(f(32,64),6,0,6),a.add(127,6,0,6),a.addMany(f(64,127),6,0,0),a.addMany(f(32,48),3,9,5),a.addMany(f(32,48),5,9,5),a.addMany(f(48,64),5,0,6),a.addMany(f(64,127),5,7,0),a.addMany(f(32,48),4,9,5),a.addMany(f(32,48),1,9,2),a.addMany(f(32,48),2,9,2),a.addMany(f(48,127),2,10,0),a.addMany(f(48,80),1,10,0),a.addMany(f(81,88),1,10,0),a.addMany([89,90,92],1,10,0),a.addMany(f(96,127),1,10,0),a.add(80,1,11,9),a.addMany(S,9,0,9),a.add(127,9,0,9),a.addMany(f(28,32),9,0,9),a.addMany(f(32,48),9,9,12),a.addMany(f(48,60),9,8,10),a.addMany([60,61,62,63],9,9,10),a.addMany(S,11,0,11),a.addMany(f(32,128),11,0,11),a.addMany(f(28,32),11,0,11),a.addMany(S,10,0,10),a.add(127,10,0,10),a.addMany(f(28,32),10,0,10),a.addMany(f(48,60),10,8,10),a.addMany([60,61,62,63],10,0,11),a.addMany(f(32,48),10,9,12),a.addMany(S,12,0,12),a.add(127,12,0,12),a.addMany(f(28,32),12,0,12),a.addMany(f(32,48),12,9,12),a.addMany(f(48,64),12,0,11),a.addMany(f(64,127),12,12,13),a.addMany(f(64,127),10,12,13),a.addMany(f(64,127),9,12,13),a.addMany(S,13,13,13),a.addMany(c,13,13,13),a.add(127,13,0,13),a.addMany([27,156,24,26],13,14,0),a.add(g,0,2,0),a.add(g,8,5,8),a.add(g,6,0,6),a.add(g,11,0,11),a.add(g,13,13,13),a})();class _ extends s.Disposable{constructor(d=i.VT500_TRANSITION_TABLE){super(),this._transitions=d,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(f,c,S)=>{},this._executeHandlerFb=f=>{},this._csiHandlerFb=(f,c)=>{},this._escHandlerFb=f=>{},this._errorHandlerFb=f=>f,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,s.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(d,f=[64,126]){let c=0;if(d.prefix){if(d.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=d.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(d.intermediates){if(d.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let b=0;b<d.intermediates.length;++b){let y=d.intermediates.charCodeAt(b);if(32>y||y>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=y}}if(d.final.length!==1)throw new Error("final must be a single byte");let S=d.final.charCodeAt(0);if(f[0]>S||S>f[1])throw new Error(`final must be in range ${f[0]} .. ${f[1]}`);return c<<=8,c|=S,c}identToString(d){let f=[];for(;d;)f.push(String.fromCharCode(255&d)),d>>=8;return f.reverse().join("")}setPrintHandler(d){this._printHandler=d}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(d,f){let c=this._identifier(d,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);let S=this._escHandlers[c];return S.push(f),{dispose:()=>{let b=S.indexOf(f);b!==-1&&S.splice(b,1)}}}clearEscHandler(d){this._escHandlers[this._identifier(d,[48,126])]&&delete this._escHandlers[this._identifier(d,[48,126])]}setEscHandlerFallback(d){this._escHandlerFb=d}setExecuteHandler(d,f){this._executeHandlers[d.charCodeAt(0)]=f}clearExecuteHandler(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]}setExecuteHandlerFallback(d){this._executeHandlerFb=d}registerCsiHandler(d,f){let c=this._identifier(d);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);let S=this._csiHandlers[c];return S.push(f),{dispose:()=>{let b=S.indexOf(f);b!==-1&&S.splice(b,1)}}}clearCsiHandler(d){this._csiHandlers[this._identifier(d)]&&delete this._csiHandlers[this._identifier(d)]}setCsiHandlerFallback(d){this._csiHandlerFb=d}registerDcsHandler(d,f){return this._dcsParser.registerHandler(this._identifier(d),f)}clearDcsHandler(d){this._dcsParser.clearHandler(this._identifier(d))}setDcsHandlerFallback(d){this._dcsParser.setHandlerFallback(d)}registerOscHandler(d,f){return this._oscParser.registerHandler(d,f)}clearOscHandler(d){this._oscParser.clearHandler(d)}setOscHandlerFallback(d){this._oscParser.setHandlerFallback(d)}setErrorHandler(d){this._errorHandler=d}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(d,f,c,S,b){this._parseStack.state=d,this._parseStack.handlers=f,this._parseStack.handlerPos=c,this._parseStack.transition=S,this._parseStack.chunkPos=b}parse(d,f,c){let S,b=0,y=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let v=this._parseStack.handlers,C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&C>-1){for(;C>=0&&(S=v[C](this._params),S!==!0);C--)if(S instanceof Promise)return this._parseStack.handlerPos=C,S}this._parseStack.handlers=[];break;case 4:if(c===!1&&C>-1){for(;C>=0&&(S=v[C](),S!==!0);C--)if(S instanceof Promise)return this._parseStack.handlerPos=C,S}this._parseStack.handlers=[];break;case 6:if(b=d[this._parseStack.chunkPos],S=this._dcsParser.unhook(b!==24&&b!==26,c),S)return S;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(b=d[this._parseStack.chunkPos],S=this._oscParser.end(b!==24&&b!==26,c),S)return S;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let v=w;v<f;++v){switch(b=d[v],y=this._transitions.table[this.currentState<<8|(b<160?b:g)],y>>4){case 2:for(let R=v+1;;++R){if(R>=f||(b=d[R])<32||b>126&&b<g){this._printHandler(d,v,R),v=R-1;break}if(++R>=f||(b=d[R])<32||b>126&&b<g){this._printHandler(d,v,R),v=R-1;break}if(++R>=f||(b=d[R])<32||b>126&&b<g){this._printHandler(d,v,R),v=R-1;break}if(++R>=f||(b=d[R])<32||b>126&&b<g){this._printHandler(d,v,R),v=R-1;break}}break;case 3:this._executeHandlers[b]?this._executeHandlers[b]():this._executeHandlerFb(b),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:v,code:b,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let C=this._csiHandlers[this._collect<<8|b],L=C?C.length-1:-1;for(;L>=0&&(S=C[L](this._params),S!==!0);L--)if(S instanceof Promise)return this._preserveStack(3,C,L,y,v),S;L<0&&this._csiHandlerFb(this._collect<<8|b,this._params),this.precedingCodepoint=0;break;case 8:do switch(b){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(b-48)}while(++v<f&&(b=d[v])>47&&b<60);v--;break;case 9:this._collect<<=8,this._collect|=b;break;case 10:let I=this._escHandlers[this._collect<<8|b],x=I?I.length-1:-1;for(;x>=0&&(S=I[x](),S!==!0);x--)if(S instanceof Promise)return this._preserveStack(4,I,x,y,v),S;x<0&&this._escHandlerFb(this._collect<<8|b),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|b,this._params);break;case 13:for(let R=v+1;;++R)if(R>=f||(b=d[R])===24||b===26||b===27||b>127&&b<g){this._dcsParser.put(d,v,R),v=R-1;break}break;case 14:if(S=this._dcsParser.unhook(b!==24&&b!==26),S)return this._preserveStack(6,[],0,y,v),S;b===27&&(y|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let R=v+1;;R++)if(R>=f||(b=d[R])<32||b>127&&b<g){this._oscParser.put(d,v,R),v=R-1;break}break;case 6:if(S=this._oscParser.end(b!==24&&b!==26),S)return this._preserveStack(5,[],0,y,v),S;b===27&&(y|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&y}}}i.EscapeSequenceParser=_},6242:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;let s=n(5770),u=n(482),l=[];i.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,m){this._handlers[p]===void 0&&(this._handlers[p]=[]);let g=this._handlers[p];return g.push(m),{dispose:()=>{let _=g.indexOf(m);_!==-1&&g.splice(_,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,m,g){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(p,m,g);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(p,m,g))}start(){this.reset(),this._state=1}put(p,m,g){if(this._state!==3){if(this._state===1)for(;m<g;){let _=p[m++];if(_===59){this._state=2,this._start();break}if(_<48||57<_)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+_-48}this._state===2&&g-m>0&&this._put(p,m,g)}}end(p,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let g=!1,_=this._active.length-1,a=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,g=m,a=this._stack.fallThrough,this._stack.paused=!1),!a&&g===!1){for(;_>=0&&(g=this._active[_].end(p),g!==!0);_--)if(g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,g;_--}for(;_>=0;_--)if(g=this._active[_].end(!1),g instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,g}else this._handlerFb(this._id,"END",p);this._active=l,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,m,g){this._hitLimit||(this._data+=(0,u.utf32ToString)(p,m,g),this._data.length>s.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let m=!1;if(this._hitLimit)m=!1;else if(p&&(m=this._handler(this._data),m instanceof Promise))return m.then((g=>(this._data="",this._hitLimit=!1,g)));return this._data="",this._hitLimit=!1,m}}},8742:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;let n=2147483647;class s{static fromArray(l){let p=new s;if(!l.length)return p;for(let m=Array.isArray(l[0])?1:0;m<l.length;++m){let g=l[m];if(Array.isArray(g))for(let _=0;_<g.length;++_)p.addSubParam(g[_]);else p.addParam(g)}return p}constructor(l=32,p=32){if(this.maxLength=l,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let l=new s(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){let l=[];for(let p=0;p<this.length;++p){l.push(this.params[p]);let m=this._subParamsIdx[p]>>8,g=255&this._subParamsIdx[p];g-m>0&&l.push(Array.prototype.slice.call(this._subParams,m,g))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>n?n:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>n?n:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){let p=this._subParamsIdx[l]>>8,m=255&this._subParamsIdx[l];return m-p>0?this._subParams.subarray(p,m):null}getSubParamsAll(){let l={};for(let p=0;p<this.length;++p){let m=this._subParamsIdx[p]>>8,g=255&this._subParamsIdx[p];g-m>0&&(l[p]=this._subParams.slice(m,g))}return l}addDigit(l){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let m=this._digitIsSub?this._subParams:this.params,g=m[p-1];m[p-1]=~g?Math.min(10*g+l,n):l}}i.Params=s},5741:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,s){let u={instance:s,dispose:s.dispose,isDisposed:!1};this._addons.push(u),s.dispose=()=>this._wrappedAddonDispose(u),s.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let s=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===n){s=u;break}if(s===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(s,1)}}},8771:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;let s=n(3785),u=n(511);i.BufferApiView=class{constructor(l,p){this._buffer=l,this.type=p}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){let p=this._buffer.lines.get(l);if(p)return new s.BufferLineApiView(p)}getNullCell(){return new u.CellData}}},3785:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;let s=n(511);i.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,l){if(!(u<0||u>=this._line.length))return l?(this._line.loadCell(u,l),l):this._line.loadCell(u,new s.CellData)}translateToString(u,l,p){return this._line.translateToString(u,l,p)}}},8285:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;let s=n(8771),u=n(8460),l=n(844);class p extends l.Disposable{constructor(g){super(),this._core=g,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new s.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new s.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=p},7975:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,s){return this._core.registerCsiHandler(n,(u=>s(u.toArray())))}addCsiHandler(n,s){return this.registerCsiHandler(n,s)}registerDcsHandler(n,s){return this._core.registerDcsHandler(n,((u,l)=>s(u,l.toArray())))}addDcsHandler(n,s){return this.registerDcsHandler(n,s)}registerEscHandler(n,s){return this._core.registerEscHandler(n,s)}addEscHandler(n,s){return this.registerEscHandler(n,s)}registerOscHandler(n,s){return this._core.registerOscHandler(n,s)}addOscHandler(n,s){return this.registerOscHandler(n,s)}}},7090:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(h,i,n){var s=this&&this.__decorate||function(a,d,f,c){var S,b=arguments.length,y=b<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,f):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(a,d,f,c);else for(var w=a.length-1;w>=0;w--)(S=a[w])&&(y=(b<3?S(y):b>3?S(d,f,y):S(d,f))||y);return b>3&&y&&Object.defineProperty(d,f,y),y},u=this&&this.__param||function(a,d){return function(f,c){d(f,c,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;let l=n(8460),p=n(844),m=n(5295),g=n(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let _=i.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(a){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(a.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(a.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(a,this))}resize(a,d){this.cols=a,this.rows=d,this.buffers.resize(a,d),this._onResize.fire({cols:a,rows:d})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(a,d=!1){let f=this.buffer,c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===a.fg&&c.getBg(0)===a.bg||(c=f.getBlankLine(a,d),this._cachedBlankLine=c),c.isWrapped=d;let S=f.ybase+f.scrollTop,b=f.ybase+f.scrollBottom;if(f.scrollTop===0){let y=f.lines.isFull;b===f.lines.length-1?y?f.lines.recycle().copyFrom(c):f.lines.push(c.clone()):f.lines.splice(b+1,0,c.clone()),y?this.isUserScrolling&&(f.ydisp=Math.max(f.ydisp-1,0)):(f.ybase++,this.isUserScrolling||f.ydisp++)}else{let y=b-S+1;f.lines.shiftElements(S+1,y-1,-1),f.lines.set(b,c.clone())}this.isUserScrolling||(f.ydisp=f.ybase),this._onScroll.fire(f.ydisp)}scrollLines(a,d,f){let c=this.buffer;if(a<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else a+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);let S=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+a,c.ybase),0),S!==c.ydisp&&(d||this._onScroll.fire(c.ydisp))}};i.BufferService=_=s([u(0,g.IOptionsService)],_)},7994:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,s){this._charsets[n]=s,this.glevel===n&&(this.charset=s)}}},1753:function(h,i,n){var s=this&&this.__decorate||function(c,S,b,y){var w,v=arguments.length,C=v<3?S:y===null?y=Object.getOwnPropertyDescriptor(S,b):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(c,S,b,y);else for(var L=c.length-1;L>=0;L--)(w=c[L])&&(C=(v<3?w(C):v>3?w(S,b,C):w(S,b))||C);return v>3&&C&&Object.defineProperty(S,b,C),C},u=this&&this.__param||function(c,S){return function(b,y){S(b,y,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;let l=n(2585),p=n(8460),m=n(844),g={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function _(c,S){let b=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(b|=64,b|=c.action):(b|=3&c.button,4&c.button&&(b|=64),8&c.button&&(b|=128),c.action===32?b|=32:c.action!==0||S||(b|=3)),b}let a=String.fromCharCode,d={DEFAULT:c=>{let S=[_(c,!1)+32,c.col+32,c.row+32];return S[0]>255||S[1]>255||S[2]>255?"":`\x1B[M${a(S[0])}${a(S[1])}${a(S[2])}`},SGR:c=>{let S=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${_(c,!0)};${c.col};${c.row}${S}`},SGR_PIXELS:c=>{let S=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${_(c,!0)};${c.x};${c.y}${S}`}},f=i.CoreMouseService=class extends m.Disposable{constructor(c,S){super(),this._bufferService=c,this._coreService=S,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let b of Object.keys(g))this.addProtocol(b,g[b]);for(let b of Object.keys(d))this.addEncoding(b,d[b]);this.reset()}addProtocol(c,S){this._protocols[c]=S}addEncoding(c,S){this._encodings[c]=S}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;let S=this._encodings[this._activeEncoding](c);return S&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(S):this._coreService.triggerDataEvent(S,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,S,b){if(b){if(c.x!==S.x||c.y!==S.y)return!1}else if(c.col!==S.col||c.row!==S.row)return!1;return c.button===S.button&&c.action===S.action&&c.ctrl===S.ctrl&&c.alt===S.alt&&c.shift===S.shift}};i.CoreMouseService=f=s([u(0,l.IBufferService),u(1,l.ICoreService)],f)},6975:function(h,i,n){var s=this&&this.__decorate||function(f,c,S,b){var y,w=arguments.length,v=w<3?c:b===null?b=Object.getOwnPropertyDescriptor(c,S):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(f,c,S,b);else for(var C=f.length-1;C>=0;C--)(y=f[C])&&(v=(w<3?y(v):w>3?y(c,S,v):y(c,S))||v);return w>3&&v&&Object.defineProperty(c,S,v),v},u=this&&this.__param||function(f,c){return function(S,b){c(S,b,f)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;let l=n(1439),p=n(8460),m=n(844),g=n(2585),_=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),d=i.CoreService=class extends m.Disposable{constructor(f,c,S){super(),this._bufferService=f,this._logService=c,this._optionsService=S,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(_),this.decPrivateModes=(0,l.clone)(a)}reset(){this.modes=(0,l.clone)(_),this.decPrivateModes=(0,l.clone)(a)}triggerDataEvent(f,c=!1){if(this._optionsService.rawOptions.disableStdin)return;let S=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&S.ybase!==S.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${f}"`,(()=>f.split("").map((b=>b.charCodeAt(0))))),this._onData.fire(f)}triggerBinaryEvent(f){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${f}"`,(()=>f.split("").map((c=>c.charCodeAt(0))))),this._onBinary.fire(f))}};i.CoreService=d=s([u(0,g.IBufferService),u(1,g.ILogService),u(2,g.IOptionsService)],d)},9074:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;let s=n(8055),u=n(8460),l=n(844),p=n(6106),m=0,g=0;class _ extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList((f=>f?.marker.line)),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)((()=>this.reset())))}registerDecoration(f){if(f.marker.isDisposed)return;let c=new a(f);if(c){let S=c.marker.onDispose((()=>c.dispose()));c.onDispose((()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),S.dispose())})),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(let f of this._decorations.values())f.dispose();this._decorations.clear()}*getDecorationsAtCell(f,c,S){var b,y,w;let v=0,C=0;for(let L of this._decorations.getKeyIterator(c))v=(b=L.options.x)!==null&&b!==void 0?b:0,C=v+((y=L.options.width)!==null&&y!==void 0?y:1),f>=v&&f<C&&(!S||((w=L.options.layer)!==null&&w!==void 0?w:"bottom")===S)&&(yield L)}forEachDecorationAtCell(f,c,S,b){this._decorations.forEachByKey(c,(y=>{var w,v,C;m=(w=y.options.x)!==null&&w!==void 0?w:0,g=m+((v=y.options.width)!==null&&v!==void 0?v:1),f>=m&&f<g&&(!S||((C=y.options.layer)!==null&&C!==void 0?C:"bottom")===S)&&b(y)}))}}i.DecorationService=_;class a extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=s.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=s.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(f){super(),this.options=f,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=f.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;let s=n(2585),u=n(8343);class l{constructor(...m){this._entries=new Map;for(let[g,_]of m)this.set(g,_)}set(m,g){let _=this._entries.get(m);return this._entries.set(m,g),_}forEach(m){for(let[g,_]of this._entries.entries())m(g,_)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}i.ServiceCollection=l,i.InstantiationService=class{constructor(){this._services=new l,this._services.set(s.IInstantiationService,this)}setService(p,m){this._services.set(p,m)}getService(p){return this._services.get(p)}createInstance(p,...m){let g=(0,u.getServiceDependencies)(p).sort(((d,f)=>d.index-f.index)),_=[];for(let d of g){let f=this._services.get(d.id);if(!f)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${d.id}.`);_.push(f)}let a=g.length>0?g[0].index:m.length;if(m.length!==a)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${a+1} conflicts with ${m.length} static arguments`);return new p(...m,..._)}}},7866:function(h,i,n){var s=this&&this.__decorate||function(a,d,f,c){var S,b=arguments.length,y=b<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,f):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(a,d,f,c);else for(var w=a.length-1;w>=0;w--)(S=a[w])&&(y=(b<3?S(y):b>3?S(d,f,y):S(d,f))||y);return b>3&&y&&Object.defineProperty(d,f,y),y},u=this&&this.__param||function(a,d){return function(f,c){d(f,c,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;let l=n(844),p=n(2585),m={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF},g,_=i.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(a){super(),this._optionsService=a,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),g=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(a){for(let d=0;d<a.length;d++)typeof a[d]=="function"&&(a[d]=a[d]())}_log(a,d,f){this._evalLazyOptionalParams(f),a.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+d,...f)}trace(a,...d){var f,c;this._logLevel<=p.LogLevelEnum.TRACE&&this._log((c=(f=this._optionsService.options.logger)===null||f===void 0?void 0:f.trace.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,a,d)}debug(a,...d){var f,c;this._logLevel<=p.LogLevelEnum.DEBUG&&this._log((c=(f=this._optionsService.options.logger)===null||f===void 0?void 0:f.debug.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,a,d)}info(a,...d){var f,c;this._logLevel<=p.LogLevelEnum.INFO&&this._log((c=(f=this._optionsService.options.logger)===null||f===void 0?void 0:f.info.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.info,a,d)}warn(a,...d){var f,c;this._logLevel<=p.LogLevelEnum.WARN&&this._log((c=(f=this._optionsService.options.logger)===null||f===void 0?void 0:f.warn.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.warn,a,d)}error(a,...d){var f,c;this._logLevel<=p.LogLevelEnum.ERROR&&this._log((c=(f=this._optionsService.options.logger)===null||f===void 0?void 0:f.error.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.error,a,d)}};i.LogService=_=s([u(0,p.IOptionsService)],_),i.setTraceLogger=function(a){g=a},i.traceCall=function(a,d,f){if(typeof f.value!="function")throw new Error("not supported");let c=f.value;f.value=function(...S){if(g.logLevel!==p.LogLevelEnum.TRACE)return c.apply(this,S);g.trace(`GlyphRenderer#${c.name}(${S.map((y=>JSON.stringify(y))).join(", ")})`);let b=c.apply(this,S);return g.trace(`GlyphRenderer#${c.name} return`,b),b}}},7302:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;let s=n(8460),u=n(844),l=n(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let p=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends u.Disposable{constructor(_){super(),this._onOptionChange=this.register(new s.EventEmitter),this.onOptionChange=this._onOptionChange.event;let a=Object.assign({},i.DEFAULT_OPTIONS);for(let d in _)if(d in a)try{let f=_[d];a[d]=this._sanitizeAndValidateOption(d,f)}catch(f){console.error(f)}this.rawOptions=a,this.options=Object.assign({},a),this._setupOptions()}onSpecificOptionChange(_,a){return this.onOptionChange((d=>{d===_&&a(this.rawOptions[_])}))}onMultipleOptionChange(_,a){return this.onOptionChange((d=>{_.indexOf(d)!==-1&&a()}))}_setupOptions(){let _=d=>{if(!(d in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);return this.rawOptions[d]},a=(d,f)=>{if(!(d in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);f=this._sanitizeAndValidateOption(d,f),this.rawOptions[d]!==f&&(this.rawOptions[d]=f,this._onOptionChange.fire(d))};for(let d in this.rawOptions){let f={get:_.bind(this,d),set:a.bind(this,d)};Object.defineProperty(this.options,d,f)}}_sanitizeAndValidateOption(_,a){switch(_){case"cursorStyle":if(a||(a=i.DEFAULT_OPTIONS[_]),!(function(d){return d==="block"||d==="underline"||d==="bar"})(a))throw new Error(`"${a}" is not a valid value for ${_}`);break;case"wordSeparator":a||(a=i.DEFAULT_OPTIONS[_]);break;case"fontWeight":case"fontWeightBold":if(typeof a=="number"&&1<=a&&a<=1e3)break;a=p.includes(a)?a:i.DEFAULT_OPTIONS[_];break;case"cursorWidth":a=Math.floor(a);case"lineHeight":case"tabStopWidth":if(a<1)throw new Error(`${_} cannot be less than 1, value: ${a}`);break;case"minimumContrastRatio":a=Math.max(1,Math.min(21,Math.round(10*a)/10));break;case"scrollback":if((a=Math.min(a,4294967295))<0)throw new Error(`${_} cannot be less than 0, value: ${a}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(a<=0)throw new Error(`${_} cannot be less than or equal to 0, value: ${a}`);break;case"rows":case"cols":if(!a&&a!==0)throw new Error(`${_} must be numeric, value: ${a}`);break;case"windowsPty":a=a??{}}return a}}i.OptionsService=m},2660:function(h,i,n){var s=this&&this.__decorate||function(m,g,_,a){var d,f=arguments.length,c=f<3?g:a===null?a=Object.getOwnPropertyDescriptor(g,_):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(m,g,_,a);else for(var S=m.length-1;S>=0;S--)(d=m[S])&&(c=(f<3?d(c):f>3?d(g,_,c):d(g,_))||c);return f>3&&c&&Object.defineProperty(g,_,c),c},u=this&&this.__param||function(m,g){return function(_,a){g(_,a,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;let l=n(2585),p=i.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){let g=this._bufferService.buffer;if(m.id===void 0){let S=g.addMarker(g.ybase+g.y),b={data:m,id:this._nextId++,lines:[S]};return S.onDispose((()=>this._removeMarkerFromLink(b,S))),this._dataByLinkId.set(b.id,b),b.id}let _=m,a=this._getEntryIdKey(_),d=this._entriesWithId.get(a);if(d)return this.addLineToLink(d.id,g.ybase+g.y),d.id;let f=g.addMarker(g.ybase+g.y),c={id:this._nextId++,key:this._getEntryIdKey(_),data:_,lines:[f]};return f.onDispose((()=>this._removeMarkerFromLink(c,f))),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(m,g){let _=this._dataByLinkId.get(m);if(_&&_.lines.every((a=>a.line!==g))){let a=this._bufferService.buffer.addMarker(g);_.lines.push(a),a.onDispose((()=>this._removeMarkerFromLink(_,a)))}}getLinkData(m){var g;return(g=this._dataByLinkId.get(m))===null||g===void 0?void 0:g.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,g){let _=m.lines.indexOf(g);_!==-1&&(m.lines.splice(_,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};i.OscLinkService=p=s([u(0,l.IBufferService)],p)},8343:(h,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;let n="di$target",s="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(u){return u[s]||[]},i.createDecorator=function(u){if(i.serviceRegistry.has(u))return i.serviceRegistry.get(u);let l=function(p,m,g){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(_,a,d){a[n]===a?a[s].push({id:_,index:d}):(a[s]=[{id:_,index:d}],a[n]=a)})(l,p,g)};return l.toString=()=>u,i.serviceRegistry.set(u,l),l}},2585:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;let s=n(8343);var u;i.IBufferService=(0,s.createDecorator)("BufferService"),i.ICoreMouseService=(0,s.createDecorator)("CoreMouseService"),i.ICoreService=(0,s.createDecorator)("CoreService"),i.ICharsetService=(0,s.createDecorator)("CharsetService"),i.IInstantiationService=(0,s.createDecorator)("InstantiationService"),(function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"})(u||(i.LogLevelEnum=u={})),i.ILogService=(0,s.createDecorator)("LogService"),i.IOptionsService=(0,s.createDecorator)("OptionsService"),i.IOscLinkService=(0,s.createDecorator)("OscLinkService"),i.IUnicodeService=(0,s.createDecorator)("UnicodeService"),i.IDecorationService=(0,s.createDecorator)("DecorationService")},1480:(h,i,n)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;let s=n(8460),u=n(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new s.EventEmitter,this.onChange=this._onChange.event;let l=new u.UnicodeV6;this.register(l),this._active=l.version,this._activeProvider=l}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(l){if(!this._providers[l])throw new Error(`unknown Unicode version "${l}"`);this._active=l,this._activeProvider=this._providers[l],this._onChange.fire(l)}register(l){this._providers[l.version]=l}wcwidth(l){return this._activeProvider.wcwidth(l)}getStringCellWidth(l){let p=0,m=l.length;for(let g=0;g<m;++g){let _=l.charCodeAt(g);if(55296<=_&&_<=56319){if(++g>=m)return p+this.wcwidth(_);let a=l.charCodeAt(g);56320<=a&&a<=57343?_=1024*(_-55296)+a-56320+65536:p+=this.wcwidth(a)}p+=this.wcwidth(_)}return p}}}},t={};function r(h){var i=t[h];if(i!==void 0)return i.exports;var n=t[h]={exports:{}};return e[h].call(n.exports,n,n.exports,r),n.exports}var o={};return(()=>{var h=o;Object.defineProperty(h,"__esModule",{value:!0}),h.Terminal=void 0;let i=r(9042),n=r(3236),s=r(844),u=r(5741),l=r(8285),p=r(7975),m=r(7090),g=["cols","rows"];class _ extends s.Disposable{constructor(d){super(),this._core=this.register(new n.Terminal(d)),this._addonManager=this.register(new u.AddonManager),this._publicOptions=Object.assign({},this._core.options);let f=S=>this._core.options[S],c=(S,b)=>{this._checkReadonlyOptions(S),this._core.options[S]=b};for(let S in this._core.options){let b={get:f.bind(this,S),set:c.bind(this,S)};Object.defineProperty(this._publicOptions,S,b)}}_checkReadonlyOptions(d){if(g.includes(d))throw new Error(`Option "${d}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let d=this._core.coreService.decPrivateModes,f="none";switch(this._core.coreMouseService.activeProtocol){case"X10":f="x10";break;case"VT200":f="vt200";break;case"DRAG":f="drag";break;case"ANY":f="any"}return{applicationCursorKeysMode:d.applicationCursorKeys,applicationKeypadMode:d.applicationKeypad,bracketedPasteMode:d.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:f,originMode:d.origin,reverseWraparoundMode:d.reverseWraparound,sendFocusMode:d.sendFocus,wraparoundMode:d.wraparound}}get options(){return this._publicOptions}set options(d){for(let f in d)this._publicOptions[f]=d[f]}blur(){this._core.blur()}focus(){this._core.focus()}resize(d,f){this._verifyIntegers(d,f),this._core.resize(d,f)}open(d){this._core.open(d)}attachCustomKeyEventHandler(d){this._core.attachCustomKeyEventHandler(d)}registerLinkProvider(d){return this._core.registerLinkProvider(d)}registerCharacterJoiner(d){return this._checkProposedApi(),this._core.registerCharacterJoiner(d)}deregisterCharacterJoiner(d){this._checkProposedApi(),this._core.deregisterCharacterJoiner(d)}registerMarker(d=0){return this._verifyIntegers(d),this._core.registerMarker(d)}registerDecoration(d){var f,c,S;return this._checkProposedApi(),this._verifyPositiveIntegers((f=d.x)!==null&&f!==void 0?f:0,(c=d.width)!==null&&c!==void 0?c:0,(S=d.height)!==null&&S!==void 0?S:0),this._core.registerDecoration(d)}hasSelection(){return this._core.hasSelection()}select(d,f,c){this._verifyIntegers(d,f,c),this._core.select(d,f,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(d,f){this._verifyIntegers(d,f),this._core.selectLines(d,f)}dispose(){super.dispose()}scrollLines(d){this._verifyIntegers(d),this._core.scrollLines(d)}scrollPages(d){this._verifyIntegers(d),this._core.scrollPages(d)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(d){this._verifyIntegers(d),this._core.scrollToLine(d)}clear(){this._core.clear()}write(d,f){this._core.write(d,f)}writeln(d,f){this._core.write(d),this._core.write(`\r
`,f)}paste(d){this._core.paste(d)}refresh(d,f){this._verifyIntegers(d,f),this._core.refresh(d,f)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(d){this._addonManager.loadAddon(this,d)}static get strings(){return i}_verifyIntegers(...d){for(let f of d)if(f===1/0||isNaN(f)||f%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...d){for(let f of d)if(f&&(f===1/0||isNaN(f)||f%1!=0||f<0))throw new Error("This API only accepts positive integers")}}h.Terminal=_})(),o})()))});var Ye=_t(ui());function ps(e,t){let r=t||{};return(e[e.length-1]===""?[...e,""]:e).join((r.padRight?" ":"")+","+(r.padLeft===!1?"":" ")).trim()}var Pl=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Bl=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Fl={};function Sr(e,t){return((t||Fl).jsx?Bl:Pl).test(e)}var Hl=/[ \t\n\f\r]/g;function fi(e){return typeof e=="object"?e.type==="text"?ms(e.value):!1:ms(e)}function ms(e){return e.replace(Hl,"")===""}var ft=class{constructor(t,r,o){this.normal=r,this.property=t,o&&(this.space=o)}};ft.prototype.normal={};ft.prototype.property={};ft.prototype.space=void 0;function di(e,t){let r={},o={};for(let h of e)Object.assign(r,h.property),Object.assign(o,h.normal);return new ft(r,o,t)}function Jt(e){return e.toLowerCase()}var we=class{constructor(t,r){this.attribute=r,this.property=t}};we.prototype.attribute="";we.prototype.booleanish=!1;we.prototype.boolean=!1;we.prototype.commaOrSpaceSeparated=!1;we.prototype.commaSeparated=!1;we.prototype.defined=!1;we.prototype.mustUseProperty=!1;we.prototype.number=!1;we.prototype.overloadedBoolean=!1;we.prototype.property="";we.prototype.spaceSeparated=!1;we.prototype.space=void 0;var Zt={};fs(Zt,{boolean:()=>ae,booleanish:()=>_e,commaOrSpaceSeparated:()=>ze,commaSeparated:()=>gt,number:()=>q,overloadedBoolean:()=>br,spaceSeparated:()=>de});var Nl=0,ae=kt(),_e=kt(),br=kt(),q=kt(),de=kt(),gt=kt(),ze=kt();function kt(){return 2**++Nl}var pi=Object.keys(Zt),Et=class extends we{constructor(t,r,o,h){let i=-1;if(super(t,r),_s(this,"space",h),typeof o=="number")for(;++i<pi.length;){let n=pi[i];_s(this,pi[i],(o&Zt[n])===Zt[n])}}};Et.prototype.defined=!0;function _s(e,t,r){r&&(e[t]=r)}function Ke(e){let t={},r={};for(let[o,h]of Object.entries(e.properties)){let i=new Et(o,e.transform(e.attributes||{},o),h,e.space);e.mustUseProperty&&e.mustUseProperty.includes(o)&&(i.mustUseProperty=!0),t[o]=i,r[Jt(o)]=o,r[Jt(i.attribute)]=o}return new ft(t,r,e.space)}var mi=Ke({properties:{ariaActiveDescendant:null,ariaAtomic:_e,ariaAutoComplete:null,ariaBusy:_e,ariaChecked:_e,ariaColCount:q,ariaColIndex:q,ariaColSpan:q,ariaControls:de,ariaCurrent:null,ariaDescribedBy:de,ariaDetails:null,ariaDisabled:_e,ariaDropEffect:de,ariaErrorMessage:null,ariaExpanded:_e,ariaFlowTo:de,ariaGrabbed:_e,ariaHasPopup:null,ariaHidden:_e,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:de,ariaLevel:q,ariaLive:null,ariaModal:_e,ariaMultiLine:_e,ariaMultiSelectable:_e,ariaOrientation:null,ariaOwns:de,ariaPlaceholder:null,ariaPosInSet:q,ariaPressed:_e,ariaReadOnly:_e,ariaRelevant:null,ariaRequired:_e,ariaRoleDescription:de,ariaRowCount:q,ariaRowIndex:q,ariaRowSpan:q,ariaSelected:_e,ariaSetSize:q,ariaSort:null,ariaValueMax:q,ariaValueMin:q,ariaValueNow:q,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function yr(e,t){return t in e?e[t]:t}function Cr(e,t){return yr(e,t.toLowerCase())}var gs=Ke({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:gt,acceptCharset:de,accessKey:de,action:null,allow:null,allowFullScreen:ae,allowPaymentRequest:ae,allowUserMedia:ae,alt:null,as:null,async:ae,autoCapitalize:null,autoComplete:de,autoFocus:ae,autoPlay:ae,blocking:de,capture:null,charSet:null,checked:ae,cite:null,className:de,cols:q,colSpan:null,content:null,contentEditable:_e,controls:ae,controlsList:de,coords:q|gt,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ae,defer:ae,dir:null,dirName:null,disabled:ae,download:br,draggable:_e,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ae,formTarget:null,headers:de,height:q,hidden:br,high:q,href:null,hrefLang:null,htmlFor:de,httpEquiv:de,id:null,imageSizes:null,imageSrcSet:null,inert:ae,inputMode:null,integrity:null,is:null,isMap:ae,itemId:null,itemProp:de,itemRef:de,itemScope:ae,itemType:de,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ae,low:q,manifest:null,max:null,maxLength:q,media:null,method:null,min:null,minLength:q,multiple:ae,muted:ae,name:null,nonce:null,noModule:ae,noValidate:ae,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ae,optimum:q,pattern:null,ping:de,placeholder:null,playsInline:ae,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ae,referrerPolicy:null,rel:de,required:ae,reversed:ae,rows:q,rowSpan:q,sandbox:de,scope:null,scoped:ae,seamless:ae,selected:ae,shadowRootClonable:ae,shadowRootDelegatesFocus:ae,shadowRootMode:null,shape:null,size:q,sizes:null,slot:null,span:q,spellCheck:_e,src:null,srcDoc:null,srcLang:null,srcSet:null,start:q,step:null,style:null,tabIndex:q,target:null,title:null,translate:null,type:null,typeMustMatch:ae,useMap:null,value:_e,width:q,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:de,axis:null,background:null,bgColor:null,border:q,borderColor:null,bottomMargin:q,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ae,declare:ae,event:null,face:null,frame:null,frameBorder:null,hSpace:q,leftMargin:q,link:null,longDesc:null,lowSrc:null,marginHeight:q,marginWidth:q,noResize:ae,noHref:ae,noShade:ae,noWrap:ae,object:null,profile:null,prompt:null,rev:null,rightMargin:q,rules:null,scheme:null,scrolling:_e,standby:null,summary:null,text:null,topMargin:q,valueType:null,version:null,vAlign:null,vLink:null,vSpace:q,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ae,disableRemotePlayback:ae,prefix:null,property:null,results:q,security:null,unselectable:null},space:"html",transform:Cr});var vs=Ke({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ze,accentHeight:q,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:q,amplitude:q,arabicForm:null,ascent:q,attributeName:null,attributeType:null,azimuth:q,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:q,by:null,calcMode:null,capHeight:q,className:de,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:q,diffuseConstant:q,direction:null,display:null,dur:null,divisor:q,dominantBaseline:null,download:ae,dx:null,dy:null,edgeMode:null,editable:null,elevation:q,enableBackground:null,end:null,event:null,exponent:q,externalResourcesRequired:null,fill:null,fillOpacity:q,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:gt,g2:gt,glyphName:gt,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:q,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:q,horizOriginX:q,horizOriginY:q,id:null,ideographic:q,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:q,k:q,k1:q,k2:q,k3:q,k4:q,kernelMatrix:ze,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:q,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:q,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:q,overlineThickness:q,paintOrder:null,panose1:null,path:null,pathLength:q,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:de,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:q,pointsAtY:q,pointsAtZ:q,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ze,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ze,rev:ze,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ze,requiredFeatures:ze,requiredFonts:ze,requiredFormats:ze,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:q,specularExponent:q,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:q,strikethroughThickness:q,string:null,stroke:null,strokeDashArray:ze,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:q,strokeOpacity:q,strokeWidth:null,style:null,surfaceScale:q,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ze,tabIndex:q,tableValues:null,target:null,targetX:q,targetY:q,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ze,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:q,underlineThickness:q,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:q,values:null,vAlphabetic:q,vMathematical:q,vectorEffect:null,vHanging:q,vIdeographic:q,version:null,vertAdvY:q,vertOriginX:q,vertOriginY:q,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:q,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:yr});var _i=Ke({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}});var gi=Ke({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Cr});var vi=Ke({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}});var Si={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var zl=/[A-Z]/g,Ss=/-[a-z]/g,Ul=/^data[-\w.:]+$/i;function bi(e,t){let r=Jt(t),o=t,h=we;if(r in e.normal)return e.property[e.normal[r]];if(r.length>4&&r.slice(0,4)==="data"&&Ul.test(t)){if(t.charAt(4)==="-"){let i=t.slice(5).replace(Ss,jl);o="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{let i=t.slice(4);if(!Ss.test(i)){let n=i.replace(zl,Wl);n.charAt(0)!=="-"&&(n="-"+n),t="data"+n}}h=Et}return new h(o,t)}function Wl(e){return"-"+e.toLowerCase()}function jl(e){return e.charAt(1).toUpperCase()}var bs=di([mi,gs,_i,gi,vi],"html"),wr=di([mi,vs,_i,gi,vi],"svg");function ys(e){return e.join(" ").trim()}var Bs=_t(Is(),1);var kr=Ms("end"),zt=Ms("start");function Ms(e){return t;function t(r){let o=r&&r.position&&r.position[e]||{};if(typeof o.line=="number"&&o.line>0&&typeof o.column=="number"&&o.column>0)return{line:o.line,column:o.column,offset:typeof o.offset=="number"&&o.offset>-1?o.offset:void 0}}}function wi(e){let t=zt(e),r=kr(e);if(t&&r)return{start:t,end:r}}function vt(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Os(e.position):"start"in e||"end"in e?Os(e):"line"in e||"column"in e?xi(e):""}function xi(e){return Ps(e&&e.line)+":"+Ps(e&&e.column)}function Os(e){return xi(e&&e.start)+"-"+xi(e&&e.end)}function Ps(e){return e&&typeof e=="number"?e:1}var ve=class extends Error{constructor(t,r,o){super(),typeof r=="string"&&(o=r,r=void 0);let h="",i={},n=!1;if(r&&("line"in r&&"column"in r?i={place:r}:"start"in r&&"end"in r?i={place:r}:"type"in r?i={ancestors:[r],place:r.position}:i={...r}),typeof t=="string"?h=t:!i.cause&&t&&(n=!0,h=t.message,i.cause=t),!i.ruleId&&!i.source&&typeof o=="string"){let u=o.indexOf(":");u===-1?i.ruleId=o:(i.source=o.slice(0,u),i.ruleId=o.slice(u+1))}if(!i.place&&i.ancestors&&i.ancestors){let u=i.ancestors[i.ancestors.length-1];u&&(i.place=u.position)}let s=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file="",this.message=h,this.line=s?s.line:void 0,this.name=vt(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=n&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}};ve.prototype.file="";ve.prototype.name="";ve.prototype.reason="";ve.prototype.message="";ve.prototype.stack="";ve.prototype.column=void 0;ve.prototype.line=void 0;ve.prototype.ancestors=void 0;ve.prototype.cause=void 0;ve.prototype.fatal=void 0;ve.prototype.place=void 0;ve.prototype.ruleId=void 0;ve.prototype.source=void 0;var ki={}.hasOwnProperty,pc=new Map,mc=/[A-Z]/g,_c=new Set(["table","tbody","thead","tfoot","tr"]),gc=new Set(["td","th"]),Fs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Ei(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");let r=t.filePath||void 0,o;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");o=kc(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");o=xc(r,t.jsx,t.jsxs)}let h={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:o,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?wr:bs,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},i=Hs(h,e,void 0);return i&&typeof i!="string"?i:h.create(e,h.Fragment,{children:i||void 0},void 0)}function Hs(e,t,r){if(t.type==="element")return vc(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Sc(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return yc(e,t,r);if(t.type==="mdxjsEsm")return bc(e,t);if(t.type==="root")return Cc(e,t,r);if(t.type==="text")return wc(e,t)}function vc(e,t,r){let o=e.schema,h=o;t.tagName.toLowerCase()==="svg"&&o.space==="html"&&(h=wr,e.schema=h),e.ancestors.push(t);let i=zs(e,t.tagName,!1),n=Ec(e,t),s=Ti(e,t);return _c.has(t.tagName)&&(s=s.filter(function(u){return typeof u=="string"?!fi(u):!0})),Ns(e,n,i,t),Ai(n,s),e.ancestors.pop(),e.schema=o,e.create(t,i,n,r)}function Sc(e,t){if(t.data&&t.data.estree&&e.evaluater){let o=t.data.estree.body[0];return o.type,e.evaluater.evaluateExpression(o.expression)}er(e,t.position)}function bc(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);er(e,t.position)}function yc(e,t,r){let o=e.schema,h=o;t.name==="svg"&&o.space==="html"&&(h=wr,e.schema=h),e.ancestors.push(t);let i=t.name===null?e.Fragment:zs(e,t.name,!0),n=Ac(e,t),s=Ti(e,t);return Ns(e,n,i,t),Ai(n,s),e.ancestors.pop(),e.schema=o,e.create(t,i,n,r)}function Cc(e,t,r){let o={};return Ai(o,Ti(e,t)),e.create(t,e.Fragment,o,r)}function wc(e,t){return t.value}function Ns(e,t,r,o){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=o)}function Ai(e,t){if(t.length>0){let r=t.length>1?t:t[0];r&&(e.children=r)}}function xc(e,t,r){return o;function o(h,i,n,s){let l=Array.isArray(n.children)?r:t;return s?l(i,n,s):l(i,n)}}function kc(e,t){return r;function r(o,h,i,n){let s=Array.isArray(i.children),u=zt(o);return t(h,i,n,s,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function Ec(e,t){let r={},o,h;for(h in t.properties)if(h!=="children"&&ki.call(t.properties,h)){let i=Tc(e,h,t.properties[h]);if(i){let[n,s]=i;e.tableCellAlignToStyle&&n==="align"&&typeof s=="string"&&gc.has(t.tagName)?o=s:r[n]=s}}if(o){let i=r.style||(r.style={});i[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=o}return r}function Ac(e,t){let r={};for(let o of t.attributes)if(o.type==="mdxJsxExpressionAttribute")if(o.data&&o.data.estree&&e.evaluater){let i=o.data.estree.body[0];i.type;let n=i.expression;n.type;let s=n.properties[0];s.type,Object.assign(r,e.evaluater.evaluateExpression(s.argument))}else er(e,t.position);else{let h=o.name,i;if(o.value&&typeof o.value=="object")if(o.value.data&&o.value.data.estree&&e.evaluater){let s=o.value.data.estree.body[0];s.type,i=e.evaluater.evaluateExpression(s.expression)}else er(e,t.position);else i=o.value===null?!0:o.value;r[h]=i}return r}function Ti(e,t){let r=[],o=-1,h=e.passKeys?new Map:pc;for(;++o<t.children.length;){let i=t.children[o],n;if(e.passKeys){let u=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(u){let l=h.get(u)||0;n=u+"-"+l,h.set(u,l+1)}}let s=Hs(e,i,n);s!==void 0&&r.push(s)}return r}function Tc(e,t,r){let o=bi(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=o.commaSeparated?ps(r):ys(r)),o.property==="style"){let h=typeof r=="object"?r:Lc(e,String(r));return e.stylePropertyNameCase==="css"&&(h=Dc(h)),["style",h]}return[e.elementAttributeNameCase==="react"&&o.space?Si[o.property]||o.property:o.attribute,r]}}function Lc(e,t){try{return(0,Bs.default)(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};let o=r,h=new ve("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:o,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw h.file=e.filePath||void 0,h.url=Fs+"#cannot-parse-style-attribute",h}}function zs(e,t,r){let o;if(!r)o={type:"Literal",value:t};else if(t.includes(".")){let h=t.split("."),i=-1,n;for(;++i<h.length;){let s=Sr(h[i])?{type:"Identifier",name:h[i]}:{type:"Literal",value:h[i]};n=n?{type:"MemberExpression",object:n,property:s,computed:!!(i&&s.type==="Literal"),optional:!1}:s}o=n}else o=Sr(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(o.type==="Literal"){let h=o.value;return ki.call(e.components,h)?e.components[h]:h}if(e.evaluater)return e.evaluater.evaluateExpression(o);er(e)}function er(e,t){let r=new ve("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=Fs+"#cannot-handle-mdx-estrees-without-createevaluater",r}function Dc(e){let t={},r;for(r in e)ki.call(e,r)&&(t[Rc(r)]=e[r]);return t}function Rc(e){let t=e.replace(mc,Ic);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Ic(e){return"-"+e.toLowerCase()}var tr={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]};var qt=_t(Ar(),1),_a=_t(ui(),1);var Pc={};function Tt(e,t){let r=t||Pc,o=typeof r.includeImageAlt=="boolean"?r.includeImageAlt:!0,h=typeof r.includeHtml=="boolean"?r.includeHtml:!0;return qs(e,o,h)}function qs(e,t,r){if(Bc(e)){if("value"in e)return e.type==="html"&&!r?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return $s(e.children,t,r)}return Array.isArray(e)?$s(e,t,r):""}function $s(e,t,r){let o=[],h=-1;for(;++h<e.length;)o[h]=qs(e[h],t,r);return o.join("")}function Bc(e){return!!(e&&typeof e=="object")}var Vs=document.createElement("i");function Ut(e){let t="&"+e+";";Vs.innerHTML=t;let r=Vs.textContent;return r.charCodeAt(r.length-1)===59&&e!=="semi"||r===t?!1:r}function Se(e,t,r,o){let h=e.length,i=0,n;if(t<0?t=-t>h?0:h+t:t=t>h?h:t,r=r>0?r:0,o.length<1e4)n=Array.from(o),n.unshift(t,r),e.splice(...n);else for(r&&e.splice(t,r);i<o.length;)n=o.slice(i,i+1e4),n.unshift(t,0),e.splice(...n),i+=1e4,t+=1e4}function Oe(e,t){return e.length>0?(Se(e,e.length,0,t),e):t}var Ks={}.hasOwnProperty;function Tr(e){let t={},r=-1;for(;++r<e.length;)Fc(t,e[r]);return t}function Fc(e,t){let r;for(r in t){let h=(Ks.call(e,r)?e[r]:void 0)||(e[r]={}),i=t[r],n;if(i)for(n in i){Ks.call(h,n)||(h[n]=[]);let s=i[n];Hc(h[n],Array.isArray(s)?s:s?[s]:[])}}}function Hc(e,t){let r=-1,o=[];for(;++r<t.length;)(t[r].add==="after"?e:o).push(t[r]);Se(e,0,0,o)}function Lr(e,t){let r=Number.parseInt(e,t);return r<9||r===11||r>13&&r<32||r>126&&r<160||r>55295&&r<57344||r>64975&&r<65008||(r&65535)===65535||(r&65535)===65534||r>1114111?"\uFFFD":String.fromCodePoint(r)}function Re(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}var ye=St(/[A-Za-z]/),ge=St(/[\dA-Za-z]/),Gs=St(/[#-'*+\--9=?A-Z^-~]/);function Lt(e){return e!==null&&(e<32||e===127)}var rr=St(/\d/),Xs=St(/[\dA-Fa-f]/),Ys=St(/[!-/:-@[-`{-~]/);function X(e){return e!==null&&e<-2}function he(e){return e!==null&&(e<0||e===32)}function ie(e){return e===-2||e===-1||e===32}var Dt=St(/\p{P}|\p{S}/u),st=St(/\s/);function St(e){return t;function t(r){return r!==null&&r>-1&&e.test(String.fromCharCode(r))}}function Ge(e){let t=[],r=-1,o=0,h=0;for(;++r<e.length;){let i=e.charCodeAt(r),n="";if(i===37&&ge(e.charCodeAt(r+1))&&ge(e.charCodeAt(r+2)))h=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(n=String.fromCharCode(i));else if(i>55295&&i<57344){let s=e.charCodeAt(r+1);i<56320&&s>56319&&s<57344?(n=String.fromCharCode(i,s),h=1):n="\uFFFD"}else n=String.fromCharCode(i);n&&(t.push(e.slice(o,r),encodeURIComponent(n)),o=r+h+1,n=""),h&&(r+=h,h=0)}return t.join("")+e.slice(o)}function re(e,t,r,o){let h=o?o-1:Number.POSITIVE_INFINITY,i=0;return n;function n(u){return ie(u)?(e.enter(r),s(u)):t(u)}function s(u){return ie(u)&&i++<h?(e.consume(u),s):(e.exit(r),t(u))}}var Js={tokenize:Nc};function Nc(e){let t=e.attempt(this.parser.constructs.contentInitial,o,h),r;return t;function o(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),re(e,t,"linePrefix")}function h(s){return e.enter("paragraph"),i(s)}function i(s){let u=e.enter("chunkText",{contentType:"text",previous:r});return r&&(r.next=u),r=u,n(s)}function n(s){if(s===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(s);return}return X(s)?(e.consume(s),e.exit("chunkText"),i):(e.consume(s),n)}}var Qs={tokenize:zc},Zs={tokenize:Uc};function zc(e){let t=this,r=[],o=0,h,i,n;return s;function s(b){if(o<r.length){let y=r[o];return t.containerState=y[1],e.attempt(y[0].continuation,u,l)(b)}return l(b)}function u(b){if(o++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,h&&S();let y=t.events.length,w=y,v;for(;w--;)if(t.events[w][0]==="exit"&&t.events[w][1].type==="chunkFlow"){v=t.events[w][1].end;break}c(o);let C=y;for(;C<t.events.length;)t.events[C][1].end={...v},C++;return Se(t.events,w+1,0,t.events.slice(y)),t.events.length=C,l(b)}return s(b)}function l(b){if(o===r.length){if(!h)return g(b);if(h.currentConstruct&&h.currentConstruct.concrete)return a(b);t.interrupt=!!(h.currentConstruct&&!h._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Zs,p,m)(b)}function p(b){return h&&S(),c(o),g(b)}function m(b){return t.parser.lazy[t.now().line]=o!==r.length,n=t.now().offset,a(b)}function g(b){return t.containerState={},e.attempt(Zs,_,a)(b)}function _(b){return o++,r.push([t.currentConstruct,t.containerState]),g(b)}function a(b){if(b===null){h&&S(),c(0),e.consume(b);return}return h=h||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:h,contentType:"flow",previous:i}),d(b)}function d(b){if(b===null){f(e.exit("chunkFlow"),!0),c(0),e.consume(b);return}return X(b)?(e.consume(b),f(e.exit("chunkFlow")),o=0,t.interrupt=void 0,s):(e.consume(b),d)}function f(b,y){let w=t.sliceStream(b);if(y&&w.push(null),b.previous=i,i&&(i.next=b),i=b,h.defineSkip(b.start),h.write(w),t.parser.lazy[b.start.line]){let v=h.events.length;for(;v--;)if(h.events[v][1].start.offset<n&&(!h.events[v][1].end||h.events[v][1].end.offset>n))return;let C=t.events.length,L=C,I,x;for(;L--;)if(t.events[L][0]==="exit"&&t.events[L][1].type==="chunkFlow"){if(I){x=t.events[L][1].end;break}I=!0}for(c(o),v=C;v<t.events.length;)t.events[v][1].end={...x},v++;Se(t.events,L+1,0,t.events.slice(C)),t.events.length=v}}function c(b){let y=r.length;for(;y-- >b;){let w=r[y];t.containerState=w[1],w[0].exit.call(t,e)}r.length=b}function S(){h.write([null]),i=void 0,h=void 0,t.containerState._closeFlow=void 0}}function Uc(e,t,r){return re(e,e.attempt(this.parser.constructs.document,t,r),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function dt(e){if(e===null||he(e)||st(e))return 1;if(Dt(e))return 2}function bt(e,t,r){let o=[],h=-1;for(;++h<e.length;){let i=e[h].resolveAll;i&&!o.includes(i)&&(t=i(t,r),o.push(i))}return t}var ir={name:"attention",resolveAll:Wc,tokenize:jc};function Wc(e,t){let r=-1,o,h,i,n,s,u,l,p;for(;++r<e.length;)if(e[r][0]==="enter"&&e[r][1].type==="attentionSequence"&&e[r][1]._close){for(o=r;o--;)if(e[o][0]==="exit"&&e[o][1].type==="attentionSequence"&&e[o][1]._open&&t.sliceSerialize(e[o][1]).charCodeAt(0)===t.sliceSerialize(e[r][1]).charCodeAt(0)){if((e[o][1]._close||e[r][1]._open)&&(e[r][1].end.offset-e[r][1].start.offset)%3&&!((e[o][1].end.offset-e[o][1].start.offset+e[r][1].end.offset-e[r][1].start.offset)%3))continue;u=e[o][1].end.offset-e[o][1].start.offset>1&&e[r][1].end.offset-e[r][1].start.offset>1?2:1;let m={...e[o][1].end},g={...e[r][1].start};eo(m,-u),eo(g,u),n={type:u>1?"strongSequence":"emphasisSequence",start:m,end:{...e[o][1].end}},s={type:u>1?"strongSequence":"emphasisSequence",start:{...e[r][1].start},end:g},i={type:u>1?"strongText":"emphasisText",start:{...e[o][1].end},end:{...e[r][1].start}},h={type:u>1?"strong":"emphasis",start:{...n.start},end:{...s.end}},e[o][1].end={...n.start},e[r][1].start={...s.end},l=[],e[o][1].end.offset-e[o][1].start.offset&&(l=Oe(l,[["enter",e[o][1],t],["exit",e[o][1],t]])),l=Oe(l,[["enter",h,t],["enter",n,t],["exit",n,t],["enter",i,t]]),l=Oe(l,bt(t.parser.constructs.insideSpan.null,e.slice(o+1,r),t)),l=Oe(l,[["exit",i,t],["enter",s,t],["exit",s,t],["exit",h,t]]),e[r][1].end.offset-e[r][1].start.offset?(p=2,l=Oe(l,[["enter",e[r][1],t],["exit",e[r][1],t]])):p=0,Se(e,o-1,r-o+3,l),r=o+l.length-p-2;break}}for(r=-1;++r<e.length;)e[r][1].type==="attentionSequence"&&(e[r][1].type="data");return e}function jc(e,t){let r=this.parser.constructs.attentionMarkers.null,o=this.previous,h=dt(o),i;return n;function n(u){return i=u,e.enter("attentionSequence"),s(u)}function s(u){if(u===i)return e.consume(u),s;let l=e.exit("attentionSequence"),p=dt(u),m=!p||p===2&&h||r.includes(u),g=!h||h===2&&p||r.includes(o);return l._open=!!(i===42?m:m&&(h||!g)),l._close=!!(i===42?g:g&&(p||!m)),t(u)}}function eo(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}var Li={name:"autolink",tokenize:$c};function $c(e,t,r){let o=0;return h;function h(_){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(_),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i}function i(_){return ye(_)?(e.consume(_),n):_===64?r(_):l(_)}function n(_){return _===43||_===45||_===46||ge(_)?(o=1,s(_)):l(_)}function s(_){return _===58?(e.consume(_),o=0,u):(_===43||_===45||_===46||ge(_))&&o++<32?(e.consume(_),s):(o=0,l(_))}function u(_){return _===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(_),e.exit("autolinkMarker"),e.exit("autolink"),t):_===null||_===32||_===60||Lt(_)?r(_):(e.consume(_),u)}function l(_){return _===64?(e.consume(_),p):Gs(_)?(e.consume(_),l):r(_)}function p(_){return ge(_)?m(_):r(_)}function m(_){return _===46?(e.consume(_),o=0,p):_===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(_),e.exit("autolinkMarker"),e.exit("autolink"),t):g(_)}function g(_){if((_===45||ge(_))&&o++<63){let a=_===45?g:m;return e.consume(_),a}return r(_)}}var ot={partial:!0,tokenize:qc};function qc(e,t,r){return o;function o(i){return ie(i)?re(e,h,"linePrefix")(i):h(i)}function h(i){return i===null||X(i)?t(i):r(i)}}var Dr={continuation:{tokenize:Kc},exit:Gc,name:"blockQuote",tokenize:Vc};function Vc(e,t,r){let o=this;return h;function h(n){if(n===62){let s=o.containerState;return s.open||(e.enter("blockQuote",{_container:!0}),s.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(n),e.exit("blockQuoteMarker"),i}return r(n)}function i(n){return ie(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}function Kc(e,t,r){let o=this;return h;function h(n){return ie(n)?re(e,i,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(n):i(n)}function i(n){return e.attempt(Dr,t,r)(n)}}function Gc(e){e.exit("blockQuote")}var Rr={name:"characterEscape",tokenize:Xc};function Xc(e,t,r){return o;function o(i){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(i),e.exit("escapeMarker"),h}function h(i){return Ys(i)?(e.enter("characterEscapeValue"),e.consume(i),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):r(i)}}var Ir={name:"characterReference",tokenize:Yc};function Yc(e,t,r){let o=this,h=0,i,n;return s;function s(m){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),u}function u(m){return m===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(m),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,n=ge,p(m))}function l(m){return m===88||m===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(m),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,n=Xs,p):(e.enter("characterReferenceValue"),i=7,n=rr,p(m))}function p(m){if(m===59&&h){let g=e.exit("characterReferenceValue");return n===ge&&!Ut(o.sliceSerialize(g))?r(m):(e.enter("characterReferenceMarker"),e.consume(m),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return n(m)&&h++<i?(e.consume(m),p):r(m)}}var to={partial:!0,tokenize:Zc},Mr={concrete:!0,name:"codeFenced",tokenize:Jc};function Jc(e,t,r){let o=this,h={partial:!0,tokenize:w},i=0,n=0,s;return u;function u(v){return l(v)}function l(v){let C=o.events[o.events.length-1];return i=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,s=v,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),p(v)}function p(v){return v===s?(n++,e.consume(v),p):n<3?r(v):(e.exit("codeFencedFenceSequence"),ie(v)?re(e,m,"whitespace")(v):m(v))}function m(v){return v===null||X(v)?(e.exit("codeFencedFence"),o.interrupt?t(v):e.check(to,d,y)(v)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),g(v))}function g(v){return v===null||X(v)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),m(v)):ie(v)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),re(e,_,"whitespace")(v)):v===96&&v===s?r(v):(e.consume(v),g)}function _(v){return v===null||X(v)?m(v):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),a(v))}function a(v){return v===null||X(v)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),m(v)):v===96&&v===s?r(v):(e.consume(v),a)}function d(v){return e.attempt(h,y,f)(v)}function f(v){return e.enter("lineEnding"),e.consume(v),e.exit("lineEnding"),c}function c(v){return i>0&&ie(v)?re(e,S,"linePrefix",i+1)(v):S(v)}function S(v){return v===null||X(v)?e.check(to,d,y)(v):(e.enter("codeFlowValue"),b(v))}function b(v){return v===null||X(v)?(e.exit("codeFlowValue"),S(v)):(e.consume(v),b)}function y(v){return e.exit("codeFenced"),t(v)}function w(v,C,L){let I=0;return x;function x(N){return v.enter("lineEnding"),v.consume(N),v.exit("lineEnding"),R}function R(N){return v.enter("codeFencedFence"),ie(N)?re(v,H,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):H(N)}function H(N){return N===s?(v.enter("codeFencedFenceSequence"),B(N)):L(N)}function B(N){return N===s?(I++,v.consume(N),B):I>=n?(v.exit("codeFencedFenceSequence"),ie(N)?re(v,z,"whitespace")(N):z(N)):L(N)}function z(N){return N===null||X(N)?(v.exit("codeFencedFence"),C(N)):L(N)}}}function Zc(e,t,r){let o=this;return h;function h(n){return n===null?r(n):(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),i)}function i(n){return o.parser.lazy[o.now().line]?r(n):t(n)}}var nr={name:"codeIndented",tokenize:eh},Qc={partial:!0,tokenize:th};function eh(e,t,r){let o=this;return h;function h(l){return e.enter("codeIndented"),re(e,i,"linePrefix",5)(l)}function i(l){let p=o.events[o.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?n(l):r(l)}function n(l){return l===null?u(l):X(l)?e.attempt(Qc,n,u)(l):(e.enter("codeFlowValue"),s(l))}function s(l){return l===null||X(l)?(e.exit("codeFlowValue"),n(l)):(e.consume(l),s)}function u(l){return e.exit("codeIndented"),t(l)}}function th(e,t,r){let o=this;return h;function h(n){return o.parser.lazy[o.now().line]?r(n):X(n)?(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),h):re(e,i,"linePrefix",5)(n)}function i(n){let s=o.events[o.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(n):X(n)?h(n):r(n)}}var Di={name:"codeText",previous:ih,resolve:rh,tokenize:nh};function rh(e){let t=e.length-4,r=3,o,h;if((e[r][1].type==="lineEnding"||e[r][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(o=r;++o<t;)if(e[o][1].type==="codeTextData"){e[r][1].type="codeTextPadding",e[t][1].type="codeTextPadding",r+=2,t-=2;break}}for(o=r-1,t++;++o<=t;)h===void 0?o!==t&&e[o][1].type!=="lineEnding"&&(h=o):(o===t||e[o][1].type==="lineEnding")&&(e[h][1].type="codeTextData",o!==h+2&&(e[h][1].end=e[o-1][1].end,e.splice(h+2,o-h-2),t-=o-h-2,o=h+2),h=void 0);return e}function ih(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function nh(e,t,r){let o=this,h=0,i,n;return s;function s(g){return e.enter("codeText"),e.enter("codeTextSequence"),u(g)}function u(g){return g===96?(e.consume(g),h++,u):(e.exit("codeTextSequence"),l(g))}function l(g){return g===null?r(g):g===32?(e.enter("space"),e.consume(g),e.exit("space"),l):g===96?(n=e.enter("codeTextSequence"),i=0,m(g)):X(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),l):(e.enter("codeTextData"),p(g))}function p(g){return g===null||g===32||g===96||X(g)?(e.exit("codeTextData"),l(g)):(e.consume(g),p)}function m(g){return g===96?(e.consume(g),i++,m):i===h?(e.exit("codeTextSequence"),e.exit("codeText"),t(g)):(n.type="codeTextData",p(g))}}var Or=class{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,r){let o=r??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(t,o):t>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(t,r,o){let h=r||0;this.setCursor(Math.trunc(t));let i=this.right.splice(this.right.length-h,Number.POSITIVE_INFINITY);return o&&sr(this.left,o),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),sr(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),sr(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){let r=this.left.splice(t,Number.POSITIVE_INFINITY);sr(this.right,r.reverse())}else{let r=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);sr(this.left,r.reverse())}}};function sr(e,t){let r=0;if(t.length<1e4)e.push(...t);else for(;r<t.length;)e.push(...t.slice(r,r+1e4)),r+=1e4}function Pr(e){let t={},r=-1,o,h,i,n,s,u,l,p=new Or(e);for(;++r<p.length;){for(;r in t;)r=t[r];if(o=p.get(r),r&&o[1].type==="chunkFlow"&&p.get(r-1)[1].type==="listItemPrefix"&&(u=o[1]._tokenizer.events,i=0,i<u.length&&u[i][1].type==="lineEndingBlank"&&(i+=2),i<u.length&&u[i][1].type==="content"))for(;++i<u.length&&u[i][1].type!=="content";)u[i][1].type==="chunkText"&&(u[i][1]._isInFirstContentOfListItem=!0,i++);if(o[0]==="enter")o[1].contentType&&(Object.assign(t,sh(p,r)),r=t[r],l=!0);else if(o[1]._container){for(i=r,h=void 0;i--;)if(n=p.get(i),n[1].type==="lineEnding"||n[1].type==="lineEndingBlank")n[0]==="enter"&&(h&&(p.get(h)[1].type="lineEndingBlank"),n[1].type="lineEnding",h=i);else if(!(n[1].type==="linePrefix"||n[1].type==="listItemIndent"))break;h&&(o[1].end={...p.get(h)[1].start},s=p.slice(h,r),s.unshift(o),p.splice(h,r-h+1,s))}}return Se(e,0,Number.POSITIVE_INFINITY,p.slice(0)),!l}function sh(e,t){let r=e.get(t)[1],o=e.get(t)[2],h=t-1,i=[],n=r._tokenizer;n||(n=o.parser[r.contentType](r.start),r._contentTypeTextTrailing&&(n._contentTypeTextTrailing=!0));let s=n.events,u=[],l={},p,m,g=-1,_=r,a=0,d=0,f=[d];for(;_;){for(;e.get(++h)[1]!==_;);i.push(h),_._tokenizer||(p=o.sliceStream(_),_.next||p.push(null),m&&n.defineSkip(_.start),_._isInFirstContentOfListItem&&(n._gfmTasklistFirstContentOfListItem=!0),n.write(p),_._isInFirstContentOfListItem&&(n._gfmTasklistFirstContentOfListItem=void 0)),m=_,_=_.next}for(_=r;++g<s.length;)s[g][0]==="exit"&&s[g-1][0]==="enter"&&s[g][1].type===s[g-1][1].type&&s[g][1].start.line!==s[g][1].end.line&&(d=g+1,f.push(d),_._tokenizer=void 0,_.previous=void 0,_=_.next);for(n.events=[],_?(_._tokenizer=void 0,_.previous=void 0):f.pop(),g=f.length;g--;){let c=s.slice(f[g],f[g+1]),S=i.pop();u.push([S,S+c.length-1]),e.splice(S,2,c)}for(u.reverse(),g=-1;++g<u.length;)l[a+u[g][0]]=a+u[g][1],a+=u[g][1]-u[g][0]-1;return l}var Ri={resolve:ah,tokenize:lh},oh={partial:!0,tokenize:ch};function ah(e){return Pr(e),e}function lh(e,t){let r;return o;function o(s){return e.enter("content"),r=e.enter("chunkContent",{contentType:"content"}),h(s)}function h(s){return s===null?i(s):X(s)?e.check(oh,n,i)(s):(e.consume(s),h)}function i(s){return e.exit("chunkContent"),e.exit("content"),t(s)}function n(s){return e.consume(s),e.exit("chunkContent"),r.next=e.enter("chunkContent",{contentType:"content",previous:r}),r=r.next,h}}function ch(e,t,r){let o=this;return h;function h(n){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),re(e,i,"linePrefix")}function i(n){if(n===null||X(n))return r(n);let s=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?t(n):e.interrupt(o.parser.constructs.flow,r,t)(n)}}function Br(e,t,r,o,h,i,n,s,u){let l=u||Number.POSITIVE_INFINITY,p=0;return m;function m(c){return c===60?(e.enter(o),e.enter(h),e.enter(i),e.consume(c),e.exit(i),g):c===null||c===32||c===41||Lt(c)?r(c):(e.enter(o),e.enter(n),e.enter(s),e.enter("chunkString",{contentType:"string"}),d(c))}function g(c){return c===62?(e.enter(i),e.consume(c),e.exit(i),e.exit(h),e.exit(o),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),_(c))}function _(c){return c===62?(e.exit("chunkString"),e.exit(s),g(c)):c===null||c===60||X(c)?r(c):(e.consume(c),c===92?a:_)}function a(c){return c===60||c===62||c===92?(e.consume(c),_):_(c)}function d(c){return!p&&(c===null||c===41||he(c))?(e.exit("chunkString"),e.exit(s),e.exit(n),e.exit(o),t(c)):p<l&&c===40?(e.consume(c),p++,d):c===41?(e.consume(c),p--,d):c===null||c===32||c===40||Lt(c)?r(c):(e.consume(c),c===92?f:d)}function f(c){return c===40||c===41||c===92?(e.consume(c),d):d(c)}}function Fr(e,t,r,o,h,i){let n=this,s=0,u;return l;function l(_){return e.enter(o),e.enter(h),e.consume(_),e.exit(h),e.enter(i),p}function p(_){return s>999||_===null||_===91||_===93&&!u||_===94&&!s&&"_hiddenFootnoteSupport"in n.parser.constructs?r(_):_===93?(e.exit(i),e.enter(h),e.consume(_),e.exit(h),e.exit(o),t):X(_)?(e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),p):(e.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===null||_===91||_===93||X(_)||s++>999?(e.exit("chunkString"),p(_)):(e.consume(_),u||(u=!ie(_)),_===92?g:m)}function g(_){return _===91||_===92||_===93?(e.consume(_),s++,m):m(_)}}function Hr(e,t,r,o,h,i){let n;return s;function s(g){return g===34||g===39||g===40?(e.enter(o),e.enter(h),e.consume(g),e.exit(h),n=g===40?41:g,u):r(g)}function u(g){return g===n?(e.enter(h),e.consume(g),e.exit(h),e.exit(o),t):(e.enter(i),l(g))}function l(g){return g===n?(e.exit(i),u(n)):g===null?r(g):X(g)?(e.enter("lineEnding"),e.consume(g),e.exit("lineEnding"),re(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),p(g))}function p(g){return g===n||g===null||X(g)?(e.exit("chunkString"),l(g)):(e.consume(g),g===92?m:p)}function m(g){return g===n||g===92?(e.consume(g),p):p(g)}}function Rt(e,t){let r;return o;function o(h){return X(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),r=!0,o):ie(h)?re(e,o,r?"linePrefix":"lineSuffix")(h):t(h)}}var Ii={name:"definition",tokenize:uh},hh={partial:!0,tokenize:fh};function uh(e,t,r){let o=this,h;return i;function i(_){return e.enter("definition"),n(_)}function n(_){return Fr.call(o,e,s,r,"definitionLabel","definitionLabelMarker","definitionLabelString")(_)}function s(_){return h=Re(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),_===58?(e.enter("definitionMarker"),e.consume(_),e.exit("definitionMarker"),u):r(_)}function u(_){return he(_)?Rt(e,l)(_):l(_)}function l(_){return Br(e,p,r,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(_)}function p(_){return e.attempt(hh,m,m)(_)}function m(_){return ie(_)?re(e,g,"whitespace")(_):g(_)}function g(_){return _===null||X(_)?(e.exit("definition"),o.parser.defined.push(h),t(_)):r(_)}}function fh(e,t,r){return o;function o(s){return he(s)?Rt(e,h)(s):r(s)}function h(s){return Hr(e,i,r,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function i(s){return ie(s)?re(e,n,"whitespace")(s):n(s)}function n(s){return s===null||X(s)?t(s):r(s)}}var Mi={name:"hardBreakEscape",tokenize:dh};function dh(e,t,r){return o;function o(i){return e.enter("hardBreakEscape"),e.consume(i),h}function h(i){return X(i)?(e.exit("hardBreakEscape"),t(i)):r(i)}}var Oi={name:"headingAtx",resolve:ph,tokenize:mh};function ph(e,t){let r=e.length-2,o=3,h,i;return e[o][1].type==="whitespace"&&(o+=2),r-2>o&&e[r][1].type==="whitespace"&&(r-=2),e[r][1].type==="atxHeadingSequence"&&(o===r-1||r-4>o&&e[r-2][1].type==="whitespace")&&(r-=o+1===r?2:4),r>o&&(h={type:"atxHeadingText",start:e[o][1].start,end:e[r][1].end},i={type:"chunkText",start:e[o][1].start,end:e[r][1].end,contentType:"text"},Se(e,o,r-o+1,[["enter",h,t],["enter",i,t],["exit",i,t],["exit",h,t]])),e}function mh(e,t,r){let o=0;return h;function h(p){return e.enter("atxHeading"),i(p)}function i(p){return e.enter("atxHeadingSequence"),n(p)}function n(p){return p===35&&o++<6?(e.consume(p),n):p===null||he(p)?(e.exit("atxHeadingSequence"),s(p)):r(p)}function s(p){return p===35?(e.enter("atxHeadingSequence"),u(p)):p===null||X(p)?(e.exit("atxHeading"),t(p)):ie(p)?re(e,s,"whitespace")(p):(e.enter("atxHeadingText"),l(p))}function u(p){return p===35?(e.consume(p),u):(e.exit("atxHeadingSequence"),s(p))}function l(p){return p===null||p===35||he(p)?(e.exit("atxHeadingText"),s(p)):(e.consume(p),l)}}var ro=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Pi=["pre","script","style","textarea"];var Bi={concrete:!0,name:"htmlFlow",resolveTo:vh,tokenize:Sh},_h={partial:!0,tokenize:yh},gh={partial:!0,tokenize:bh};function vh(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Sh(e,t,r){let o=this,h,i,n,s,u;return l;function l(T){return p(T)}function p(T){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(T),m}function m(T){return T===33?(e.consume(T),g):T===47?(e.consume(T),i=!0,d):T===63?(e.consume(T),h=3,o.interrupt?t:A):ye(T)?(e.consume(T),n=String.fromCharCode(T),f):r(T)}function g(T){return T===45?(e.consume(T),h=2,_):T===91?(e.consume(T),h=5,s=0,a):ye(T)?(e.consume(T),h=4,o.interrupt?t:A):r(T)}function _(T){return T===45?(e.consume(T),o.interrupt?t:A):r(T)}function a(T){let le="CDATA[";return T===le.charCodeAt(s++)?(e.consume(T),s===le.length?o.interrupt?t:H:a):r(T)}function d(T){return ye(T)?(e.consume(T),n=String.fromCharCode(T),f):r(T)}function f(T){if(T===null||T===47||T===62||he(T)){let le=T===47,k=n.toLowerCase();return!le&&!i&&Pi.includes(k)?(h=1,o.interrupt?t(T):H(T)):ro.includes(n.toLowerCase())?(h=6,le?(e.consume(T),c):o.interrupt?t(T):H(T)):(h=7,o.interrupt&&!o.parser.lazy[o.now().line]?r(T):i?S(T):b(T))}return T===45||ge(T)?(e.consume(T),n+=String.fromCharCode(T),f):r(T)}function c(T){return T===62?(e.consume(T),o.interrupt?t:H):r(T)}function S(T){return ie(T)?(e.consume(T),S):x(T)}function b(T){return T===47?(e.consume(T),x):T===58||T===95||ye(T)?(e.consume(T),y):ie(T)?(e.consume(T),b):x(T)}function y(T){return T===45||T===46||T===58||T===95||ge(T)?(e.consume(T),y):w(T)}function w(T){return T===61?(e.consume(T),v):ie(T)?(e.consume(T),w):b(T)}function v(T){return T===null||T===60||T===61||T===62||T===96?r(T):T===34||T===39?(e.consume(T),u=T,C):ie(T)?(e.consume(T),v):L(T)}function C(T){return T===u?(e.consume(T),u=null,I):T===null||X(T)?r(T):(e.consume(T),C)}function L(T){return T===null||T===34||T===39||T===47||T===60||T===61||T===62||T===96||he(T)?w(T):(e.consume(T),L)}function I(T){return T===47||T===62||ie(T)?b(T):r(T)}function x(T){return T===62?(e.consume(T),R):r(T)}function R(T){return T===null||X(T)?H(T):ie(T)?(e.consume(T),R):r(T)}function H(T){return T===45&&h===2?(e.consume(T),E):T===60&&h===1?(e.consume(T),D):T===62&&h===4?(e.consume(T),$):T===63&&h===3?(e.consume(T),A):T===93&&h===5?(e.consume(T),O):X(T)&&(h===6||h===7)?(e.exit("htmlFlowData"),e.check(_h,Y,B)(T)):T===null||X(T)?(e.exit("htmlFlowData"),B(T)):(e.consume(T),H)}function B(T){return e.check(gh,z,Y)(T)}function z(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),N}function N(T){return T===null||X(T)?B(T):(e.enter("htmlFlowData"),H(T))}function E(T){return T===45?(e.consume(T),A):H(T)}function D(T){return T===47?(e.consume(T),n="",M):H(T)}function M(T){if(T===62){let le=n.toLowerCase();return Pi.includes(le)?(e.consume(T),$):H(T)}return ye(T)&&n.length<8?(e.consume(T),n+=String.fromCharCode(T),M):H(T)}function O(T){return T===93?(e.consume(T),A):H(T)}function A(T){return T===62?(e.consume(T),$):T===45&&h===2?(e.consume(T),A):H(T)}function $(T){return T===null||X(T)?(e.exit("htmlFlowData"),Y(T)):(e.consume(T),$)}function Y(T){return e.exit("htmlFlow"),t(T)}}function bh(e,t,r){let o=this;return h;function h(n){return X(n)?(e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),i):r(n)}function i(n){return o.parser.lazy[o.now().line]?r(n):t(n)}}function yh(e,t,r){return o;function o(h){return e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),e.attempt(ot,t,r)}}var Fi={name:"htmlText",tokenize:Ch};function Ch(e,t,r){let o=this,h,i,n;return s;function s(A){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(A),u}function u(A){return A===33?(e.consume(A),l):A===47?(e.consume(A),w):A===63?(e.consume(A),b):ye(A)?(e.consume(A),L):r(A)}function l(A){return A===45?(e.consume(A),p):A===91?(e.consume(A),i=0,a):ye(A)?(e.consume(A),S):r(A)}function p(A){return A===45?(e.consume(A),_):r(A)}function m(A){return A===null?r(A):A===45?(e.consume(A),g):X(A)?(n=m,D(A)):(e.consume(A),m)}function g(A){return A===45?(e.consume(A),_):m(A)}function _(A){return A===62?E(A):A===45?g(A):m(A)}function a(A){let $="CDATA[";return A===$.charCodeAt(i++)?(e.consume(A),i===$.length?d:a):r(A)}function d(A){return A===null?r(A):A===93?(e.consume(A),f):X(A)?(n=d,D(A)):(e.consume(A),d)}function f(A){return A===93?(e.consume(A),c):d(A)}function c(A){return A===62?E(A):A===93?(e.consume(A),c):d(A)}function S(A){return A===null||A===62?E(A):X(A)?(n=S,D(A)):(e.consume(A),S)}function b(A){return A===null?r(A):A===63?(e.consume(A),y):X(A)?(n=b,D(A)):(e.consume(A),b)}function y(A){return A===62?E(A):b(A)}function w(A){return ye(A)?(e.consume(A),v):r(A)}function v(A){return A===45||ge(A)?(e.consume(A),v):C(A)}function C(A){return X(A)?(n=C,D(A)):ie(A)?(e.consume(A),C):E(A)}function L(A){return A===45||ge(A)?(e.consume(A),L):A===47||A===62||he(A)?I(A):r(A)}function I(A){return A===47?(e.consume(A),E):A===58||A===95||ye(A)?(e.consume(A),x):X(A)?(n=I,D(A)):ie(A)?(e.consume(A),I):E(A)}function x(A){return A===45||A===46||A===58||A===95||ge(A)?(e.consume(A),x):R(A)}function R(A){return A===61?(e.consume(A),H):X(A)?(n=R,D(A)):ie(A)?(e.consume(A),R):I(A)}function H(A){return A===null||A===60||A===61||A===62||A===96?r(A):A===34||A===39?(e.consume(A),h=A,B):X(A)?(n=H,D(A)):ie(A)?(e.consume(A),H):(e.consume(A),z)}function B(A){return A===h?(e.consume(A),h=void 0,N):A===null?r(A):X(A)?(n=B,D(A)):(e.consume(A),B)}function z(A){return A===null||A===34||A===39||A===60||A===61||A===96?r(A):A===47||A===62||he(A)?I(A):(e.consume(A),z)}function N(A){return A===47||A===62||he(A)?I(A):r(A)}function E(A){return A===62?(e.consume(A),e.exit("htmlTextData"),e.exit("htmlText"),t):r(A)}function D(A){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),M}function M(A){return ie(A)?re(e,O,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):O(A)}function O(A){return e.enter("htmlTextData"),n(A)}}var It={name:"labelEnd",resolveAll:Eh,resolveTo:Ah,tokenize:Th},wh={tokenize:Lh},xh={tokenize:Dh},kh={tokenize:Rh};function Eh(e){let t=-1,r=[];for(;++t<e.length;){let o=e[t][1];if(r.push(e[t]),o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd"){let h=o.type==="labelImage"?4:2;o.type="data",t+=h}}return e.length!==r.length&&Se(e,0,e.length,r),e}function Ah(e,t){let r=e.length,o=0,h,i,n,s;for(;r--;)if(h=e[r][1],i){if(h.type==="link"||h.type==="labelLink"&&h._inactive)break;e[r][0]==="enter"&&h.type==="labelLink"&&(h._inactive=!0)}else if(n){if(e[r][0]==="enter"&&(h.type==="labelImage"||h.type==="labelLink")&&!h._balanced&&(i=r,h.type!=="labelLink")){o=2;break}}else h.type==="labelEnd"&&(n=r);let u={type:e[i][1].type==="labelLink"?"link":"image",start:{...e[i][1].start},end:{...e[e.length-1][1].end}},l={type:"label",start:{...e[i][1].start},end:{...e[n][1].end}},p={type:"labelText",start:{...e[i+o+2][1].end},end:{...e[n-2][1].start}};return s=[["enter",u,t],["enter",l,t]],s=Oe(s,e.slice(i+1,i+o+3)),s=Oe(s,[["enter",p,t]]),s=Oe(s,bt(t.parser.constructs.insideSpan.null,e.slice(i+o+4,n-3),t)),s=Oe(s,[["exit",p,t],e[n-2],e[n-1],["exit",l,t]]),s=Oe(s,e.slice(n+1)),s=Oe(s,[["exit",u,t]]),Se(e,i,e.length,s),e}function Th(e,t,r){let o=this,h=o.events.length,i,n;for(;h--;)if((o.events[h][1].type==="labelImage"||o.events[h][1].type==="labelLink")&&!o.events[h][1]._balanced){i=o.events[h][1];break}return s;function s(g){return i?i._inactive?m(g):(n=o.parser.defined.includes(Re(o.sliceSerialize({start:i.end,end:o.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(g),e.exit("labelMarker"),e.exit("labelEnd"),u):r(g)}function u(g){return g===40?e.attempt(wh,p,n?p:m)(g):g===91?e.attempt(xh,p,n?l:m)(g):n?p(g):m(g)}function l(g){return e.attempt(kh,p,m)(g)}function p(g){return t(g)}function m(g){return i._balanced=!0,r(g)}}function Lh(e,t,r){return o;function o(m){return e.enter("resource"),e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),h}function h(m){return he(m)?Rt(e,i)(m):i(m)}function i(m){return m===41?p(m):Br(e,n,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function n(m){return he(m)?Rt(e,u)(m):p(m)}function s(m){return r(m)}function u(m){return m===34||m===39||m===40?Hr(e,l,r,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):p(m)}function l(m){return he(m)?Rt(e,p)(m):p(m)}function p(m){return m===41?(e.enter("resourceMarker"),e.consume(m),e.exit("resourceMarker"),e.exit("resource"),t):r(m)}}function Dh(e,t,r){let o=this;return h;function h(s){return Fr.call(o,e,i,n,"reference","referenceMarker","referenceString")(s)}function i(s){return o.parser.defined.includes(Re(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?t(s):r(s)}function n(s){return r(s)}}function Rh(e,t,r){return o;function o(i){return e.enter("reference"),e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),h}function h(i){return i===93?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):r(i)}}var Hi={name:"labelStartImage",resolveAll:It.resolveAll,tokenize:Ih};function Ih(e,t,r){let o=this;return h;function h(s){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(s),e.exit("labelImageMarker"),i}function i(s){return s===91?(e.enter("labelMarker"),e.consume(s),e.exit("labelMarker"),e.exit("labelImage"),n):r(s)}function n(s){return s===94&&"_hiddenFootnoteSupport"in o.parser.constructs?r(s):t(s)}}var Ni={name:"labelStartLink",resolveAll:It.resolveAll,tokenize:Mh};function Mh(e,t,r){let o=this;return h;function h(n){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(n),e.exit("labelMarker"),e.exit("labelLink"),i}function i(n){return n===94&&"_hiddenFootnoteSupport"in o.parser.constructs?r(n):t(n)}}var or={name:"lineEnding",tokenize:Oh};function Oh(e,t){return r;function r(o){return e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),re(e,t,"linePrefix")}}var Mt={name:"thematicBreak",tokenize:Ph};function Ph(e,t,r){let o=0,h;return i;function i(l){return e.enter("thematicBreak"),n(l)}function n(l){return h=l,s(l)}function s(l){return l===h?(e.enter("thematicBreakSequence"),u(l)):o>=3&&(l===null||X(l))?(e.exit("thematicBreak"),t(l)):r(l)}function u(l){return l===h?(e.consume(l),o++,u):(e.exit("thematicBreakSequence"),ie(l)?re(e,s,"whitespace")(l):s(l))}}var Ie={continuation:{tokenize:Nh},exit:Uh,name:"list",tokenize:Hh},Bh={partial:!0,tokenize:Wh},Fh={partial:!0,tokenize:zh};function Hh(e,t,r){let o=this,h=o.events[o.events.length-1],i=h&&h[1].type==="linePrefix"?h[2].sliceSerialize(h[1],!0).length:0,n=0;return s;function s(_){let a=o.containerState.type||(_===42||_===43||_===45?"listUnordered":"listOrdered");if(a==="listUnordered"?!o.containerState.marker||_===o.containerState.marker:rr(_)){if(o.containerState.type||(o.containerState.type=a,e.enter(a,{_container:!0})),a==="listUnordered")return e.enter("listItemPrefix"),_===42||_===45?e.check(Mt,r,l)(_):l(_);if(!o.interrupt||_===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(_)}return r(_)}function u(_){return rr(_)&&++n<10?(e.consume(_),u):(!o.interrupt||n<2)&&(o.containerState.marker?_===o.containerState.marker:_===41||_===46)?(e.exit("listItemValue"),l(_)):r(_)}function l(_){return e.enter("listItemMarker"),e.consume(_),e.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||_,e.check(ot,o.interrupt?r:p,e.attempt(Bh,g,m))}function p(_){return o.containerState.initialBlankLine=!0,i++,g(_)}function m(_){return ie(_)?(e.enter("listItemPrefixWhitespace"),e.consume(_),e.exit("listItemPrefixWhitespace"),g):r(_)}function g(_){return o.containerState.size=i+o.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(_)}}function Nh(e,t,r){let o=this;return o.containerState._closeFlow=void 0,e.check(ot,h,i);function h(s){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,re(e,t,"listItemIndent",o.containerState.size+1)(s)}function i(s){return o.containerState.furtherBlankLines||!ie(s)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,n(s)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,e.attempt(Fh,t,n)(s))}function n(s){return o.containerState._closeFlow=!0,o.interrupt=void 0,re(e,e.attempt(Ie,t,r),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function zh(e,t,r){let o=this;return re(e,h,"listItemIndent",o.containerState.size+1);function h(i){let n=o.events[o.events.length-1];return n&&n[1].type==="listItemIndent"&&n[2].sliceSerialize(n[1],!0).length===o.containerState.size?t(i):r(i)}}function Uh(e){e.exit(this.containerState.type)}function Wh(e,t,r){let o=this;return re(e,h,"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function h(i){let n=o.events[o.events.length-1];return!ie(i)&&n&&n[1].type==="listItemPrefixWhitespace"?t(i):r(i)}}var Nr={name:"setextUnderline",resolveTo:jh,tokenize:$h};function jh(e,t){let r=e.length,o,h,i;for(;r--;)if(e[r][0]==="enter"){if(e[r][1].type==="content"){o=r;break}e[r][1].type==="paragraph"&&(h=r)}else e[r][1].type==="content"&&e.splice(r,1),!i&&e[r][1].type==="definition"&&(i=r);let n={type:"setextHeading",start:{...e[o][1].start},end:{...e[e.length-1][1].end}};return e[h][1].type="setextHeadingText",i?(e.splice(h,0,["enter",n,t]),e.splice(i+1,0,["exit",e[o][1],t]),e[o][1].end={...e[i][1].end}):e[o][1]=n,e.push(["exit",n,t]),e}function $h(e,t,r){let o=this,h;return i;function i(l){let p=o.events.length,m;for(;p--;)if(o.events[p][1].type!=="lineEnding"&&o.events[p][1].type!=="linePrefix"&&o.events[p][1].type!=="content"){m=o.events[p][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||m)?(e.enter("setextHeadingLine"),h=l,n(l)):r(l)}function n(l){return e.enter("setextHeadingLineSequence"),s(l)}function s(l){return l===h?(e.consume(l),s):(e.exit("setextHeadingLineSequence"),ie(l)?re(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||X(l)?(e.exit("setextHeadingLine"),t(l)):r(l)}}var io={tokenize:qh};function qh(e){let t=this,r=e.attempt(ot,o,e.attempt(this.parser.constructs.flowInitial,h,re(e,e.attempt(this.parser.constructs.flow,h,e.attempt(Ri,h)),"linePrefix")));return r;function o(i){if(i===null){e.consume(i);return}return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,r}function h(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,r}}var no={resolveAll:lo()},so=ao("string"),oo=ao("text");function ao(e){return{resolveAll:lo(e==="text"?Vh:void 0),tokenize:t};function t(r){let o=this,h=this.parser.constructs[e],i=r.attempt(h,n,s);return n;function n(p){return l(p)?i(p):s(p)}function s(p){if(p===null){r.consume(p);return}return r.enter("data"),r.consume(p),u}function u(p){return l(p)?(r.exit("data"),i(p)):(r.consume(p),u)}function l(p){if(p===null)return!0;let m=h[p],g=-1;if(m)for(;++g<m.length;){let _=m[g];if(!_.previous||_.previous.call(o,o.previous))return!0}return!1}}}function lo(e){return t;function t(r,o){let h=-1,i;for(;++h<=r.length;)i===void 0?r[h]&&r[h][1].type==="data"&&(i=h,h++):(!r[h]||r[h][1].type!=="data")&&(h!==i+2&&(r[i][1].end=r[h-1][1].end,r.splice(i+2,h-i-2),h=i+2),i=void 0);return e?e(r,o):r}}function Vh(e,t){let r=0;for(;++r<=e.length;)if((r===e.length||e[r][1].type==="lineEnding")&&e[r-1][1].type==="data"){let o=e[r-1][1],h=t.sliceStream(o),i=h.length,n=-1,s=0,u;for(;i--;){let l=h[i];if(typeof l=="string"){for(n=l.length;l.charCodeAt(n-1)===32;)s++,n--;if(n)break;n=-1}else if(l===-2)u=!0,s++;else if(l!==-1){i++;break}}if(t._contentTypeTextTrailing&&r===e.length&&(s=0),s){let l={type:r===e.length||u||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?n:o.start._bufferIndex+n,_index:o.start._index+i,line:o.end.line,column:o.end.column-s,offset:o.end.offset-s},end:{...o.end}};o.end={...l.start},o.start.offset===o.end.offset?Object.assign(o,l):(e.splice(r,0,["enter",l,t],["exit",l,t]),r+=2)}r++}return e}var zi={};fs(zi,{attentionMarkers:()=>eu,contentInitial:()=>Gh,disable:()=>tu,document:()=>Kh,flow:()=>Yh,flowInitial:()=>Xh,insideSpan:()=>Qh,string:()=>Jh,text:()=>Zh});var Kh={42:Ie,43:Ie,45:Ie,48:Ie,49:Ie,50:Ie,51:Ie,52:Ie,53:Ie,54:Ie,55:Ie,56:Ie,57:Ie,62:Dr},Gh={91:Ii},Xh={[-2]:nr,[-1]:nr,32:nr},Yh={35:Oi,42:Mt,45:[Nr,Mt],60:Bi,61:Nr,95:Mt,96:Mr,126:Mr},Jh={38:Ir,92:Rr},Zh={[-5]:or,[-4]:or,[-3]:or,33:Hi,38:Ir,42:ir,60:[Li,Fi],91:Ni,92:[Mi,Rr],93:It,95:ir,96:Di},Qh={null:[ir,no]},eu={null:[42,95]},tu={null:[]};function co(e,t,r){let o={_bufferIndex:-1,_index:0,line:r&&r.line||1,column:r&&r.column||1,offset:r&&r.offset||0},h={},i=[],n=[],s=[],u=!0,l={attempt:I(C),check:I(L),consume:y,enter:w,exit:v,interrupt:I(L,{interrupt:!0})},p={code:null,containerState:{},defineSkip:c,events:[],now:f,parser:e,previous:null,sliceSerialize:a,sliceStream:d,write:_},m=t.tokenize.call(p,l),g;return t.resolveAll&&i.push(t),p;function _(B){return n=Oe(n,B),S(),n[n.length-1]!==null?[]:(x(t,0),p.events=bt(i,p.events,p),p.events)}function a(B,z){return iu(d(B),z)}function d(B){return ru(n,B)}function f(){let{_bufferIndex:B,_index:z,line:N,column:E,offset:D}=o;return{_bufferIndex:B,_index:z,line:N,column:E,offset:D}}function c(B){h[B.line]=B.column,H()}function S(){let B;for(;o._index<n.length;){let z=n[o._index];if(typeof z=="string")for(B=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===B&&o._bufferIndex<z.length;)b(z.charCodeAt(o._bufferIndex));else b(z)}}function b(B){u=void 0,g=B,m=m(B)}function y(B){X(B)?(o.line++,o.column=1,o.offset+=B===-3?2:1,H()):B!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===n[o._index].length&&(o._bufferIndex=-1,o._index++)),p.previous=B,u=!0}function w(B,z){let N=z||{};return N.type=B,N.start=f(),p.events.push(["enter",N,p]),s.push(N),N}function v(B){let z=s.pop();return z.end=f(),p.events.push(["exit",z,p]),z}function C(B,z){x(B,z.from)}function L(B,z){z.restore()}function I(B,z){return N;function N(E,D,M){let O,A,$,Y;return Array.isArray(E)?le(E):"tokenize"in E?le([E]):T(E);function T(U){return ne;function ne(G){let ce=G!==null&&U[G],fe=G!==null&&U.null,me=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(fe)?fe:fe?[fe]:[]];return le(me)(G)}}function le(U){return O=U,A=0,U.length===0?M:k(U[A])}function k(U){return ne;function ne(G){return Y=R(),$=U,U.partial||(p.currentConstruct=U),U.name&&p.parser.constructs.disable.null.includes(U.name)?j(G):U.tokenize.call(z?Object.assign(Object.create(p),z):p,l,F,j)(G)}}function F(U){return u=!0,B($,Y),D}function j(U){return u=!0,Y.restore(),++A<O.length?k(O[A]):M}}}function x(B,z){B.resolveAll&&!i.includes(B)&&i.push(B),B.resolve&&Se(p.events,z,p.events.length-z,B.resolve(p.events.slice(z),p)),B.resolveTo&&(p.events=B.resolveTo(p.events,p))}function R(){let B=f(),z=p.previous,N=p.currentConstruct,E=p.events.length,D=Array.from(s);return{from:E,restore:M};function M(){o=B,p.previous=z,p.currentConstruct=N,p.events.length=E,s=D,H()}}function H(){o.line in h&&o.column<2&&(o.column=h[o.line],o.offset+=h[o.line]-1)}}function ru(e,t){let r=t.start._index,o=t.start._bufferIndex,h=t.end._index,i=t.end._bufferIndex,n;if(r===h)n=[e[r].slice(o,i)];else{if(n=e.slice(r,h),o>-1){let s=n[0];typeof s=="string"?n[0]=s.slice(o):n.shift()}i>0&&n.push(e[h].slice(0,i))}return n}function iu(e,t){let r=-1,o=[],h;for(;++r<e.length;){let i=e[r],n;if(typeof i=="string")n=i;else switch(i){case-5:{n="\r";break}case-4:{n=`
`;break}case-3:{n=`\r
`;break}case-2:{n=t?" ":"	";break}case-1:{if(!t&&h)continue;n=" ";break}default:n=String.fromCharCode(i)}h=i===-2,o.push(n)}return o.join("")}function Ui(e){let o={constructs:Tr([zi,...(e||{}).extensions||[]]),content:h(Js),defined:[],document:h(Qs),flow:h(io),lazy:{},string:h(so),text:h(oo)};return o;function h(i){return n;function n(s){return co(o,i,s)}}}function Wi(e){for(;!Pr(e););return e}var ho=/[\0\t\n\r]/g;function ji(){let e=1,t="",r=!0,o;return h;function h(i,n,s){let u=[],l,p,m,g,_;for(i=t+(typeof i=="string"?i.toString():new TextDecoder(n||void 0).decode(i)),m=0,t="",r&&(i.charCodeAt(0)===65279&&m++,r=void 0);m<i.length;){if(ho.lastIndex=m,l=ho.exec(i),g=l&&l.index!==void 0?l.index:i.length,_=i.charCodeAt(g),!l){t=i.slice(m);break}if(_===10&&m===g&&o)u.push(-3),o=void 0;else switch(o&&(u.push(-5),o=void 0),m<g&&(u.push(i.slice(m,g)),e+=g-m),_){case 0:{u.push(65533),e++;break}case 9:{for(p=Math.ceil(e/4)*4,u.push(-2);e++<p;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:o=!0,e=1}m=g+1}return s&&(o&&u.push(-5),t&&u.push(t),u.push(null)),u}}var nu=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function uo(e){return e.replace(nu,su)}function su(e,t,r){if(t)return t;if(r.charCodeAt(0)===35){let h=r.charCodeAt(1),i=h===120||h===88;return Lr(r.slice(i?2:1),i?16:10)}return Ut(r)||e}var po={}.hasOwnProperty;function $i(e,t,r){return typeof t!="string"&&(r=t,t=void 0),ou(r)(Wi(Ui(r).document().write(ji()(e,t,!0))))}function ou(e){let t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(Je),autolinkProtocol:I,autolinkEmail:I,atxHeading:i(se),blockQuote:i(G),characterEscape:I,characterReference:I,codeFenced:i(ce),codeFencedFenceInfo:n,codeFencedFenceMeta:n,codeIndented:i(ce,n),codeText:i(fe,n),codeTextData:I,data:I,codeFlowValue:I,definition:i(me),definitionDestinationString:n,definitionLabelString:n,definitionTitleString:n,emphasis:i(Ae),hardBreakEscape:i(je),hardBreakTrailing:i(je),htmlFlow:i(Ue,n),htmlFlowData:I,htmlText:i(Ue,n),htmlTextData:I,image:i(tt),label:n,link:i(Je),listItem:i(xe),listItemValue:g,listOrdered:i(rt,m),listUnordered:i(rt),paragraph:i(lt),reference:T,referenceString:n,resourceDestinationString:n,resourceTitleString:n,setextHeading:i(se),strong:i(Te),thematicBreak:i($e)},exit:{atxHeading:u(),atxHeadingSequence:w,autolink:u(),autolinkEmail:ne,autolinkProtocol:U,blockQuote:u(),characterEscapeValue:x,characterReferenceMarkerHexadecimal:k,characterReferenceMarkerNumeric:k,characterReferenceValue:F,characterReference:j,codeFenced:u(f),codeFencedFence:d,codeFencedFenceInfo:_,codeFencedFenceMeta:a,codeFlowValue:x,codeIndented:u(c),codeText:u(N),codeTextData:x,data:x,definition:u(),definitionDestinationString:y,definitionLabelString:S,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(H),hardBreakTrailing:u(H),htmlFlow:u(B),htmlFlowData:x,htmlText:u(z),htmlTextData:x,image:u(D),label:O,labelText:M,lineEnding:R,link:u(E),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:le,resourceDestinationString:A,resourceTitleString:$,resource:Y,setextHeading:u(L),setextHeadingLineSequence:C,setextHeadingText:v,strong:u(),thematicBreak:u()}};mo(t,(e||{}).mdastExtensions||[]);let r={};return o;function o(W){let K={type:"root",children:[]},Q={stack:[K],tokenStack:[],config:t,enter:s,exit:l,buffer:n,resume:p,data:r},oe=[],ee=-1;for(;++ee<W.length;)if(W[ee][1].type==="listOrdered"||W[ee][1].type==="listUnordered")if(W[ee][0]==="enter")oe.push(ee);else{let Le=oe.pop();ee=h(W,Le,ee)}for(ee=-1;++ee<W.length;){let Le=t[W[ee][0]];po.call(Le,W[ee][1].type)&&Le[W[ee][1].type].call(Object.assign({sliceSerialize:W[ee][2].sliceSerialize},Q),W[ee][1])}if(Q.tokenStack.length>0){let Le=Q.tokenStack[Q.tokenStack.length-1];(Le[1]||fo).call(Q,void 0,Le[0])}for(K.position={start:yt(W.length>0?W[0][1].start:{line:1,column:1,offset:0}),end:yt(W.length>0?W[W.length-2][1].end:{line:1,column:1,offset:0})},ee=-1;++ee<t.transforms.length;)K=t.transforms[ee](K)||K;return K}function h(W,K,Q){let oe=K-1,ee=-1,Le=!1,qe,He,Me,Ve;for(;++oe<=Q;){let ke=W[oe];switch(ke[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ke[0]==="enter"?ee++:ee--,Ve=void 0;break}case"lineEndingBlank":{ke[0]==="enter"&&(qe&&!Ve&&!ee&&!Me&&(Me=oe),Ve=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Ve=void 0}if(!ee&&ke[0]==="enter"&&ke[1].type==="listItemPrefix"||ee===-1&&ke[0]==="exit"&&(ke[1].type==="listUnordered"||ke[1].type==="listOrdered")){if(qe){let it=oe;for(He=void 0;it--;){let Ze=W[it];if(Ze[1].type==="lineEnding"||Ze[1].type==="lineEndingBlank"){if(Ze[0]==="exit")continue;He&&(W[He][1].type="lineEndingBlank",Le=!0),Ze[1].type="lineEnding",He=it}else if(!(Ze[1].type==="linePrefix"||Ze[1].type==="blockQuotePrefix"||Ze[1].type==="blockQuotePrefixWhitespace"||Ze[1].type==="blockQuoteMarker"||Ze[1].type==="listItemIndent"))break}Me&&(!He||Me<He)&&(qe._spread=!0),qe.end=Object.assign({},He?W[He][1].start:ke[1].end),W.splice(He||oe,0,["exit",qe,ke[2]]),oe++,Q++}if(ke[1].type==="listItemPrefix"){let it={type:"listItem",_spread:!1,start:Object.assign({},ke[1].start),end:void 0};qe=it,W.splice(oe,0,["enter",it,ke[2]]),oe++,Q++,Me=void 0,Ve=!0}}}return W[K][1]._spread=Le,Q}function i(W,K){return Q;function Q(oe){s.call(this,W(oe),oe),K&&K.call(this,oe)}}function n(){this.stack.push({type:"fragment",children:[]})}function s(W,K,Q){this.stack[this.stack.length-1].children.push(W),this.stack.push(W),this.tokenStack.push([K,Q||void 0]),W.position={start:yt(K.start),end:void 0}}function u(W){return K;function K(Q){W&&W.call(this,Q),l.call(this,Q)}}function l(W,K){let Q=this.stack.pop(),oe=this.tokenStack.pop();if(oe)oe[0].type!==W.type&&(K?K.call(this,W,oe[0]):(oe[1]||fo).call(this,W,oe[0]));else throw new Error("Cannot close `"+W.type+"` ("+vt({start:W.start,end:W.end})+"): it\u2019s not open");Q.position.end=yt(W.end)}function p(){return Tt(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function g(W){if(this.data.expectingFirstListItemValue){let K=this.stack[this.stack.length-2];K.start=Number.parseInt(this.sliceSerialize(W),10),this.data.expectingFirstListItemValue=void 0}}function _(){let W=this.resume(),K=this.stack[this.stack.length-1];K.lang=W}function a(){let W=this.resume(),K=this.stack[this.stack.length-1];K.meta=W}function d(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function f(){let W=this.resume(),K=this.stack[this.stack.length-1];K.value=W.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function c(){let W=this.resume(),K=this.stack[this.stack.length-1];K.value=W.replace(/(\r?\n|\r)$/g,"")}function S(W){let K=this.resume(),Q=this.stack[this.stack.length-1];Q.label=K,Q.identifier=Re(this.sliceSerialize(W)).toLowerCase()}function b(){let W=this.resume(),K=this.stack[this.stack.length-1];K.title=W}function y(){let W=this.resume(),K=this.stack[this.stack.length-1];K.url=W}function w(W){let K=this.stack[this.stack.length-1];if(!K.depth){let Q=this.sliceSerialize(W).length;K.depth=Q}}function v(){this.data.setextHeadingSlurpLineEnding=!0}function C(W){let K=this.stack[this.stack.length-1];K.depth=this.sliceSerialize(W).codePointAt(0)===61?1:2}function L(){this.data.setextHeadingSlurpLineEnding=void 0}function I(W){let Q=this.stack[this.stack.length-1].children,oe=Q[Q.length-1];(!oe||oe.type!=="text")&&(oe=We(),oe.position={start:yt(W.start),end:void 0},Q.push(oe)),this.stack.push(oe)}function x(W){let K=this.stack.pop();K.value+=this.sliceSerialize(W),K.position.end=yt(W.end)}function R(W){let K=this.stack[this.stack.length-1];if(this.data.atHardBreak){let Q=K.children[K.children.length-1];Q.position.end=yt(W.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(K.type)&&(I.call(this,W),x.call(this,W))}function H(){this.data.atHardBreak=!0}function B(){let W=this.resume(),K=this.stack[this.stack.length-1];K.value=W}function z(){let W=this.resume(),K=this.stack[this.stack.length-1];K.value=W}function N(){let W=this.resume(),K=this.stack[this.stack.length-1];K.value=W}function E(){let W=this.stack[this.stack.length-1];if(this.data.inReference){let K=this.data.referenceType||"shortcut";W.type+="Reference",W.referenceType=K,delete W.url,delete W.title}else delete W.identifier,delete W.label;this.data.referenceType=void 0}function D(){let W=this.stack[this.stack.length-1];if(this.data.inReference){let K=this.data.referenceType||"shortcut";W.type+="Reference",W.referenceType=K,delete W.url,delete W.title}else delete W.identifier,delete W.label;this.data.referenceType=void 0}function M(W){let K=this.sliceSerialize(W),Q=this.stack[this.stack.length-2];Q.label=uo(K),Q.identifier=Re(K).toLowerCase()}function O(){let W=this.stack[this.stack.length-1],K=this.resume(),Q=this.stack[this.stack.length-1];if(this.data.inReference=!0,Q.type==="link"){let oe=W.children;Q.children=oe}else Q.alt=K}function A(){let W=this.resume(),K=this.stack[this.stack.length-1];K.url=W}function $(){let W=this.resume(),K=this.stack[this.stack.length-1];K.title=W}function Y(){this.data.inReference=void 0}function T(){this.data.referenceType="collapsed"}function le(W){let K=this.resume(),Q=this.stack[this.stack.length-1];Q.label=K,Q.identifier=Re(this.sliceSerialize(W)).toLowerCase(),this.data.referenceType="full"}function k(W){this.data.characterReferenceType=W.type}function F(W){let K=this.sliceSerialize(W),Q=this.data.characterReferenceType,oe;Q?(oe=Lr(K,Q==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):oe=Ut(K);let ee=this.stack[this.stack.length-1];ee.value+=oe}function j(W){let K=this.stack.pop();K.position.end=yt(W.end)}function U(W){x.call(this,W);let K=this.stack[this.stack.length-1];K.url=this.sliceSerialize(W)}function ne(W){x.call(this,W);let K=this.stack[this.stack.length-1];K.url="mailto:"+this.sliceSerialize(W)}function G(){return{type:"blockquote",children:[]}}function ce(){return{type:"code",lang:null,meta:null,value:""}}function fe(){return{type:"inlineCode",value:""}}function me(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ae(){return{type:"emphasis",children:[]}}function se(){return{type:"heading",depth:0,children:[]}}function je(){return{type:"break"}}function Ue(){return{type:"html",value:""}}function tt(){return{type:"image",title:null,url:"",alt:null}}function Je(){return{type:"link",title:null,url:"",children:[]}}function rt(W){return{type:"list",ordered:W.type==="listOrdered",start:null,spread:W._spread,children:[]}}function xe(W){return{type:"listItem",spread:W._spread,checked:null,children:[]}}function lt(){return{type:"paragraph",children:[]}}function Te(){return{type:"strong",children:[]}}function We(){return{type:"text",value:""}}function $e(){return{type:"thematicBreak"}}}function yt(e){return{line:e.line,column:e.column,offset:e.offset}}function mo(e,t){let r=-1;for(;++r<t.length;){let o=t[r];Array.isArray(o)?mo(e,o):au(e,o)}}function au(e,t){let r;for(r in t)if(po.call(t,r))switch(r){case"canContainEols":{let o=t[r];o&&e[r].push(...o);break}case"transforms":{let o=t[r];o&&e[r].push(...o);break}case"enter":case"exit":{let o=t[r];o&&Object.assign(e[r],o);break}}}function fo(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+vt({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+vt({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+vt({start:t.start,end:t.end})+") is still open")}function zr(e){let t=this;t.parser=r;function r(o){return $i(o,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function _o(e,t){let r={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,r),e.applyData(t,r)}function go(e,t){let r={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,r),[e.applyData(t,r),{type:"text",value:`
`}]}function vo(e,t){let r=t.value?t.value+`
`:"",o={};t.lang&&(o.className=["language-"+t.lang]);let h={type:"element",tagName:"code",properties:o,children:[{type:"text",value:r}]};return t.meta&&(h.data={meta:t.meta}),e.patch(t,h),h=e.applyData(t,h),h={type:"element",tagName:"pre",properties:{},children:[h]},e.patch(t,h),h}function So(e,t){let r={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function bo(e,t){let r={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function yo(e,t){let r=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",o=String(t.identifier).toUpperCase(),h=Ge(o.toLowerCase()),i=e.footnoteOrder.indexOf(o),n,s=e.footnoteCounts.get(o);s===void 0?(s=0,e.footnoteOrder.push(o),n=e.footnoteOrder.length):n=i+1,s+=1,e.footnoteCounts.set(o,s);let u={type:"element",tagName:"a",properties:{href:"#"+r+"fn-"+h,id:r+"fnref-"+h+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(n)}]};e.patch(t,u);let l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function Co(e,t){let r={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function wo(e,t){if(e.options.allowDangerousHtml){let r={type:"raw",value:t.value};return e.patch(t,r),e.applyData(t,r)}}function Ur(e,t){let r=t.referenceType,o="]";if(r==="collapsed"?o+="[]":r==="full"&&(o+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+o}];let h=e.all(t),i=h[0];i&&i.type==="text"?i.value="["+i.value:h.unshift({type:"text",value:"["});let n=h[h.length-1];return n&&n.type==="text"?n.value+=o:h.push({type:"text",value:o}),h}function xo(e,t){let r=String(t.identifier).toUpperCase(),o=e.definitionById.get(r);if(!o)return Ur(e,t);let h={src:Ge(o.url||""),alt:t.alt};o.title!==null&&o.title!==void 0&&(h.title=o.title);let i={type:"element",tagName:"img",properties:h,children:[]};return e.patch(t,i),e.applyData(t,i)}function ko(e,t){let r={src:Ge(t.url)};t.alt!==null&&t.alt!==void 0&&(r.alt=t.alt),t.title!==null&&t.title!==void 0&&(r.title=t.title);let o={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,o),e.applyData(t,o)}function Eo(e,t){let r={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,r);let o={type:"element",tagName:"code",properties:{},children:[r]};return e.patch(t,o),e.applyData(t,o)}function Ao(e,t){let r=String(t.identifier).toUpperCase(),o=e.definitionById.get(r);if(!o)return Ur(e,t);let h={href:Ge(o.url||"")};o.title!==null&&o.title!==void 0&&(h.title=o.title);let i={type:"element",tagName:"a",properties:h,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function To(e,t){let r={href:Ge(t.url)};t.title!==null&&t.title!==void 0&&(r.title=t.title);let o={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function Lo(e,t,r){let o=e.all(t),h=r?lu(r):Do(t),i={},n=[];if(typeof t.checked=="boolean"){let p=o[0],m;p&&p.type==="element"&&p.tagName==="p"?m=p:(m={type:"element",tagName:"p",properties:{},children:[]},o.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let s=-1;for(;++s<o.length;){let p=o[s];(h||s!==0||p.type!=="element"||p.tagName!=="p")&&n.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!h?n.push(...p.children):n.push(p)}let u=o[o.length-1];u&&(h||u.type!=="element"||u.tagName!=="p")&&n.push({type:"text",value:`
`});let l={type:"element",tagName:"li",properties:i,children:n};return e.patch(t,l),e.applyData(t,l)}function lu(e){let t=!1;if(e.type==="list"){t=e.spread||!1;let r=e.children,o=-1;for(;!t&&++o<r.length;)t=Do(r[o])}return t}function Do(e){let t=e.spread;return t??e.children.length>1}function Ro(e,t){let r={},o=e.all(t),h=-1;for(typeof t.start=="number"&&t.start!==1&&(r.start=t.start);++h<o.length;){let n=o[h];if(n.type==="element"&&n.tagName==="li"&&n.properties&&Array.isArray(n.properties.className)&&n.properties.className.includes("task-list-item")){r.className=["contains-task-list"];break}}let i={type:"element",tagName:t.ordered?"ol":"ul",properties:r,children:e.wrap(o,!0)};return e.patch(t,i),e.applyData(t,i)}function Io(e,t){let r={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Mo(e,t){let r={type:"root",children:e.wrap(e.all(t))};return e.patch(t,r),e.applyData(t,r)}function Oo(e,t){let r={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Po(e,t){let r=e.all(t),o=r.shift(),h=[];if(o){let n={type:"element",tagName:"thead",properties:{},children:e.wrap([o],!0)};e.patch(t.children[0],n),h.push(n)}if(r.length>0){let n={type:"element",tagName:"tbody",properties:{},children:e.wrap(r,!0)},s=zt(t.children[1]),u=kr(t.children[t.children.length-1]);s&&u&&(n.position={start:s,end:u}),h.push(n)}let i={type:"element",tagName:"table",properties:{},children:e.wrap(h,!0)};return e.patch(t,i),e.applyData(t,i)}function Bo(e,t,r){let o=r?r.children:void 0,i=(o?o.indexOf(t):1)===0?"th":"td",n=r&&r.type==="table"?r.align:void 0,s=n?n.length:t.children.length,u=-1,l=[];for(;++u<s;){let m=t.children[u],g={},_=n?n[u]:void 0;_&&(g.align=_);let a={type:"element",tagName:i,properties:g,children:[]};m&&(a.children=e.all(m),e.patch(m,a),a=e.applyData(m,a)),l.push(a)}let p={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,p),e.applyData(t,p)}function Fo(e,t){let r={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function No(e){let t=String(e),r=/\r?\n|\r/g,o=r.exec(t),h=0,i=[];for(;o;)i.push(Ho(t.slice(h,o.index),h>0,!0),o[0]),h=o.index+o[0].length,o=r.exec(t);return i.push(Ho(t.slice(h),h>0,!1)),i.join("")}function Ho(e,t,r){let o=0,h=e.length;if(t){let i=e.codePointAt(o);for(;i===9||i===32;)o++,i=e.codePointAt(o)}if(r){let i=e.codePointAt(h-1);for(;i===9||i===32;)h--,i=e.codePointAt(h-1)}return h>o?e.slice(o,h):""}function zo(e,t){let r={type:"text",value:No(String(t.value))};return e.patch(t,r),e.applyData(t,r)}function Uo(e,t){let r={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,r),e.applyData(t,r)}var Wo={blockquote:_o,break:go,code:vo,delete:So,emphasis:bo,footnoteReference:yo,heading:Co,html:wo,imageReference:xo,image:ko,inlineCode:Eo,linkReference:Ao,link:To,listItem:Lo,list:Ro,paragraph:Io,root:Mo,strong:Oo,table:Po,tableCell:Fo,tableRow:Bo,text:zo,thematicBreak:Uo,toml:Wr,yaml:Wr,definition:Wr,footnoteDefinition:Wr};function Wr(){}var jo=typeof self=="object"?self:globalThis,fu=(e,t)=>{let r=(h,i)=>(e.set(i,h),h),o=h=>{if(e.has(h))return e.get(h);let[i,n]=t[h];switch(i){case 0:case-1:return r(n,h);case 1:{let s=r([],h);for(let u of n)s.push(o(u));return s}case 2:{let s=r({},h);for(let[u,l]of n)s[o(u)]=o(l);return s}case 3:return r(new Date(n),h);case 4:{let{source:s,flags:u}=n;return r(new RegExp(s,u),h)}case 5:{let s=r(new Map,h);for(let[u,l]of n)s.set(o(u),o(l));return s}case 6:{let s=r(new Set,h);for(let u of n)s.add(o(u));return s}case 7:{let{name:s,message:u}=n;return r(new jo[s](u),h)}case 8:return r(BigInt(n),h);case"BigInt":return r(Object(BigInt(n)),h);case"ArrayBuffer":return r(new Uint8Array(n).buffer,n);case"DataView":{let{buffer:s}=new Uint8Array(n);return r(new DataView(s),n)}}return r(new jo[i](n),h)};return o},Ki=e=>fu(new Map,e)(0);var Wt="",{toString:du}={},{keys:pu}=Object,ar=e=>{let t=typeof e;if(t!=="object"||!e)return[0,t];let r=du.call(e).slice(8,-1);switch(r){case"Array":return[1,Wt];case"Object":return[2,Wt];case"Date":return[3,Wt];case"RegExp":return[4,Wt];case"Map":return[5,Wt];case"Set":return[6,Wt];case"DataView":return[1,r]}return r.includes("Array")?[1,r]:r.includes("Error")?[7,r]:[2,r]},$r=([e,t])=>e===0&&(t==="function"||t==="symbol"),mu=(e,t,r,o)=>{let h=(n,s)=>{let u=o.push(n)-1;return r.set(s,u),u},i=n=>{if(r.has(n))return r.get(n);let[s,u]=ar(n);switch(s){case 0:{let p=n;switch(u){case"bigint":s=8,p=n.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);p=null;break;case"undefined":return h([-1],n)}return h([s,p],n)}case 1:{if(u){let g=n;return u==="DataView"?g=new Uint8Array(n.buffer):u==="ArrayBuffer"&&(g=new Uint8Array(n)),h([u,[...g]],n)}let p=[],m=h([s,p],n);for(let g of n)p.push(i(g));return m}case 2:{if(u)switch(u){case"BigInt":return h([u,n.toString()],n);case"Boolean":case"Number":case"String":return h([u,n.valueOf()],n)}if(t&&"toJSON"in n)return i(n.toJSON());let p=[],m=h([s,p],n);for(let g of pu(n))(e||!$r(ar(n[g])))&&p.push([i(g),i(n[g])]);return m}case 3:return h([s,n.toISOString()],n);case 4:{let{source:p,flags:m}=n;return h([s,{source:p,flags:m}],n)}case 5:{let p=[],m=h([s,p],n);for(let[g,_]of n)(e||!($r(ar(g))||$r(ar(_))))&&p.push([i(g),i(_)]);return m}case 6:{let p=[],m=h([s,p],n);for(let g of n)(e||!$r(ar(g)))&&p.push(i(g));return m}}let{message:l}=n;return h([s,{name:u,message:l}],n)};return i},Gi=(e,{json:t,lossy:r}={})=>{let o=[];return mu(!(t||r),!!t,new Map,o)(e),o};var jt=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Ki(Gi(e,t)):structuredClone(e):(e,t)=>Ki(Gi(e,t));function _u(e,t){let r=[{type:"text",value:"\u21A9"}];return t>1&&r.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),r}function gu(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Go(e){let t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=e.options.footnoteBackContent||_u,o=e.options.footnoteBackLabel||gu,h=e.options.footnoteLabel||"Footnotes",i=e.options.footnoteLabelTagName||"h2",n=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[],u=-1;for(;++u<e.footnoteOrder.length;){let l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;let p=e.all(l),m=String(l.identifier).toUpperCase(),g=Ge(m.toLowerCase()),_=0,a=[],d=e.footnoteCounts.get(m);for(;d!==void 0&&++_<=d;){a.length>0&&a.push({type:"text",value:" "});let S=typeof r=="string"?r:r(u,_);typeof S=="string"&&(S={type:"text",value:S}),a.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+g+(_>1?"-"+_:""),dataFootnoteBackref:"",ariaLabel:typeof o=="string"?o:o(u,_),className:["data-footnote-backref"]},children:Array.isArray(S)?S:[S]})}let f=p[p.length-1];if(f&&f.type==="element"&&f.tagName==="p"){let S=f.children[f.children.length-1];S&&S.type==="text"?S.value+=" ":f.children.push({type:"text",value:" "}),f.children.push(...a)}else p.push(...a);let c={type:"element",tagName:"li",properties:{id:t+"fn-"+g},children:e.wrap(p,!0)};e.patch(l,c),s.push(c)}if(s.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...jt(n),id:"footnote-label"},children:[{type:"text",value:h}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:`
`}]}}var Ct=(function(e){if(e==null)return yu;if(typeof e=="function")return qr(e);if(typeof e=="object")return Array.isArray(e)?vu(e):Su(e);if(typeof e=="string")return bu(e);throw new Error("Expected function, string, or object as test")});function vu(e){let t=[],r=-1;for(;++r<e.length;)t[r]=Ct(e[r]);return qr(o);function o(...h){let i=-1;for(;++i<t.length;)if(t[i].apply(this,h))return!0;return!1}}function Su(e){let t=e;return qr(r);function r(o){let h=o,i;for(i in e)if(h[i]!==t[i])return!1;return!0}}function bu(e){return qr(t);function t(r){return r&&r.type===e}}function qr(e){return t;function t(r,o,h){return!!(Cu(r)&&e.call(this,r,typeof o=="number"?o:void 0,h||void 0))}}function yu(){return!0}function Cu(e){return e!==null&&typeof e=="object"&&"type"in e}var Xo=[],Vr=!0,Ot=!1,Kr="skip";function lr(e,t,r,o){let h;typeof t=="function"&&typeof r!="function"?(o=r,r=t):h=t;let i=Ct(h),n=o?-1:1;s(e,void 0,[])();function s(u,l,p){let m=u&&typeof u=="object"?u:{};if(typeof m.type=="string"){let _=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(u.type+(_?"<"+_+">":""))+")"})}return g;function g(){let _=Xo,a,d,f;if((!t||i(u,l,p[p.length-1]||void 0))&&(_=wu(r(u,p)),_[0]===Ot))return _;if("children"in u&&u.children){let c=u;if(c.children&&_[0]!==Kr)for(d=(o?c.children.length:-1)+n,f=p.concat(c);d>-1&&d<c.children.length;){let S=c.children[d];if(a=s(S,d,f)(),a[0]===Ot)return a;d=typeof a[1]=="number"?a[1]:d+n}}return _}}}function wu(e){return Array.isArray(e)?e:typeof e=="number"?[Vr,e]:e==null?Xo:[e]}function Pt(e,t,r,o){let h,i,n;typeof t=="function"&&typeof r!="function"?(i=void 0,n=t,h=r):(i=t,n=r,h=o),lr(e,i,s,h);function s(u,l){let p=l[l.length-1],m=p?p.children.indexOf(u):void 0;return n(u,m,p)}}var Xi={}.hasOwnProperty,xu={};function Jo(e,t){let r=t||xu,o=new Map,h=new Map,i=new Map,n={...Wo,...r.handlers},s={all:l,applyData:Eu,definitionById:o,footnoteById:h,footnoteCounts:i,footnoteOrder:[],handlers:n,one:u,options:r,patch:ku,wrap:Tu};return Pt(e,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){let m=p.type==="definition"?o:h,g=String(p.identifier).toUpperCase();m.has(g)||m.set(g,p)}}),s;function u(p,m){let g=p.type,_=s.handlers[g];if(Xi.call(s.handlers,g)&&_)return _(s,p,m);if(s.options.passThrough&&s.options.passThrough.includes(g)){if("children"in p){let{children:d,...f}=p,c=jt(f);return c.children=s.all(p),c}return jt(p)}return(s.options.unknownHandler||Au)(s,p,m)}function l(p){let m=[];if("children"in p){let g=p.children,_=-1;for(;++_<g.length;){let a=s.one(g[_],p);if(a){if(_&&g[_-1].type==="break"&&(!Array.isArray(a)&&a.type==="text"&&(a.value=Yo(a.value)),!Array.isArray(a)&&a.type==="element")){let d=a.children[0];d&&d.type==="text"&&(d.value=Yo(d.value))}Array.isArray(a)?m.push(...a):m.push(a)}}}return m}}function ku(e,t){e.position&&(t.position=wi(e))}function Eu(e,t){let r=t;if(e&&e.data){let o=e.data.hName,h=e.data.hChildren,i=e.data.hProperties;if(typeof o=="string")if(r.type==="element")r.tagName=o;else{let n="children"in r?r.children:[r];r={type:"element",tagName:o,properties:{},children:n}}r.type==="element"&&i&&Object.assign(r.properties,jt(i)),"children"in r&&r.children&&h!==null&&h!==void 0&&(r.children=h)}return r}function Au(e,t){let r=t.data||{},o="value"in t&&!(Xi.call(r,"hProperties")||Xi.call(r,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,o),e.applyData(t,o)}function Tu(e,t){let r=[],o=-1;for(t&&r.push({type:"text",value:`
`});++o<e.length;)o&&r.push({type:"text",value:`
`}),r.push(e[o]);return t&&e.length>0&&r.push({type:"text",value:`
`}),r}function Yo(e){let t=0,r=e.charCodeAt(t);for(;r===9||r===32;)t++,r=e.charCodeAt(t);return e.slice(t)}function Gr(e,t){let r=Jo(e,t),o=r.one(e,void 0),h=Go(r),i=Array.isArray(o)?{type:"root",children:o}:o||{type:"root",children:[]};return h&&("children"in i,i.children.push({type:"text",value:`
`},h)),i}function Xr(e,t){return e&&"run"in e?async function(r,o){let h=Gr(r,{file:o,...t});await e.run(h,o)}:function(r,o){return Gr(r,{file:o,...e||t})}}function Yi(e){if(e)throw e}var Zr=_t(oa(),1);function cr(e){if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ji(){let e=[],t={run:r,use:o};return t;function r(...h){let i=-1,n=h.pop();if(typeof n!="function")throw new TypeError("Expected function as last argument, not "+n);s(null,...h);function s(u,...l){let p=e[++i],m=-1;if(u){n(u);return}for(;++m<h.length;)(l[m]===null||l[m]===void 0)&&(l[m]=h[m]);h=l,p?aa(p,s)(...l):n(null,...l)}}function o(h){if(typeof h!="function")throw new TypeError("Expected `middelware` to be a function, not "+h);return e.push(h),t}}function aa(e,t){let r;return o;function o(...n){let s=e.length>n.length,u;s&&n.push(h);try{u=e.apply(this,n)}catch(l){let p=l;if(s&&r)throw p;return h(p)}s||(u&&u.then&&typeof u.then=="function"?u.then(i,h):u instanceof Error?h(u):i(u))}function h(n,...s){r||(r=!0,t(n,...s))}function i(n){h(null,n)}}var Qe={basename:Lu,dirname:Du,extname:Ru,join:Iu,sep:"/"};function Lu(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');hr(e);let r=0,o=-1,h=e.length,i;if(t===void 0||t.length===0||t.length>e.length){for(;h--;)if(e.codePointAt(h)===47){if(i){r=h+1;break}}else o<0&&(i=!0,o=h+1);return o<0?"":e.slice(r,o)}if(t===e)return"";let n=-1,s=t.length-1;for(;h--;)if(e.codePointAt(h)===47){if(i){r=h+1;break}}else n<0&&(i=!0,n=h+1),s>-1&&(e.codePointAt(h)===t.codePointAt(s--)?s<0&&(o=h):(s=-1,o=n));return r===o?o=n:o<0&&(o=e.length),e.slice(r,o)}function Du(e){if(hr(e),e.length===0)return".";let t=-1,r=e.length,o;for(;--r;)if(e.codePointAt(r)===47){if(o){t=r;break}}else o||(o=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Ru(e){hr(e);let t=e.length,r=-1,o=0,h=-1,i=0,n;for(;t--;){let s=e.codePointAt(t);if(s===47){if(n){o=t+1;break}continue}r<0&&(n=!0,r=t+1),s===46?h<0?h=t:i!==1&&(i=1):h>-1&&(i=-1)}return h<0||r<0||i===0||i===1&&h===r-1&&h===o+1?"":e.slice(h,r)}function Iu(...e){let t=-1,r;for(;++t<e.length;)hr(e[t]),e[t]&&(r=r===void 0?e[t]:r+"/"+e[t]);return r===void 0?".":Mu(r)}function Mu(e){hr(e);let t=e.codePointAt(0)===47,r=Ou(e,!t);return r.length===0&&!t&&(r="."),r.length>0&&e.codePointAt(e.length-1)===47&&(r+="/"),t?"/"+r:r}function Ou(e,t){let r="",o=0,h=-1,i=0,n=-1,s,u;for(;++n<=e.length;){if(n<e.length)s=e.codePointAt(n);else{if(s===47)break;s=47}if(s===47){if(!(h===n-1||i===1))if(h!==n-1&&i===2){if(r.length<2||o!==2||r.codePointAt(r.length-1)!==46||r.codePointAt(r.length-2)!==46){if(r.length>2){if(u=r.lastIndexOf("/"),u!==r.length-1){u<0?(r="",o=0):(r=r.slice(0,u),o=r.length-1-r.lastIndexOf("/")),h=n,i=0;continue}}else if(r.length>0){r="",o=0,h=n,i=0;continue}}t&&(r=r.length>0?r+"/..":"..",o=2)}else r.length>0?r+="/"+e.slice(h+1,n):r=e.slice(h+1,n),o=n-h-1;h=n,i=0}else s===46&&i>-1?i++:i=-1}return r}function hr(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}var la={cwd:Pu};function Pu(){return"/"}function $t(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function ca(e){if(typeof e=="string")e=new URL(e);else if(!$t(e)){let t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){let t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Bu(e)}function Bu(e){if(e.hostname!==""){let o=new TypeError('File URL host must be "localhost" or empty on darwin');throw o.code="ERR_INVALID_FILE_URL_HOST",o}let t=e.pathname,r=-1;for(;++r<t.length;)if(t.codePointAt(r)===37&&t.codePointAt(r+1)===50){let o=t.codePointAt(r+2);if(o===70||o===102){let h=new TypeError("File URL path must not include encoded / characters");throw h.code="ERR_INVALID_FILE_URL_PATH",h}}return decodeURIComponent(t)}var Zi=["history","path","basename","stem","extname","dirname"],Bt=class{constructor(t){let r;t?$t(t)?r={path:t}:typeof t=="string"||Fu(t)?r={value:t}:r=t:r={},this.cwd="cwd"in r?"":la.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o=-1;for(;++o<Zi.length;){let i=Zi[o];i in r&&r[i]!==void 0&&r[i]!==null&&(this[i]=i==="history"?[...r[i]]:r[i])}let h;for(h in r)Zi.includes(h)||(this[h]=r[h])}get basename(){return typeof this.path=="string"?Qe.basename(this.path):void 0}set basename(t){en(t,"basename"),Qi(t,"basename"),this.path=Qe.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Qe.dirname(this.path):void 0}set dirname(t){ha(this.basename,"dirname"),this.path=Qe.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Qe.extname(this.path):void 0}set extname(t){if(Qi(t,"extname"),ha(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Qe.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){$t(t)&&(t=ca(t)),en(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Qe.basename(this.path,this.extname):void 0}set stem(t){en(t,"stem"),Qi(t,"stem"),this.path=Qe.join(this.dirname||"",t+(this.extname||""))}fail(t,r,o){let h=this.message(t,r,o);throw h.fatal=!0,h}info(t,r,o){let h=this.message(t,r,o);return h.fatal=void 0,h}message(t,r,o){let h=new ve(t,r,o);return this.path&&(h.name=this.path+":"+h.name,h.file=this.path),h.fatal=!1,this.messages.push(h),h}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}};function Qi(e,t){if(e&&e.includes(Qe.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Qe.sep+"`")}function en(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function ha(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Fu(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}var ua=(function(e){let o=this.constructor.prototype,h=o[e],i=function(){return h.apply(i,arguments)};return Object.setPrototypeOf(i,o),i});var Hu={}.hasOwnProperty,sn=class e extends ua{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ji()}copy(){let t=new e,r=-1;for(;++r<this.attachers.length;){let o=this.attachers[r];t.use(...o)}return t.data((0,Zr.default)(!0,{},this.namespace)),t}data(t,r){return typeof t=="string"?arguments.length===2?(nn("data",this.frozen),this.namespace[t]=r,this):Hu.call(this.namespace,t)&&this.namespace[t]||void 0:t?(nn("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;let t=this;for(;++this.freezeIndex<this.attachers.length;){let[r,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);let h=r.call(t,...o);typeof h=="function"&&this.transformers.use(h)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();let r=Jr(t),o=this.parser||this.Parser;return tn("parse",o),o(String(r),r)}process(t,r){let o=this;return this.freeze(),tn("process",this.parser||this.Parser),rn("process",this.compiler||this.Compiler),r?h(void 0,r):new Promise(h);function h(i,n){let s=Jr(t),u=o.parse(s);o.run(u,s,function(p,m,g){if(p||!m||!g)return l(p);let _=m,a=o.stringify(_,g);zu(a)?g.value=a:g.result=a,l(p,g)});function l(p,m){p||!m?n(p):i?i(m):r(void 0,m)}}}processSync(t){let r=!1,o;return this.freeze(),tn("processSync",this.parser||this.Parser),rn("processSync",this.compiler||this.Compiler),this.process(t,h),da("processSync","process",r),o;function h(i,n){r=!0,Yi(i),o=n}}run(t,r,o){fa(t),this.freeze();let h=this.transformers;return!o&&typeof r=="function"&&(o=r,r=void 0),o?i(void 0,o):new Promise(i);function i(n,s){let u=Jr(r);h.run(t,u,l);function l(p,m,g){let _=m||t;p?s(p):n?n(_):o(void 0,_,g)}}}runSync(t,r){let o=!1,h;return this.run(t,r,i),da("runSync","run",o),h;function i(n,s){Yi(n),h=s,o=!0}}stringify(t,r){this.freeze();let o=Jr(r),h=this.compiler||this.Compiler;return rn("stringify",h),fa(t),h(t,o)}use(t,...r){let o=this.attachers,h=this.namespace;if(nn("use",this.frozen),t!=null)if(typeof t=="function")u(t,r);else if(typeof t=="object")Array.isArray(t)?s(t):n(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function i(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){let[p,...m]=l;u(p,m)}else n(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function n(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(l.plugins),l.settings&&(h.settings=(0,Zr.default)(!0,h.settings,l.settings))}function s(l){let p=-1;if(l!=null)if(Array.isArray(l))for(;++p<l.length;){let m=l[p];i(m)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,p){let m=-1,g=-1;for(;++m<o.length;)if(o[m][0]===l){g=m;break}if(g===-1)o.push([l,...p]);else if(p.length>0){let[_,...a]=p,d=o[g][1];cr(d)&&cr(_)&&(_=(0,Zr.default)(!0,d,_)),o[g]=[l,_,...a]}}}},on=new sn().freeze();function tn(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function rn(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function nn(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function fa(e){if(!cr(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function da(e,t,r){if(!r)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Jr(e){return Nu(e)?e:new Bt(e)}function Nu(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function zu(e){return typeof e=="string"||Uu(e)}function Uu(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}var Wu="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",pa=[],ma={allowDangerousHtml:!0},ju=/^(https?|ircs?|mailto|xmpp)$/i,$u=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function an(e){let t=qu(e),r=Vu(e);return Ku(t.runSync(t.parse(r),r),e)}function qu(e){let t=e.rehypePlugins||pa,r=e.remarkPlugins||pa,o=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...ma}:ma;return on().use(zr).use(r).use(Xr,o).use(t)}function Vu(e){let t=e.children||"",r=new Bt;return typeof t=="string"?r.value=t:(""+t,void 0),r}function Ku(e,t){let r=t.allowedElements,o=t.allowElement,h=t.components,i=t.disallowedElements,n=t.skipHtml,s=t.unwrapDisallowed,u=t.urlTransform||ga;for(let p of $u)Object.hasOwn(t,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+Wu+p.id,void 0);return r&&i&&void 0,Pt(e,l),Ei(e,{Fragment:qt.Fragment,components:h,ignoreInvalidStyle:!0,jsx:qt.jsx,jsxs:qt.jsxs,passKeys:!0,passNode:!0});function l(p,m,g){if(p.type==="raw"&&g&&typeof m=="number")return n?g.children.splice(m,1):g.children[m]={type:"text",value:p.value},m;if(p.type==="element"){let _;for(_ in tr)if(Object.hasOwn(tr,_)&&Object.hasOwn(p.properties,_)){let a=p.properties[_],d=tr[_];(d===null||d.includes(p.tagName))&&(p.properties[_]=u(String(a||""),_,p))}}if(p.type==="element"){let _=r?!r.includes(p.tagName):i?i.includes(p.tagName):!1;if(!_&&o&&typeof m=="number"&&(_=!o(p,m,g)),_&&g&&typeof m=="number")return s&&p.children?g.children.splice(m,1,...p.children):g.children.splice(m,1),m}}}function ga(e){let t=e.indexOf(":"),r=e.indexOf("?"),o=e.indexOf("#"),h=e.indexOf("/");return t===-1||h!==-1&&t>h||r!==-1&&t>r||o!==-1&&t>o||ju.test(e.slice(0,t))?e:""}function ln(e,t){let r=String(e);if(typeof t!="string")throw new TypeError("Expected character");let o=0,h=r.indexOf(t);for(;h!==-1;)o++,h=r.indexOf(t,h+t.length);return o}function cn(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function hn(e,t,r){let h=Ct((r||{}).ignore||[]),i=Gu(t),n=-1;for(;++n<i.length;)lr(e,"text",s);function s(l,p){let m=-1,g;for(;++m<p.length;){let _=p[m],a=g?g.children:void 0;if(h(_,a?a.indexOf(_):void 0,g))return;g=_}if(g)return u(l,p)}function u(l,p){let m=p[p.length-1],g=i[n][0],_=i[n][1],a=0,f=m.children.indexOf(l),c=!1,S=[];g.lastIndex=0;let b=g.exec(l.value);for(;b;){let y=b.index,w={index:b.index,input:b.input,stack:[...p,l]},v=_(...b,w);if(typeof v=="string"&&(v=v.length>0?{type:"text",value:v}:void 0),v===!1?g.lastIndex=y+1:(a!==y&&S.push({type:"text",value:l.value.slice(a,y)}),Array.isArray(v)?S.push(...v):v&&S.push(v),a=y+b[0].length,c=!0),!g.global)break;b=g.exec(l.value)}return c?(a<l.value.length&&S.push({type:"text",value:l.value.slice(a)}),m.children.splice(f,1,...S)):S=[l],f+S.length}}function Gu(e){let t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");let r=!e[0]||Array.isArray(e[0])?e:[e],o=-1;for(;++o<r.length;){let h=r[o];t.push([Xu(h[0]),Yu(h[1])])}return t}function Xu(e){return typeof e=="string"?new RegExp(cn(e),"g"):e}function Yu(e){return typeof e=="function"?e:function(){return e}}var un="phrasing",fn=["autolink","link","image","label"];function pn(){return{transforms:[rf],enter:{literalAutolink:Ju,literalAutolinkEmail:dn,literalAutolinkHttp:dn,literalAutolinkWww:dn},exit:{literalAutolink:tf,literalAutolinkEmail:ef,literalAutolinkHttp:Zu,literalAutolinkWww:Qu}}}function mn(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:un,notInConstruct:fn},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:un,notInConstruct:fn},{character:":",before:"[ps]",after:"\\/",inConstruct:un,notInConstruct:fn}]}}function Ju(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function dn(e){this.config.enter.autolinkProtocol.call(this,e)}function Zu(e){this.config.exit.autolinkProtocol.call(this,e)}function Qu(e){this.config.exit.data.call(this,e);let t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function ef(e){this.config.exit.autolinkEmail.call(this,e)}function tf(e){this.exit(e)}function rf(e){hn(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,nf],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,sf]],{ignore:["link","linkReference"]})}function nf(e,t,r,o,h){let i="";if(!va(h)||(/^w/i.test(t)&&(r=t+r,t="",i="http://"),!of(r)))return!1;let n=af(r+o);if(!n[0])return!1;let s={type:"link",title:null,url:i+t+n[0],children:[{type:"text",value:t+n[0]}]};return n[1]?[s,{type:"text",value:n[1]}]:s}function sf(e,t,r,o){return!va(o,!0)||/[-\d_]$/.test(r)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+r,children:[{type:"text",value:t+"@"+r}]}}function of(e){let t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function af(e){let t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let r=t[0],o=r.indexOf(")"),h=ln(e,"("),i=ln(e,")");for(;o!==-1&&h>i;)e+=r.slice(0,o+1),r=r.slice(o+1),o=r.indexOf(")"),i++;return[e,r]}function va(e,t){let r=e.input.charCodeAt(e.index-1);return(e.index===0||st(r)||Dt(r))&&(!t||r!==47)}Sa.peek=_f;function lf(){this.buffer()}function cf(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function hf(){this.buffer()}function uf(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function ff(e){let t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=Re(this.sliceSerialize(e)).toLowerCase(),r.label=t}function df(e){this.exit(e)}function pf(e){let t=this.resume(),r=this.stack[this.stack.length-1];r.type,r.identifier=Re(this.sliceSerialize(e)).toLowerCase(),r.label=t}function mf(e){this.exit(e)}function _f(){return"["}function Sa(e,t,r,o){let h=r.createTracker(o),i=h.move("[^"),n=r.enter("footnoteReference"),s=r.enter("reference");return i+=h.move(r.safe(r.associationId(e),{after:"]",before:i})),s(),n(),i+=h.move("]"),i}function _n(){return{enter:{gfmFootnoteCallString:lf,gfmFootnoteCall:cf,gfmFootnoteDefinitionLabelString:hf,gfmFootnoteDefinition:uf},exit:{gfmFootnoteCallString:ff,gfmFootnoteCall:df,gfmFootnoteDefinitionLabelString:pf,gfmFootnoteDefinition:mf}}}function gn(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:r,footnoteReference:Sa},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function r(o,h,i,n){let s=i.createTracker(n),u=s.move("[^"),l=i.enter("footnoteDefinition"),p=i.enter("label");return u+=s.move(i.safe(i.associationId(o),{before:u,after:"]"})),p(),u+=s.move("]:"),o.children&&o.children.length>0&&(s.shift(4),u+=s.move((t?`
`:" ")+i.indentLines(i.containerFlow(o,s.current()),t?ba:gf))),l(),u}}function gf(e,t,r){return t===0?e:ba(e,t,r)}function ba(e,t,r){return(r?"":"    ")+e}var vf=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];ya.peek=yf;function vn(){return{canContainEols:["delete"],enter:{strikethrough:Sf},exit:{strikethrough:bf}}}function Sn(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:vf}],handlers:{delete:ya}}}function Sf(e){this.enter({type:"delete",children:[]},e)}function bf(e){this.exit(e)}function ya(e,t,r,o){let h=r.createTracker(o),i=r.enter("strikethrough"),n=h.move("~~");return n+=r.containerPhrasing(e,{...h.current(),before:n,after:"~"}),n+=h.move("~~"),i(),n}function yf(){return"~"}function Cf(e){return e.length}function wa(e,t){let r=t||{},o=(r.align||[]).concat(),h=r.stringLength||Cf,i=[],n=[],s=[],u=[],l=0,p=-1;for(;++p<e.length;){let d=[],f=[],c=-1;for(e[p].length>l&&(l=e[p].length);++c<e[p].length;){let S=wf(e[p][c]);if(r.alignDelimiters!==!1){let b=h(S);f[c]=b,(u[c]===void 0||b>u[c])&&(u[c]=b)}d.push(S)}n[p]=d,s[p]=f}let m=-1;if(typeof o=="object"&&"length"in o)for(;++m<l;)i[m]=Ca(o[m]);else{let d=Ca(o);for(;++m<l;)i[m]=d}m=-1;let g=[],_=[];for(;++m<l;){let d=i[m],f="",c="";d===99?(f=":",c=":"):d===108?f=":":d===114&&(c=":");let S=r.alignDelimiters===!1?1:Math.max(1,u[m]-f.length-c.length),b=f+"-".repeat(S)+c;r.alignDelimiters!==!1&&(S=f.length+S+c.length,S>u[m]&&(u[m]=S),_[m]=S),g[m]=b}n.splice(1,0,g),s.splice(1,0,_),p=-1;let a=[];for(;++p<n.length;){let d=n[p],f=s[p];m=-1;let c=[];for(;++m<l;){let S=d[m]||"",b="",y="";if(r.alignDelimiters!==!1){let w=u[m]-(f[m]||0),v=i[m];v===114?b=" ".repeat(w):v===99?w%2?(b=" ".repeat(w/2+.5),y=" ".repeat(w/2-.5)):(b=" ".repeat(w/2),y=b):y=" ".repeat(w)}r.delimiterStart!==!1&&!m&&c.push("|"),r.padding!==!1&&!(r.alignDelimiters===!1&&S==="")&&(r.delimiterStart!==!1||m)&&c.push(" "),r.alignDelimiters!==!1&&c.push(b),c.push(S),r.alignDelimiters!==!1&&c.push(y),r.padding!==!1&&c.push(" "),(r.delimiterEnd!==!1||m!==l-1)&&c.push("|")}a.push(r.delimiterEnd===!1?c.join("").replace(/ +$/,""):c.join(""))}return a.join(`
`)}function wf(e){return e==null?"":String(e)}function Ca(e){let t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function xa(e,t,r,o){let h=r.enter("blockquote"),i=r.createTracker(o);i.move("> "),i.shift(2);let n=r.indentLines(r.containerFlow(e,i.current()),xf);return h(),n}function xf(e,t,r){return">"+(r?"":" ")+e}function Ea(e,t){return ka(e,t.inConstruct,!0)&&!ka(e,t.notInConstruct,!1)}function ka(e,t,r){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return r;let o=-1;for(;++o<t.length;)if(e.includes(t[o]))return!0;return!1}function bn(e,t,r,o){let h=-1;for(;++h<r.unsafe.length;)if(r.unsafe[h].character===`
`&&Ea(r.stack,r.unsafe[h]))return/[ \t]/.test(o.before)?"":" ";return`\\
`}function Aa(e,t){let r=String(e),o=r.indexOf(t),h=o,i=0,n=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;o!==-1;)o===h?++i>n&&(n=i):i=1,h=o+t.length,o=r.indexOf(t,h);return n}function Ta(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function La(e){let t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function Da(e,t,r,o){let h=La(r),i=e.value||"",n=h==="`"?"GraveAccent":"Tilde";if(Ta(e,r)){let m=r.enter("codeIndented"),g=r.indentLines(i,kf);return m(),g}let s=r.createTracker(o),u=h.repeat(Math.max(Aa(i,h)+1,3)),l=r.enter("codeFenced"),p=s.move(u);if(e.lang){let m=r.enter(`codeFencedLang${n}`);p+=s.move(r.safe(e.lang,{before:p,after:" ",encode:["`"],...s.current()})),m()}if(e.lang&&e.meta){let m=r.enter(`codeFencedMeta${n}`);p+=s.move(" "),p+=s.move(r.safe(e.meta,{before:p,after:`
`,encode:["`"],...s.current()})),m()}return p+=s.move(`
`),i&&(p+=s.move(i+`
`)),p+=s.move(u),l(),p}function kf(e,t,r){return(r?"":"    ")+e}function Vt(e){let t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function Ra(e,t,r,o){let h=Vt(r),i=h==='"'?"Quote":"Apostrophe",n=r.enter("definition"),s=r.enter("label"),u=r.createTracker(o),l=u.move("[");return l+=u.move(r.safe(r.associationId(e),{before:l,after:"]",...u.current()})),l+=u.move("]: "),s(),!e.url||/[\0- \u007F]/.test(e.url)?(s=r.enter("destinationLiteral"),l+=u.move("<"),l+=u.move(r.safe(e.url,{before:l,after:">",...u.current()})),l+=u.move(">")):(s=r.enter("destinationRaw"),l+=u.move(r.safe(e.url,{before:l,after:e.title?" ":`
`,...u.current()}))),s(),e.title&&(s=r.enter(`title${i}`),l+=u.move(" "+h),l+=u.move(r.safe(e.title,{before:l,after:h,...u.current()})),l+=u.move(h),s()),n(),l}function Ia(e){let t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function wt(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Kt(e,t,r){let o=dt(e),h=dt(t);return o===void 0?h===void 0?r==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:h===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:o===1?h===void 0?{inside:!1,outside:!1}:h===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:h===void 0?{inside:!1,outside:!1}:h===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}yn.peek=Ef;function yn(e,t,r,o){let h=Ia(r),i=r.enter("emphasis"),n=r.createTracker(o),s=n.move(h),u=n.move(r.containerPhrasing(e,{after:h,before:s,...n.current()})),l=u.charCodeAt(0),p=Kt(o.before.charCodeAt(o.before.length-1),l,h);p.inside&&(u=wt(l)+u.slice(1));let m=u.charCodeAt(u.length-1),g=Kt(o.after.charCodeAt(0),m,h);g.inside&&(u=u.slice(0,-1)+wt(m));let _=n.move(h);return i(),r.attentionEncodeSurroundingInfo={after:g.outside,before:p.outside},s+u+_}function Ef(e,t,r){return r.options.emphasis||"*"}function Ma(e,t){let r=!1;return Pt(e,function(o){if("value"in o&&/\r?\n|\r/.test(o.value)||o.type==="break")return r=!0,Ot}),!!((!e.depth||e.depth<3)&&Tt(e)&&(t.options.setext||r))}function Oa(e,t,r,o){let h=Math.max(Math.min(6,e.depth||1),1),i=r.createTracker(o);if(Ma(e,r)){let p=r.enter("headingSetext"),m=r.enter("phrasing"),g=r.containerPhrasing(e,{...i.current(),before:`
`,after:`
`});return m(),p(),g+`
`+(h===1?"=":"-").repeat(g.length-(Math.max(g.lastIndexOf("\r"),g.lastIndexOf(`
`))+1))}let n="#".repeat(h),s=r.enter("headingAtx"),u=r.enter("phrasing");i.move(n+" ");let l=r.containerPhrasing(e,{before:"# ",after:`
`,...i.current()});return/^[\t ]/.test(l)&&(l=wt(l.charCodeAt(0))+l.slice(1)),l=l?n+" "+l:n,r.options.closeAtx&&(l+=" "+n),u(),s(),l}Cn.peek=Af;function Cn(e){return e.value||""}function Af(){return"<"}wn.peek=Tf;function wn(e,t,r,o){let h=Vt(r),i=h==='"'?"Quote":"Apostrophe",n=r.enter("image"),s=r.enter("label"),u=r.createTracker(o),l=u.move("![");return l+=u.move(r.safe(e.alt,{before:l,after:"]",...u.current()})),l+=u.move("]("),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=r.enter("destinationLiteral"),l+=u.move("<"),l+=u.move(r.safe(e.url,{before:l,after:">",...u.current()})),l+=u.move(">")):(s=r.enter("destinationRaw"),l+=u.move(r.safe(e.url,{before:l,after:e.title?" ":")",...u.current()}))),s(),e.title&&(s=r.enter(`title${i}`),l+=u.move(" "+h),l+=u.move(r.safe(e.title,{before:l,after:h,...u.current()})),l+=u.move(h),s()),l+=u.move(")"),n(),l}function Tf(){return"!"}xn.peek=Lf;function xn(e,t,r,o){let h=e.referenceType,i=r.enter("imageReference"),n=r.enter("label"),s=r.createTracker(o),u=s.move("!["),l=r.safe(e.alt,{before:u,after:"]",...s.current()});u+=s.move(l+"]["),n();let p=r.stack;r.stack=[],n=r.enter("reference");let m=r.safe(r.associationId(e),{before:u,after:"]",...s.current()});return n(),r.stack=p,i(),h==="full"||!l||l!==m?u+=s.move(m+"]"):h==="shortcut"?u=u.slice(0,-1):u+=s.move("]"),u}function Lf(){return"!"}kn.peek=Df;function kn(e,t,r){let o=e.value||"",h="`",i=-1;for(;new RegExp("(^|[^`])"+h+"([^`]|$)").test(o);)h+="`";for(/[^ \r\n]/.test(o)&&(/^[ \r\n]/.test(o)&&/[ \r\n]$/.test(o)||/^`|`$/.test(o))&&(o=" "+o+" ");++i<r.unsafe.length;){let n=r.unsafe[i],s=r.compilePattern(n),u;if(n.atBreak)for(;u=s.exec(o);){let l=u.index;o.charCodeAt(l)===10&&o.charCodeAt(l-1)===13&&l--,o=o.slice(0,l)+" "+o.slice(u.index+1)}}return h+o+h}function Df(){return"`"}function En(e,t){let r=Tt(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(r===e.url||"mailto:"+r===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}An.peek=Rf;function An(e,t,r,o){let h=Vt(r),i=h==='"'?"Quote":"Apostrophe",n=r.createTracker(o),s,u;if(En(e,r)){let p=r.stack;r.stack=[],s=r.enter("autolink");let m=n.move("<");return m+=n.move(r.containerPhrasing(e,{before:m,after:">",...n.current()})),m+=n.move(">"),s(),r.stack=p,m}s=r.enter("link"),u=r.enter("label");let l=n.move("[");return l+=n.move(r.containerPhrasing(e,{before:l,after:"](",...n.current()})),l+=n.move("]("),u(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(u=r.enter("destinationLiteral"),l+=n.move("<"),l+=n.move(r.safe(e.url,{before:l,after:">",...n.current()})),l+=n.move(">")):(u=r.enter("destinationRaw"),l+=n.move(r.safe(e.url,{before:l,after:e.title?" ":")",...n.current()}))),u(),e.title&&(u=r.enter(`title${i}`),l+=n.move(" "+h),l+=n.move(r.safe(e.title,{before:l,after:h,...n.current()})),l+=n.move(h),u()),l+=n.move(")"),s(),l}function Rf(e,t,r){return En(e,r)?"<":"["}Tn.peek=If;function Tn(e,t,r,o){let h=e.referenceType,i=r.enter("linkReference"),n=r.enter("label"),s=r.createTracker(o),u=s.move("["),l=r.containerPhrasing(e,{before:u,after:"]",...s.current()});u+=s.move(l+"]["),n();let p=r.stack;r.stack=[],n=r.enter("reference");let m=r.safe(r.associationId(e),{before:u,after:"]",...s.current()});return n(),r.stack=p,i(),h==="full"||!l||l!==m?u+=s.move(m+"]"):h==="shortcut"?u=u.slice(0,-1):u+=s.move("]"),u}function If(){return"["}function Gt(e){let t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Pa(e){let t=Gt(e),r=e.options.bulletOther;if(!r)return t==="*"?"-":"*";if(r!=="*"&&r!=="+"&&r!=="-")throw new Error("Cannot serialize items with `"+r+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(r===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+r+"`) to be different");return r}function Ba(e){let t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function Qr(e){let t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Fa(e,t,r,o){let h=r.enter("list"),i=r.bulletCurrent,n=e.ordered?Ba(r):Gt(r),s=e.ordered?n==="."?")":".":Pa(r),u=t&&r.bulletLastUsed?n===r.bulletLastUsed:!1;if(!e.ordered){let p=e.children?e.children[0]:void 0;if((n==="*"||n==="-")&&p&&(!p.children||!p.children[0])&&r.stack[r.stack.length-1]==="list"&&r.stack[r.stack.length-2]==="listItem"&&r.stack[r.stack.length-3]==="list"&&r.stack[r.stack.length-4]==="listItem"&&r.indexStack[r.indexStack.length-1]===0&&r.indexStack[r.indexStack.length-2]===0&&r.indexStack[r.indexStack.length-3]===0&&(u=!0),Qr(r)===n&&p){let m=-1;for(;++m<e.children.length;){let g=e.children[m];if(g&&g.type==="listItem"&&g.children&&g.children[0]&&g.children[0].type==="thematicBreak"){u=!0;break}}}}u&&(n=s),r.bulletCurrent=n;let l=r.containerFlow(e,o);return r.bulletLastUsed=n,r.bulletCurrent=i,h(),l}function Ha(e){let t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Na(e,t,r,o){let h=Ha(r),i=r.bulletCurrent||Gt(r);t&&t.type==="list"&&t.ordered&&(i=(typeof t.start=="number"&&t.start>-1?t.start:1)+(r.options.incrementListMarker===!1?0:t.children.indexOf(e))+i);let n=i.length+1;(h==="tab"||h==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(n=Math.ceil(n/4)*4);let s=r.createTracker(o);s.move(i+" ".repeat(n-i.length)),s.shift(n);let u=r.enter("listItem"),l=r.indentLines(r.containerFlow(e,s.current()),p);return u(),l;function p(m,g,_){return g?(_?"":" ".repeat(n))+m:(_?i:i+" ".repeat(n-i.length))+m}}function za(e,t,r,o){let h=r.enter("paragraph"),i=r.enter("phrasing"),n=r.containerPhrasing(e,o);return i(),h(),n}var Ln=Ct(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Ua(e,t,r,o){return(e.children.some(function(n){return Ln(n)})?r.containerPhrasing:r.containerFlow).call(r,e,o)}function Wa(e){let t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}Dn.peek=Mf;function Dn(e,t,r,o){let h=Wa(r),i=r.enter("strong"),n=r.createTracker(o),s=n.move(h+h),u=n.move(r.containerPhrasing(e,{after:h,before:s,...n.current()})),l=u.charCodeAt(0),p=Kt(o.before.charCodeAt(o.before.length-1),l,h);p.inside&&(u=wt(l)+u.slice(1));let m=u.charCodeAt(u.length-1),g=Kt(o.after.charCodeAt(0),m,h);g.inside&&(u=u.slice(0,-1)+wt(m));let _=n.move(h+h);return i(),r.attentionEncodeSurroundingInfo={after:g.outside,before:p.outside},s+u+_}function Mf(e,t,r){return r.options.strong||"*"}function ja(e,t,r,o){return r.safe(e.value,o)}function $a(e){let t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function qa(e,t,r){let o=(Qr(r)+(r.options.ruleSpaces?" ":"")).repeat($a(r));return r.options.ruleSpaces?o.slice(0,-1):o}var ur={blockquote:xa,break:bn,code:Da,definition:Ra,emphasis:yn,hardBreak:bn,heading:Oa,html:Cn,image:wn,imageReference:xn,inlineCode:kn,link:An,linkReference:Tn,list:Fa,listItem:Na,paragraph:za,root:Ua,strong:Dn,text:ja,thematicBreak:qa};function In(){return{enter:{table:Of,tableData:Va,tableHeader:Va,tableRow:Bf},exit:{codeText:Ff,table:Pf,tableData:Rn,tableHeader:Rn,tableRow:Rn}}}function Of(e){let t=e._align;this.enter({type:"table",align:t.map(function(r){return r==="none"?null:r}),children:[]},e),this.data.inTable=!0}function Pf(e){this.exit(e),this.data.inTable=void 0}function Bf(e){this.enter({type:"tableRow",children:[]},e)}function Rn(e){this.exit(e)}function Va(e){this.enter({type:"tableCell",children:[]},e)}function Ff(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Hf));let r=this.stack[this.stack.length-1];r.type,r.value=t,this.exit(e)}function Hf(e,t){return t==="|"?t:e}function Mn(e){let t=e||{},r=t.tableCellPadding,o=t.tablePipeAlign,h=t.stringLength,i=r?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:g,table:n,tableCell:u,tableRow:s}};function n(_,a,d,f){return l(p(_,d,f),_.align)}function s(_,a,d,f){let c=m(_,d,f),S=l([c]);return S.slice(0,S.indexOf(`
`))}function u(_,a,d,f){let c=d.enter("tableCell"),S=d.enter("phrasing"),b=d.containerPhrasing(_,{...f,before:i,after:i});return S(),c(),b}function l(_,a){return wa(_,{align:a,alignDelimiters:o,padding:r,stringLength:h})}function p(_,a,d){let f=_.children,c=-1,S=[],b=a.enter("table");for(;++c<f.length;)S[c]=m(f[c],a,d);return b(),S}function m(_,a,d){let f=_.children,c=-1,S=[],b=a.enter("tableRow");for(;++c<f.length;)S[c]=u(f[c],_,a,d);return b(),S}function g(_,a,d){let f=ur.inlineCode(_,a,d);return d.stack.includes("tableCell")&&(f=f.replace(/\|/g,"\\$&")),f}}function On(){return{exit:{taskListCheckValueChecked:Ka,taskListCheckValueUnchecked:Ka,paragraph:Nf}}}function Pn(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:zf}}}function Ka(e){let t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Nf(e){let t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){let r=this.stack[this.stack.length-1];r.type;let o=r.children[0];if(o&&o.type==="text"){let h=t.children,i=-1,n;for(;++i<h.length;){let s=h[i];if(s.type==="paragraph"){n=s;break}}n===r&&(o.value=o.value.slice(1),o.value.length===0?r.children.shift():r.position&&o.position&&typeof o.position.start.offset=="number"&&(o.position.start.column++,o.position.start.offset++,r.position.start=Object.assign({},o.position.start)))}}this.exit(e)}function zf(e,t,r,o){let h=e.children[0],i=typeof e.checked=="boolean"&&h&&h.type==="paragraph",n="["+(e.checked?"x":" ")+"] ",s=r.createTracker(o);i&&s.move(n);let u=ur.listItem(e,t,r,{...o,...s.current()});return i&&(u=u.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,l)),u;function l(p){return p+n}}function Bn(){return[pn(),_n(),vn(),In(),On()]}function Fn(e){return{extensions:[mn(),gn(e),Sn(),Mn(e),Pn()]}}var Uf={tokenize:Vf,partial:!0},Ga={tokenize:Kf,partial:!0},Xa={tokenize:Gf,partial:!0},Ya={tokenize:Xf,partial:!0},Wf={tokenize:Yf,partial:!0},Ja={name:"wwwAutolink",tokenize:$f,previous:Qa},Za={name:"protocolAutolink",tokenize:qf,previous:el},pt={name:"emailAutolink",tokenize:jf,previous:tl},at={};function Nn(){return{text:at}}var Ft=48;for(;Ft<123;)at[Ft]=pt,Ft++,Ft===58?Ft=65:Ft===91&&(Ft=97);at[43]=pt;at[45]=pt;at[46]=pt;at[95]=pt;at[72]=[pt,Za];at[104]=[pt,Za];at[87]=[pt,Ja];at[119]=[pt,Ja];function jf(e,t,r){let o=this,h,i;return n;function n(m){return!Hn(m)||!tl.call(o,o.previous)||zn(o.events)?r(m):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),s(m))}function s(m){return Hn(m)?(e.consume(m),s):m===64?(e.consume(m),u):r(m)}function u(m){return m===46?e.check(Wf,p,l)(m):m===45||m===95||ge(m)?(i=!0,e.consume(m),u):p(m)}function l(m){return e.consume(m),h=!0,u}function p(m){return i&&h&&ye(o.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(m)):r(m)}}function $f(e,t,r){let o=this;return h;function h(n){return n!==87&&n!==119||!Qa.call(o,o.previous)||zn(o.events)?r(n):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Uf,e.attempt(Ga,e.attempt(Xa,i),r),r)(n))}function i(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}}function qf(e,t,r){let o=this,h="",i=!1;return n;function n(m){return(m===72||m===104)&&el.call(o,o.previous)&&!zn(o.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),h+=String.fromCodePoint(m),e.consume(m),s):r(m)}function s(m){if(ye(m)&&h.length<5)return h+=String.fromCodePoint(m),e.consume(m),s;if(m===58){let g=h.toLowerCase();if(g==="http"||g==="https")return e.consume(m),u}return r(m)}function u(m){return m===47?(e.consume(m),i?l:(i=!0,u)):r(m)}function l(m){return m===null||Lt(m)||he(m)||st(m)||Dt(m)?r(m):e.attempt(Ga,e.attempt(Xa,p),r)(m)}function p(m){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(m)}}function Vf(e,t,r){let o=0;return h;function h(n){return(n===87||n===119)&&o<3?(o++,e.consume(n),h):n===46&&o===3?(e.consume(n),i):r(n)}function i(n){return n===null?r(n):t(n)}}function Kf(e,t,r){let o,h,i;return n;function n(l){return l===46||l===95?e.check(Ya,u,s)(l):l===null||he(l)||st(l)||l!==45&&Dt(l)?u(l):(i=!0,e.consume(l),n)}function s(l){return l===95?o=!0:(h=o,o=void 0),e.consume(l),n}function u(l){return h||o||!i?r(l):t(l)}}function Gf(e,t){let r=0,o=0;return h;function h(n){return n===40?(r++,e.consume(n),h):n===41&&o<r?i(n):n===33||n===34||n===38||n===39||n===41||n===42||n===44||n===46||n===58||n===59||n===60||n===63||n===93||n===95||n===126?e.check(Ya,t,i)(n):n===null||he(n)||st(n)?t(n):(e.consume(n),h)}function i(n){return n===41&&o++,e.consume(n),h}}function Xf(e,t,r){return o;function o(s){return s===33||s===34||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===63||s===95||s===126?(e.consume(s),o):s===38?(e.consume(s),i):s===93?(e.consume(s),h):s===60||s===null||he(s)||st(s)?t(s):r(s)}function h(s){return s===null||s===40||s===91||he(s)||st(s)?t(s):o(s)}function i(s){return ye(s)?n(s):r(s)}function n(s){return s===59?(e.consume(s),o):ye(s)?(e.consume(s),n):r(s)}}function Yf(e,t,r){return o;function o(i){return e.consume(i),h}function h(i){return ge(i)?r(i):t(i)}}function Qa(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||he(e)}function el(e){return!ye(e)}function tl(e){return!(e===47||Hn(e))}function Hn(e){return e===43||e===45||e===46||e===95||ge(e)}function zn(e){let t=e.length,r=!1;for(;t--;){let o=e[t][1];if((o.type==="labelLink"||o.type==="labelImage")&&!o._balanced){r=!0;break}if(o._gfmAutolinkLiteralWalkedInto){r=!1;break}}return e.length>0&&!r&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),r}var Jf={tokenize:nd,partial:!0};function Un(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:td,continuation:{tokenize:rd},exit:id}},text:{91:{name:"gfmFootnoteCall",tokenize:ed},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Zf,resolveTo:Qf}}}}function Zf(e,t,r){let o=this,h=o.events.length,i=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]),n;for(;h--;){let u=o.events[h][1];if(u.type==="labelImage"){n=u;break}if(u.type==="gfmFootnoteCall"||u.type==="labelLink"||u.type==="label"||u.type==="image"||u.type==="link")break}return s;function s(u){if(!n||!n._balanced)return r(u);let l=Re(o.sliceSerialize({start:n.end,end:o.now()}));return l.codePointAt(0)!==94||!i.includes(l.slice(1))?r(u):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(u),e.exit("gfmFootnoteCallLabelMarker"),t(u))}}function Qf(e,t){let r=e.length,o;for(;r--;)if(e[r][1].type==="labelImage"&&e[r][0]==="enter"){o=e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";let h={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;let n={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},n.start),end:Object.assign({},n.end)},u=[e[r+1],e[r+2],["enter",h,t],e[r+3],e[r+4],["enter",i,t],["exit",i,t],["enter",n,t],["enter",s,t],["exit",s,t],["exit",n,t],e[e.length-2],e[e.length-1],["exit",h,t]];return e.splice(r,e.length-r+1,...u),e}function ed(e,t,r){let o=this,h=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]),i=0,n;return s;function s(m){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),u}function u(m){return m!==94?r(m):(e.enter("gfmFootnoteCallMarker"),e.consume(m),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(m){if(i>999||m===93&&!n||m===null||m===91||he(m))return r(m);if(m===93){e.exit("chunkString");let g=e.exit("gfmFootnoteCallString");return h.includes(Re(o.sliceSerialize(g)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(m),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):r(m)}return he(m)||(n=!0),i++,e.consume(m),m===92?p:l}function p(m){return m===91||m===92||m===93?(e.consume(m),i++,l):l(m)}}function td(e,t,r){let o=this,h=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]),i,n=0,s;return u;function u(a){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(a),e.exit("gfmFootnoteDefinitionLabelMarker"),l}function l(a){return a===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(a),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",p):r(a)}function p(a){if(n>999||a===93&&!s||a===null||a===91||he(a))return r(a);if(a===93){e.exit("chunkString");let d=e.exit("gfmFootnoteDefinitionLabelString");return i=Re(o.sliceSerialize(d)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(a),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),g}return he(a)||(s=!0),n++,e.consume(a),a===92?m:p}function m(a){return a===91||a===92||a===93?(e.consume(a),n++,p):p(a)}function g(a){return a===58?(e.enter("definitionMarker"),e.consume(a),e.exit("definitionMarker"),h.includes(i)||h.push(i),re(e,_,"gfmFootnoteDefinitionWhitespace")):r(a)}function _(a){return t(a)}}function rd(e,t,r){return e.check(ot,t,e.attempt(Jf,t,r))}function id(e){e.exit("gfmFootnoteDefinition")}function nd(e,t,r){let o=this;return re(e,h,"gfmFootnoteDefinitionIndent",5);function h(i){let n=o.events[o.events.length-1];return n&&n[1].type==="gfmFootnoteDefinitionIndent"&&n[2].sliceSerialize(n[1],!0).length===4?t(i):r(i)}}function Wn(e){let r=(e||{}).singleTilde,o={name:"strikethrough",tokenize:i,resolveAll:h};return r==null&&(r=!0),{text:{126:o},insideSpan:{null:[o]},attentionMarkers:{null:[126]}};function h(n,s){let u=-1;for(;++u<n.length;)if(n[u][0]==="enter"&&n[u][1].type==="strikethroughSequenceTemporary"&&n[u][1]._close){let l=u;for(;l--;)if(n[l][0]==="exit"&&n[l][1].type==="strikethroughSequenceTemporary"&&n[l][1]._open&&n[u][1].end.offset-n[u][1].start.offset===n[l][1].end.offset-n[l][1].start.offset){n[u][1].type="strikethroughSequence",n[l][1].type="strikethroughSequence";let p={type:"strikethrough",start:Object.assign({},n[l][1].start),end:Object.assign({},n[u][1].end)},m={type:"strikethroughText",start:Object.assign({},n[l][1].end),end:Object.assign({},n[u][1].start)},g=[["enter",p,s],["enter",n[l][1],s],["exit",n[l][1],s],["enter",m,s]],_=s.parser.constructs.insideSpan.null;_&&Se(g,g.length,0,bt(_,n.slice(l+1,u),s)),Se(g,g.length,0,[["exit",m,s],["enter",n[u][1],s],["exit",n[u][1],s],["exit",p,s]]),Se(n,l-1,u-l+3,g),u=l+g.length-2;break}}for(u=-1;++u<n.length;)n[u][1].type==="strikethroughSequenceTemporary"&&(n[u][1].type="data");return n}function i(n,s,u){let l=this.previous,p=this.events,m=0;return g;function g(a){return l===126&&p[p.length-1][1].type!=="characterEscape"?u(a):(n.enter("strikethroughSequenceTemporary"),_(a))}function _(a){let d=dt(l);if(a===126)return m>1?u(a):(n.consume(a),m++,_);if(m<2&&!r)return u(a);let f=n.exit("strikethroughSequenceTemporary"),c=dt(a);return f._open=!c||c===2&&!!d,f._close=!d||d===2&&!!c,s(a)}}}var ei=class{constructor(){this.map=[]}add(t,r,o){sd(this,t,r,o)}consume(t){if(this.map.sort(function(i,n){return i[0]-n[0]}),this.map.length===0)return;let r=this.map.length,o=[];for(;r>0;)r-=1,o.push(t.slice(this.map[r][0]+this.map[r][1]),this.map[r][2]),t.length=this.map[r][0];o.push(t.slice()),t.length=0;let h=o.pop();for(;h;){for(let i of h)t.push(i);h=o.pop()}this.map.length=0}};function sd(e,t,r,o){let h=0;if(!(r===0&&o.length===0)){for(;h<e.map.length;){if(e.map[h][0]===t){e.map[h][1]+=r,e.map[h][2].push(...o);return}h+=1}e.map.push([t,r,o])}}function rl(e,t){let r=!1,o=[];for(;t<e.length;){let h=e[t];if(r){if(h[0]==="enter")h[1].type==="tableContent"&&o.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(h[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){let i=o.length-1;o[i]=o[i]==="left"?"center":"right"}}else if(h[1].type==="tableDelimiterRow")break}else h[0]==="enter"&&h[1].type==="tableDelimiterRow"&&(r=!0);t+=1}return o}function jn(){return{flow:{null:{name:"table",tokenize:od,resolveAll:ad}}}}function od(e,t,r){let o=this,h=0,i=0,n;return s;function s(x){let R=o.events.length-1;for(;R>-1;){let z=o.events[R][1].type;if(z==="lineEnding"||z==="linePrefix")R--;else break}let H=R>-1?o.events[R][1].type:null,B=H==="tableHead"||H==="tableRow"?v:u;return B===v&&o.parser.lazy[o.now().line]?r(x):B(x)}function u(x){return e.enter("tableHead"),e.enter("tableRow"),l(x)}function l(x){return x===124||(n=!0,i+=1),p(x)}function p(x){return x===null?r(x):X(x)?i>1?(i=0,o.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),_):r(x):ie(x)?re(e,p,"whitespace")(x):(i+=1,n&&(n=!1,h+=1),x===124?(e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),n=!0,p):(e.enter("data"),m(x)))}function m(x){return x===null||x===124||he(x)?(e.exit("data"),p(x)):(e.consume(x),x===92?g:m)}function g(x){return x===92||x===124?(e.consume(x),m):m(x)}function _(x){return o.interrupt=!1,o.parser.lazy[o.now().line]?r(x):(e.enter("tableDelimiterRow"),n=!1,ie(x)?re(e,a,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(x):a(x))}function a(x){return x===45||x===58?f(x):x===124?(n=!0,e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),d):w(x)}function d(x){return ie(x)?re(e,f,"whitespace")(x):f(x)}function f(x){return x===58?(i+=1,n=!0,e.enter("tableDelimiterMarker"),e.consume(x),e.exit("tableDelimiterMarker"),c):x===45?(i+=1,c(x)):x===null||X(x)?y(x):w(x)}function c(x){return x===45?(e.enter("tableDelimiterFiller"),S(x)):w(x)}function S(x){return x===45?(e.consume(x),S):x===58?(n=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(x),e.exit("tableDelimiterMarker"),b):(e.exit("tableDelimiterFiller"),b(x))}function b(x){return ie(x)?re(e,y,"whitespace")(x):y(x)}function y(x){return x===124?a(x):x===null||X(x)?!n||h!==i?w(x):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(x)):w(x)}function w(x){return r(x)}function v(x){return e.enter("tableRow"),C(x)}function C(x){return x===124?(e.enter("tableCellDivider"),e.consume(x),e.exit("tableCellDivider"),C):x===null||X(x)?(e.exit("tableRow"),t(x)):ie(x)?re(e,C,"whitespace")(x):(e.enter("data"),L(x))}function L(x){return x===null||x===124||he(x)?(e.exit("data"),C(x)):(e.consume(x),x===92?I:L)}function I(x){return x===92||x===124?(e.consume(x),L):L(x)}}function ad(e,t){let r=-1,o=!0,h=0,i=[0,0,0,0],n=[0,0,0,0],s=!1,u=0,l,p,m,g=new ei;for(;++r<e.length;){let _=e[r],a=_[1];_[0]==="enter"?a.type==="tableHead"?(s=!1,u!==0&&(il(g,t,u,l,p),p=void 0,u=0),l={type:"table",start:Object.assign({},a.start),end:Object.assign({},a.end)},g.add(r,0,[["enter",l,t]])):a.type==="tableRow"||a.type==="tableDelimiterRow"?(o=!0,m=void 0,i=[0,0,0,0],n=[0,r+1,0,0],s&&(s=!1,p={type:"tableBody",start:Object.assign({},a.start),end:Object.assign({},a.end)},g.add(r,0,[["enter",p,t]])),h=a.type==="tableDelimiterRow"?2:p?3:1):h&&(a.type==="data"||a.type==="tableDelimiterMarker"||a.type==="tableDelimiterFiller")?(o=!1,n[2]===0&&(i[1]!==0&&(n[0]=n[1],m=ti(g,t,i,h,void 0,m),i=[0,0,0,0]),n[2]=r)):a.type==="tableCellDivider"&&(o?o=!1:(i[1]!==0&&(n[0]=n[1],m=ti(g,t,i,h,void 0,m)),i=n,n=[i[1],r,0,0])):a.type==="tableHead"?(s=!0,u=r):a.type==="tableRow"||a.type==="tableDelimiterRow"?(u=r,i[1]!==0?(n[0]=n[1],m=ti(g,t,i,h,r,m)):n[1]!==0&&(m=ti(g,t,n,h,r,m)),h=0):h&&(a.type==="data"||a.type==="tableDelimiterMarker"||a.type==="tableDelimiterFiller")&&(n[3]=r)}for(u!==0&&il(g,t,u,l,p),g.consume(t.events),r=-1;++r<t.events.length;){let _=t.events[r];_[0]==="enter"&&_[1].type==="table"&&(_[1]._align=rl(t.events,r))}return e}function ti(e,t,r,o,h,i){let n=o===1?"tableHeader":o===2?"tableDelimiter":"tableData",s="tableContent";r[0]!==0&&(i.end=Object.assign({},Xt(t.events,r[0])),e.add(r[0],0,[["exit",i,t]]));let u=Xt(t.events,r[1]);if(i={type:n,start:Object.assign({},u),end:Object.assign({},u)},e.add(r[1],0,[["enter",i,t]]),r[2]!==0){let l=Xt(t.events,r[2]),p=Xt(t.events,r[3]),m={type:s,start:Object.assign({},l),end:Object.assign({},p)};if(e.add(r[2],0,[["enter",m,t]]),o!==2){let g=t.events[r[2]],_=t.events[r[3]];if(g[1].end=Object.assign({},_[1].end),g[1].type="chunkText",g[1].contentType="text",r[3]>r[2]+1){let a=r[2]+1,d=r[3]-r[2]-1;e.add(a,d,[])}}e.add(r[3]+1,0,[["exit",m,t]])}return h!==void 0&&(i.end=Object.assign({},Xt(t.events,h)),e.add(h,0,[["exit",i,t]]),i=void 0),i}function il(e,t,r,o,h){let i=[],n=Xt(t.events,r);h&&(h.end=Object.assign({},n),i.push(["exit",h,t])),o.end=Object.assign({},n),i.push(["exit",o,t]),e.add(r+1,0,i)}function Xt(e,t){let r=e[t],o=r[0]==="enter"?"start":"end";return r[1][o]}var ld={name:"tasklistCheck",tokenize:cd};function $n(){return{text:{91:ld}}}function cd(e,t,r){let o=this;return h;function h(u){return o.previous!==null||!o._gfmTasklistFirstContentOfListItem?r(u):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),i)}function i(u){return he(u)?(e.enter("taskListCheckValueUnchecked"),e.consume(u),e.exit("taskListCheckValueUnchecked"),n):u===88||u===120?(e.enter("taskListCheckValueChecked"),e.consume(u),e.exit("taskListCheckValueChecked"),n):r(u)}function n(u){return u===93?(e.enter("taskListCheckMarker"),e.consume(u),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),s):r(u)}function s(u){return X(u)?t(u):ie(u)?e.check({tokenize:hd},t,r)(u):r(u)}}function hd(e,t,r){return re(e,o,"whitespace");function o(h){return h===null?r(h):t(h)}}function nl(e){return Tr([Nn(),Un(),Wn(e),jn(),$n()])}var ud={};function ri(e){let t=this,r=e||ud,o=t.data(),h=o.micromarkExtensions||(o.micromarkExtensions=[]),i=o.fromMarkdownExtensions||(o.fromMarkdownExtensions=[]),n=o.toMarkdownExtensions||(o.toMarkdownExtensions=[]);h.push(nl(r)),i.push(Bn()),n.push(Fn(r))}var yl=_t(ol());var{entries:ml,setPrototypeOf:al,isFrozen:fd,getPrototypeOf:dd,getOwnPropertyDescriptor:pd}=Object,{freeze:Be,seal:Xe,create:_l}=Object,{apply:Zn,construct:Qn}=typeof Reflect<"u"&&Reflect;Be||(Be=function(t){return t});Xe||(Xe=function(t){return t});Zn||(Zn=function(t,r){for(var o=arguments.length,h=new Array(o>2?o-2:0),i=2;i<o;i++)h[i-2]=arguments[i];return t.apply(r,h)});Qn||(Qn=function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),h=1;h<r;h++)o[h-1]=arguments[h];return new t(...o)});var ni=Fe(Array.prototype.forEach),md=Fe(Array.prototype.lastIndexOf),ll=Fe(Array.prototype.pop),fr=Fe(Array.prototype.push),_d=Fe(Array.prototype.splice),oi=Fe(String.prototype.toLowerCase),Vn=Fe(String.prototype.toString),Kn=Fe(String.prototype.match),dr=Fe(String.prototype.replace),gd=Fe(String.prototype.indexOf),vd=Fe(String.prototype.trim),et=Fe(Object.prototype.hasOwnProperty),Pe=Fe(RegExp.prototype.test),pr=Sd(TypeError);function Fe(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,o=new Array(r>1?r-1:0),h=1;h<r;h++)o[h-1]=arguments[h];return Zn(e,t,o)}}function Sd(e){return function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Qn(e,r)}}function ue(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oi;al&&al(e,null);let o=t.length;for(;o--;){let h=t[o];if(typeof h=="string"){let i=r(h);i!==h&&(fd(t)||(t[o]=i),h=i)}e[h]=!0}return e}function bd(e){for(let t=0;t<e.length;t++)et(e,t)||(e[t]=null);return e}function mt(e){let t=_l(null);for(let[r,o]of ml(e))et(e,r)&&(Array.isArray(o)?t[r]=bd(o):o&&typeof o=="object"&&o.constructor===Object?t[r]=mt(o):t[r]=o);return t}function mr(e,t){for(;e!==null;){let o=pd(e,t);if(o){if(o.get)return Fe(o.get);if(typeof o.value=="function")return Fe(o.value)}e=dd(e)}function r(){return null}return r}var cl=Be(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Gn=Be(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","slot","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Xn=Be(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yd=Be(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Yn=Be(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Cd=Be(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hl=Be(["#text"]),ul=Be(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Jn=Be(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),fl=Be(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),si=Be(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),wd=Xe(/\{\{[\w\W]*|[\w\W]*\}\}/gm),xd=Xe(/<%[\w\W]*|[\w\W]*%>/gm),kd=Xe(/\$\{[\w\W]*/gm),Ed=Xe(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ad=Xe(/^aria-[\-\w]+$/),gl=Xe(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Td=Xe(/^(?:\w+script|data):/i),Ld=Xe(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),vl=Xe(/^html$/i),Dd=Xe(/^[a-z][.\w]*(-[.\w]+)+$/i),dl=Object.freeze({__proto__:null,ARIA_ATTR:Ad,ATTR_WHITESPACE:Ld,CUSTOM_ELEMENT:Dd,DATA_ATTR:Ed,DOCTYPE_NAME:vl,ERB_EXPR:xd,IS_ALLOWED_URI:gl,IS_SCRIPT_OR_DATA:Td,MUSTACHE_EXPR:wd,TMPLIT_EXPR:kd}),_r={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Rd=function(){return typeof window>"u"?null:window},Id=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let o=null,h="data-tt-policy-suffix";r&&r.hasAttribute(h)&&(o=r.getAttribute(h));let i="dompurify"+(o?"#"+o:"");try{return t.createPolicy(i,{createHTML(n){return n},createScriptURL(n){return n}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},pl=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Sl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rd(),t=te=>Sl(te);if(t.version="3.2.7",t.removed=[],!e||!e.document||e.document.nodeType!==_r.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e,o=r,h=o.currentScript,{DocumentFragment:i,HTMLTemplateElement:n,Node:s,Element:u,NodeFilter:l,NamedNodeMap:p=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:m,DOMParser:g,trustedTypes:_}=e,a=u.prototype,d=mr(a,"cloneNode"),f=mr(a,"remove"),c=mr(a,"nextSibling"),S=mr(a,"childNodes"),b=mr(a,"parentNode");if(typeof n=="function"){let te=r.createElement("template");te.content&&te.content.ownerDocument&&(r=te.content.ownerDocument)}let y,w="",{implementation:v,createNodeIterator:C,createDocumentFragment:L,getElementsByTagName:I}=r,{importNode:x}=o,R=pl();t.isSupported=typeof ml=="function"&&typeof b=="function"&&v&&v.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:H,ERB_EXPR:B,TMPLIT_EXPR:z,DATA_ATTR:N,ARIA_ATTR:E,IS_SCRIPT_OR_DATA:D,ATTR_WHITESPACE:M,CUSTOM_ELEMENT:O}=dl,{IS_ALLOWED_URI:A}=dl,$=null,Y=ue({},[...cl,...Gn,...Xn,...Yn,...hl]),T=null,le=ue({},[...ul,...Jn,...fl,...si]),k=Object.seal(_l(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),F=null,j=null,U=!0,ne=!0,G=!1,ce=!0,fe=!1,me=!0,Ae=!1,se=!1,je=!1,Ue=!1,tt=!1,Je=!1,rt=!0,xe=!1,lt="user-content-",Te=!0,We=!1,$e={},W=null,K=ue({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Q=null,oe=ue({},["audio","video","img","source","image","track"]),ee=null,Le=ue({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),qe="http://www.w3.org/1998/Math/MathML",He="http://www.w3.org/2000/svg",Me="http://www.w3.org/1999/xhtml",Ve=Me,ke=!1,it=null,Ze=ue({},[qe,He,Me],Vn),gr=ue({},["mi","mo","mn","ms","mtext"]),vr=ue({},["annotation-xml"]),wl=ue({},["title","style","font","a","script"]),Yt=null,xl=["application/xhtml+xml","text/html"],kl="text/html",Ce=null,Ht=null,El=r.createElement("form"),es=function(P){return P instanceof RegExp||P instanceof Function},ai=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ht&&Ht===P)){if((!P||typeof P!="object")&&(P={}),P=mt(P),Yt=xl.indexOf(P.PARSER_MEDIA_TYPE)===-1?kl:P.PARSER_MEDIA_TYPE,Ce=Yt==="application/xhtml+xml"?Vn:oi,$=et(P,"ALLOWED_TAGS")?ue({},P.ALLOWED_TAGS,Ce):Y,T=et(P,"ALLOWED_ATTR")?ue({},P.ALLOWED_ATTR,Ce):le,it=et(P,"ALLOWED_NAMESPACES")?ue({},P.ALLOWED_NAMESPACES,Vn):Ze,ee=et(P,"ADD_URI_SAFE_ATTR")?ue(mt(Le),P.ADD_URI_SAFE_ATTR,Ce):Le,Q=et(P,"ADD_DATA_URI_TAGS")?ue(mt(oe),P.ADD_DATA_URI_TAGS,Ce):oe,W=et(P,"FORBID_CONTENTS")?ue({},P.FORBID_CONTENTS,Ce):K,F=et(P,"FORBID_TAGS")?ue({},P.FORBID_TAGS,Ce):mt({}),j=et(P,"FORBID_ATTR")?ue({},P.FORBID_ATTR,Ce):mt({}),$e=et(P,"USE_PROFILES")?P.USE_PROFILES:!1,U=P.ALLOW_ARIA_ATTR!==!1,ne=P.ALLOW_DATA_ATTR!==!1,G=P.ALLOW_UNKNOWN_PROTOCOLS||!1,ce=P.ALLOW_SELF_CLOSE_IN_ATTR!==!1,fe=P.SAFE_FOR_TEMPLATES||!1,me=P.SAFE_FOR_XML!==!1,Ae=P.WHOLE_DOCUMENT||!1,Ue=P.RETURN_DOM||!1,tt=P.RETURN_DOM_FRAGMENT||!1,Je=P.RETURN_TRUSTED_TYPE||!1,je=P.FORCE_BODY||!1,rt=P.SANITIZE_DOM!==!1,xe=P.SANITIZE_NAMED_PROPS||!1,Te=P.KEEP_CONTENT!==!1,We=P.IN_PLACE||!1,A=P.ALLOWED_URI_REGEXP||gl,Ve=P.NAMESPACE||Me,gr=P.MATHML_TEXT_INTEGRATION_POINTS||gr,vr=P.HTML_INTEGRATION_POINTS||vr,k=P.CUSTOM_ELEMENT_HANDLING||{},P.CUSTOM_ELEMENT_HANDLING&&es(P.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(k.tagNameCheck=P.CUSTOM_ELEMENT_HANDLING.tagNameCheck),P.CUSTOM_ELEMENT_HANDLING&&es(P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(k.attributeNameCheck=P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),P.CUSTOM_ELEMENT_HANDLING&&typeof P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(k.allowCustomizedBuiltInElements=P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),fe&&(ne=!1),tt&&(Ue=!0),$e&&($=ue({},hl),T=[],$e.html===!0&&(ue($,cl),ue(T,ul)),$e.svg===!0&&(ue($,Gn),ue(T,Jn),ue(T,si)),$e.svgFilters===!0&&(ue($,Xn),ue(T,Jn),ue(T,si)),$e.mathMl===!0&&(ue($,Yn),ue(T,fl),ue(T,si))),P.ADD_TAGS&&($===Y&&($=mt($)),ue($,P.ADD_TAGS,Ce)),P.ADD_ATTR&&(T===le&&(T=mt(T)),ue(T,P.ADD_ATTR,Ce)),P.ADD_URI_SAFE_ATTR&&ue(ee,P.ADD_URI_SAFE_ATTR,Ce),P.FORBID_CONTENTS&&(W===K&&(W=mt(W)),ue(W,P.FORBID_CONTENTS,Ce)),Te&&($["#text"]=!0),Ae&&ue($,["html","head","body"]),$.table&&(ue($,["tbody"]),delete F.tbody),P.TRUSTED_TYPES_POLICY){if(typeof P.TRUSTED_TYPES_POLICY.createHTML!="function")throw pr('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof P.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw pr('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=P.TRUSTED_TYPES_POLICY,w=y.createHTML("")}else y===void 0&&(y=Id(_,h)),y!==null&&typeof w=="string"&&(w=y.createHTML(""));Be&&Be(P),Ht=P}},ts=ue({},[...Gn,...Xn,...yd]),rs=ue({},[...Yn,...Cd]),Al=function(P){let V=b(P);(!V||!V.tagName)&&(V={namespaceURI:Ve,tagName:"template"});let J=oi(P.tagName),pe=oi(V.tagName);return it[P.namespaceURI]?P.namespaceURI===He?V.namespaceURI===Me?J==="svg":V.namespaceURI===qe?J==="svg"&&(pe==="annotation-xml"||gr[pe]):!!ts[J]:P.namespaceURI===qe?V.namespaceURI===Me?J==="math":V.namespaceURI===He?J==="math"&&vr[pe]:!!rs[J]:P.namespaceURI===Me?V.namespaceURI===He&&!vr[pe]||V.namespaceURI===qe&&!gr[pe]?!1:!rs[J]&&(wl[J]||!ts[J]):!!(Yt==="application/xhtml+xml"&&it[P.namespaceURI]):!1},nt=function(P){fr(t.removed,{element:P});try{b(P).removeChild(P)}catch{f(P)}},xt=function(P,V){try{fr(t.removed,{attribute:V.getAttributeNode(P),from:V})}catch{fr(t.removed,{attribute:null,from:V})}if(V.removeAttribute(P),P==="is")if(Ue||tt)try{nt(V)}catch{}else try{V.setAttribute(P,"")}catch{}},is=function(P){let V=null,J=null;if(je)P="<remove></remove>"+P;else{let be=Kn(P,/^[\r\n\t ]+/);J=be&&be[0]}Yt==="application/xhtml+xml"&&Ve===Me&&(P='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+P+"</body></html>");let pe=y?y.createHTML(P):P;if(Ve===Me)try{V=new g().parseFromString(pe,Yt)}catch{}if(!V||!V.documentElement){V=v.createDocument(Ve,"template",null);try{V.documentElement.innerHTML=ke?w:pe}catch{}}let De=V.body||V.documentElement;return P&&J&&De.insertBefore(r.createTextNode(J),De.childNodes[0]||null),Ve===Me?I.call(V,Ae?"html":"body")[0]:Ae?V.documentElement:De},ns=function(P){return C.call(P.ownerDocument||P,P,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},li=function(P){return P instanceof m&&(typeof P.nodeName!="string"||typeof P.textContent!="string"||typeof P.removeChild!="function"||!(P.attributes instanceof p)||typeof P.removeAttribute!="function"||typeof P.setAttribute!="function"||typeof P.namespaceURI!="string"||typeof P.insertBefore!="function"||typeof P.hasChildNodes!="function")},ss=function(P){return typeof s=="function"&&P instanceof s};function ct(te,P,V){ni(te,J=>{J.call(t,P,V,Ht)})}let os=function(P){let V=null;if(ct(R.beforeSanitizeElements,P,null),li(P))return nt(P),!0;let J=Ce(P.nodeName);if(ct(R.uponSanitizeElement,P,{tagName:J,allowedTags:$}),me&&P.hasChildNodes()&&!ss(P.firstElementChild)&&Pe(/<[/\w!]/g,P.innerHTML)&&Pe(/<[/\w!]/g,P.textContent)||P.nodeType===_r.progressingInstruction||me&&P.nodeType===_r.comment&&Pe(/<[/\w]/g,P.data))return nt(P),!0;if(!$[J]||F[J]){if(!F[J]&&ls(J)&&(k.tagNameCheck instanceof RegExp&&Pe(k.tagNameCheck,J)||k.tagNameCheck instanceof Function&&k.tagNameCheck(J)))return!1;if(Te&&!W[J]){let pe=b(P)||P.parentNode,De=S(P)||P.childNodes;if(De&&pe){let be=De.length;for(let Ne=be-1;Ne>=0;--Ne){let ht=d(De[Ne],!0);ht.__removalCount=(P.__removalCount||0)+1,pe.insertBefore(ht,c(P))}}}return nt(P),!0}return P instanceof u&&!Al(P)||(J==="noscript"||J==="noembed"||J==="noframes")&&Pe(/<\/no(script|embed|frames)/i,P.innerHTML)?(nt(P),!0):(fe&&P.nodeType===_r.text&&(V=P.textContent,ni([H,B,z],pe=>{V=dr(V,pe," ")}),P.textContent!==V&&(fr(t.removed,{element:P.cloneNode()}),P.textContent=V)),ct(R.afterSanitizeElements,P,null),!1)},as=function(P,V,J){if(rt&&(V==="id"||V==="name")&&(J in r||J in El))return!1;if(!(ne&&!j[V]&&Pe(N,V))){if(!(U&&Pe(E,V))){if(!T[V]||j[V]){if(!(ls(P)&&(k.tagNameCheck instanceof RegExp&&Pe(k.tagNameCheck,P)||k.tagNameCheck instanceof Function&&k.tagNameCheck(P))&&(k.attributeNameCheck instanceof RegExp&&Pe(k.attributeNameCheck,V)||k.attributeNameCheck instanceof Function&&k.attributeNameCheck(V,P))||V==="is"&&k.allowCustomizedBuiltInElements&&(k.tagNameCheck instanceof RegExp&&Pe(k.tagNameCheck,J)||k.tagNameCheck instanceof Function&&k.tagNameCheck(J))))return!1}else if(!ee[V]){if(!Pe(A,dr(J,M,""))){if(!((V==="src"||V==="xlink:href"||V==="href")&&P!=="script"&&gd(J,"data:")===0&&Q[P])){if(!(G&&!Pe(D,dr(J,M,"")))){if(J)return!1}}}}}}return!0},ls=function(P){return P!=="annotation-xml"&&Kn(P,O)},cs=function(P){ct(R.beforeSanitizeAttributes,P,null);let{attributes:V}=P;if(!V||li(P))return;let J={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:T,forceKeepAttr:void 0},pe=V.length;for(;pe--;){let De=V[pe],{name:be,namespaceURI:Ne,value:ht}=De,Nt=Ce(be),ci=ht,Ee=be==="value"?ci:vd(ci);if(J.attrName=Nt,J.attrValue=Ee,J.keepAttr=!0,J.forceKeepAttr=void 0,ct(R.uponSanitizeAttribute,P,J),Ee=J.attrValue,xe&&(Nt==="id"||Nt==="name")&&(xt(be,P),Ee=lt+Ee),me&&Pe(/((--!?|])>)|<\/(style|title|textarea)/i,Ee)){xt(be,P);continue}if(Nt==="attributename"&&Kn(Ee,"href")){xt(be,P);continue}if(J.forceKeepAttr)continue;if(!J.keepAttr){xt(be,P);continue}if(!ce&&Pe(/\/>/i,Ee)){xt(be,P);continue}fe&&ni([H,B,z],us=>{Ee=dr(Ee,us," ")});let hs=Ce(P.nodeName);if(!as(hs,Nt,Ee)){xt(be,P);continue}if(y&&typeof _=="object"&&typeof _.getAttributeType=="function"&&!Ne)switch(_.getAttributeType(hs,Nt)){case"TrustedHTML":{Ee=y.createHTML(Ee);break}case"TrustedScriptURL":{Ee=y.createScriptURL(Ee);break}}if(Ee!==ci)try{Ne?P.setAttributeNS(Ne,be,Ee):P.setAttribute(be,Ee),li(P)?nt(P):ll(t.removed)}catch{xt(be,P)}}ct(R.afterSanitizeAttributes,P,null)},Tl=function te(P){let V=null,J=ns(P);for(ct(R.beforeSanitizeShadowDOM,P,null);V=J.nextNode();)ct(R.uponSanitizeShadowNode,V,null),os(V),cs(V),V.content instanceof i&&te(V.content);ct(R.afterSanitizeShadowDOM,P,null)};return t.sanitize=function(te){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=null,J=null,pe=null,De=null;if(ke=!te,ke&&(te="<!-->"),typeof te!="string"&&!ss(te))if(typeof te.toString=="function"){if(te=te.toString(),typeof te!="string")throw pr("dirty is not a string, aborting")}else throw pr("toString is not a function");if(!t.isSupported)return te;if(se||ai(P),t.removed=[],typeof te=="string"&&(We=!1),We){if(te.nodeName){let ht=Ce(te.nodeName);if(!$[ht]||F[ht])throw pr("root node is forbidden and cannot be sanitized in-place")}}else if(te instanceof s)V=is("<!---->"),J=V.ownerDocument.importNode(te,!0),J.nodeType===_r.element&&J.nodeName==="BODY"||J.nodeName==="HTML"?V=J:V.appendChild(J);else{if(!Ue&&!fe&&!Ae&&te.indexOf("<")===-1)return y&&Je?y.createHTML(te):te;if(V=is(te),!V)return Ue?null:Je?w:""}V&&je&&nt(V.firstChild);let be=ns(We?te:V);for(;pe=be.nextNode();)os(pe),cs(pe),pe.content instanceof i&&Tl(pe.content);if(We)return te;if(Ue){if(tt)for(De=L.call(V.ownerDocument);V.firstChild;)De.appendChild(V.firstChild);else De=V;return(T.shadowroot||T.shadowrootmode)&&(De=x.call(o,De,!0)),De}let Ne=Ae?V.outerHTML:V.innerHTML;return Ae&&$["!doctype"]&&V.ownerDocument&&V.ownerDocument.doctype&&V.ownerDocument.doctype.name&&Pe(vl,V.ownerDocument.doctype.name)&&(Ne="<!DOCTYPE "+V.ownerDocument.doctype.name+`>
`+Ne),fe&&ni([H,B,z],ht=>{Ne=dr(Ne,ht," ")}),y&&Je?y.createHTML(Ne):Ne},t.setConfig=function(){let te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ai(te),se=!0},t.clearConfig=function(){Ht=null,se=!1},t.isValidAttribute=function(te,P,V){Ht||ai({});let J=Ce(te),pe=Ce(P);return as(J,pe,V)},t.addHook=function(te,P){typeof P=="function"&&fr(R[te],P)},t.removeHook=function(te,P){if(P!==void 0){let V=md(R[te],P);return V===-1?void 0:_d(R[te],V,1)[0]}return ll(R[te])},t.removeHooks=function(te){R[te]=[]},t.removeAllHooks=function(){R=pl()},t}var bl=Sl();var Z=_t(Ar()),Cl=({files:e,initialId:t})=>{let[r,o]=(0,Ye.useState)(t||e[0]?.id),[h,i]=(0,Ye.useState)(""),[n,s]=(0,Ye.useState)(!1),[u,l]=(0,Ye.useState)(null),p=(0,Ye.useRef)(null),m=(0,Ye.useRef)(null),g=(0,Ye.useRef)(null),_=e.find(c=>c.id===r),d=_?(c=>{let S=c.toLowerCase().split(".").pop();return S==="md"?"markdown":S==="txt"||S==="ascii"||c.includes("ascii")?"ascii":"raw"})(_.name):"raw";(0,Ye.useEffect)(()=>{if(!_)return;(async()=>{s(!0),l(null);try{let S=await fetch(_.url);if(!S.ok)throw new Error(`HTTP ${S.status}: ${S.statusText}`);let b=await S.text(),y=d==="markdown"?bl.sanitize(b,{ALLOWED_TAGS:["p","br","strong","em","code","pre","h1","h2","h3","h4","h5","h6","ul","ol","li","a","blockquote","table","thead","tbody","tr","th","td","hr","img"],ALLOWED_ATTR:["href","src","alt","title","class"]}):b;i(y)}catch(S){l(S instanceof Error?S.message:"Failed to load file"),i("")}finally{s(!1)}})()},[_,d]),(0,Ye.useEffect)(()=>{if(!(d!=="ascii"||!p.current||!h)){if(!m.current){let c=new yl.Terminal({fontFamily:'"Cascadia Code", "Consolas", "Courier New", monospace',fontSize:13,lineHeight:1.4,theme:{background:"#ffffff",foreground:"#323130",cursor:"#0078d4",cursorAccent:"#ffffff",selectionBackground:"#add6ff",black:"#000000",red:"#cd3131",green:"#0dbc79",yellow:"#e5e510",blue:"#0078d4",magenta:"#bc3fbc",cyan:"#11a8cd",white:"#323130",brightBlack:"#666666",brightRed:"#f14c4c",brightGreen:"#23d18b",brightYellow:"#f5f543",brightBlue:"#3b8eea",brightMagenta:"#d670d6",brightCyan:"#29b8db",brightWhite:"#605e5c"},cursorBlink:!1,disableStdin:!0,allowProposedApi:!0,convertEol:!0});c.open(p.current),m.current=c}g.current!==r&&m.current&&(m.current.reset(),m.current.write(h),g.current=r)}},[d,h,r]);let f=c=>c.includes("architecture")?"\u{1F4DD}":c.includes("security")?"\u{1F512}":c.includes("reliability")?"\u26A1":c.includes("performance")?"\u{1F680}":c.includes("cost")?"\u{1F4B0}":c.includes("operational")?"\u2699\uFE0F":c.includes("diagram")?"\u{1F4D0}":c.endsWith(".md")?"\u{1F4C4}":c.endsWith(".txt")?"\u{1F4CB}":"\u{1F4CE}";return!e||e.length===0?(0,Z.jsx)("div",{className:"flex items-center justify-center h-96 bg-white rounded-lg border border-gray-200",children:(0,Z.jsx)("p",{className:"text-gray-500",children:"No files available"})}):(0,Z.jsxs)("div",{className:"flex h-full bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",style:{fontFamily:"Segoe UI, system-ui, sans-serif",minHeight:"600px"},children:[(0,Z.jsxs)("div",{className:"w-64 bg-gray-50 border-r border-gray-200 overflow-y-auto",children:[(0,Z.jsxs)("div",{className:"p-4 border-b border-gray-200 bg-white",children:[(0,Z.jsx)("h3",{className:"font-semibold text-gray-900",children:"Generated Files"}),(0,Z.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:[e.length," files"]})]}),(0,Z.jsx)("div",{className:"p-2",children:e.map(c=>(0,Z.jsx)("button",{onClick:()=>o(c.id),className:`w-full text-left px-3 py-2 rounded mb-1 transition-colors ${r===c.id?"bg-[#0078d4] text-white":"text-gray-700 hover:bg-gray-200"}`,children:(0,Z.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Z.jsx)("span",{className:"text-lg flex-shrink-0",children:f(c.name)}),(0,Z.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Z.jsx)("div",{className:"text-sm font-medium truncate",children:c.name}),c.size&&(0,Z.jsxs)("div",{className:"text-xs opacity-75 mt-0.5",children:[(c.size/1024).toFixed(1)," KB"]})]})]})},c.id))})]}),(0,Z.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,Z.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,Z.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Z.jsx)("span",{className:"text-2xl",children:_&&f(_.name)}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:_?.name||"No file selected"}),(0,Z.jsxs)("p",{className:"text-sm text-gray-600",children:[d==="markdown"&&"\u{1F4DD} Markdown Document",d==="ascii"&&"\u{1F4D0} ASCII Art / Terminal Output",d==="raw"&&"\u{1F4C4} Plain Text"]})]})]}),_&&(0,Z.jsxs)("div",{className:"flex gap-2",children:[(0,Z.jsx)("a",{href:_.url,download:_.name,className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:"\u2B07\uFE0F Download"}),(0,Z.jsx)("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1.5 text-sm font-medium text-[#0078d4] bg-white border border-[#0078d4] rounded hover:bg-blue-50 transition-colors",children:"\u{1F517} Open"})]})]})}),(0,Z.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 bg-white",children:[n&&(0,Z.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Z.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#0078d4]"})}),u&&(0,Z.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,Z.jsx)("h3",{className:"text-red-800 font-semibold mb-2",children:"Failed to load file"}),(0,Z.jsx)("p",{className:"text-red-600 text-sm",children:u})]}),!n&&!u&&h&&(0,Z.jsxs)(Z.Fragment,{children:[d==="markdown"&&(0,Z.jsx)("div",{className:"prose prose-azure max-w-none",children:(0,Z.jsx)(an,{remarkPlugins:[ri],components:{h1:({children:c})=>(0,Z.jsx)("h1",{className:"text-3xl font-semibold text-gray-900 mb-4 mt-6 pb-2 border-b border-gray-200",children:c}),h2:({children:c})=>(0,Z.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-3 mt-5 pb-2 border-b border-gray-200",children:c}),h3:({children:c})=>(0,Z.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2 mt-4",children:c}),p:({children:c})=>(0,Z.jsx)("p",{className:"text-gray-700 mb-4 leading-relaxed",children:c}),a:({href:c,children:S})=>(0,Z.jsx)("a",{href:c,className:"text-[#0078d4] hover:underline",target:"_blank",rel:"noopener noreferrer",children:S}),code:({inline:c,children:S})=>c?(0,Z.jsx)("code",{className:"px-1.5 py-0.5 bg-gray-100 text-[#d73a49] rounded text-sm font-mono",children:S}):(0,Z.jsx)("code",{className:"block bg-gray-50 border border-gray-200 rounded p-4 overflow-x-auto text-sm font-mono text-gray-800",children:S}),pre:({children:c})=>(0,Z.jsx)("pre",{className:"bg-gray-50 border border-gray-200 rounded p-4 overflow-x-auto mb-4",children:c}),table:({children:c})=>(0,Z.jsx)("div",{className:"overflow-x-auto mb-4",children:(0,Z.jsx)("table",{className:"min-w-full border border-gray-300 rounded",children:c})}),thead:({children:c})=>(0,Z.jsx)("thead",{className:"bg-gray-100",children:c}),th:({children:c})=>(0,Z.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-gray-900 border-b border-gray-300",children:c}),td:({children:c})=>(0,Z.jsx)("td",{className:"px-4 py-2 text-sm text-gray-700 border-b border-gray-200",children:c}),ul:({children:c})=>(0,Z.jsx)("ul",{className:"list-disc list-inside mb-4 space-y-2 text-gray-700",children:c}),ol:({children:c})=>(0,Z.jsx)("ol",{className:"list-decimal list-inside mb-4 space-y-2 text-gray-700",children:c}),li:({children:c})=>(0,Z.jsx)("li",{className:"ml-4",children:c}),blockquote:({children:c})=>(0,Z.jsx)("blockquote",{className:"border-l-4 border-[#0078d4] pl-4 py-2 mb-4 italic text-gray-600 bg-blue-50",children:c}),strong:({children:c})=>(0,Z.jsx)("strong",{className:"font-semibold text-gray-900",children:c}),em:({children:c})=>(0,Z.jsx)("em",{className:"italic text-gray-700",children:c})},children:h})}),d==="ascii"&&(0,Z.jsx)("div",{ref:p,className:"bg-white rounded border border-gray-200 overflow-hidden",style:{minHeight:"500px"}}),d==="raw"&&(0,Z.jsx)("pre",{className:"bg-gray-50 border border-gray-200 rounded p-4 overflow-auto text-sm font-mono text-gray-800 whitespace-pre-wrap",children:h})]})]})]})]})};window.DocViewer=Cl;})();
/*! Bundled license information:

react/cjs/react-jsx-runtime.production.js:
  (**
   * @license React
   * react-jsx-runtime.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.7/LICENSE *)
*/
//# sourceMappingURL=filepreview.bundle.js.map
